{"ts":1364361880073,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":false,"ts":1364362195348,"patch":[[{"diffs":[[1,"\r\n(function(){\r\n\r\n  var Renderer = function(canvas){\r\n    var canvas = $(canvas).get(0)\r\n    var ctx = canvas.getContext(\"2d\");\r\n    var particleSystem\r\n\r\n    var that = {\r\n      init:function(system){\r\n        //\r\n        // the particle system will call the init function once, right before the\r\n        // first frame is to be drawn. it's a good place to set up the canvas and\r\n        // to pass the canvas size to the particle system\r\n        //\r\n        // save a reference to the particle system for use in the .redraw() loop\r\n        particleSystem = system\r\n\r\n        // inform the system of the screen dimensions so it can map coords for us.\r\n        // if the canvas is ever resized, screenSize should be called again with\r\n        // the new dimensions\r\n        particleSystem.screenSize(canvas.width, canvas.height) \r\n        particleSystem.screenPadding(80) // leave an extra 80px of whitespace per side\r\n        \r\n        // set up some event handlers to allow for node-dragging\r\n        that.initMouseHandling()\r\n      },\r\n      \r\n      redraw:function(){\r\n        // \r\n        // redraw will be called repeatedly during the run whenever the node positions\r\n        // change. the new positions for the nodes can be accessed by looking at the\r\n        // .p attribute of a given node. however the p.x & p.y values are in the coordinates\r\n        // of the particle system rather than the screen. you can either map them to\r\n        // the screen yourself, or use the convenience iterators .eachNode (and .eachEdge)\r\n        // which allow you to step through the actual node objects but also pass an\r\n        // x,y point in the screen's coordinate system\r\n        // \r\n        ctx.fillStyle = \"white\"\r\n        ctx.fillRect(0,0, canvas.width, canvas.height)\r\n        \r\n        particleSystem.eachEdge(function(edge, pt1, pt2){\r\n          // edge: {source:Node, target:Node, length:#, data:{}}\r\n          // pt1:  {x:#, y:#}  source position in screen coords\r\n          // pt2:  {x:#, y:#}  target position in screen coords\r\n\r\n          // draw a line from pt1 to pt2\r\n          ctx.strokeStyle = \"rgba(0,0,0, .333)\"\r\n          ctx.lineWidth = 1\r\n          ctx.beginPath()\r\n          ctx.moveTo(pt1.x, pt1.y)\r\n          ctx.lineTo(pt2.x, pt2.y)\r\n          ctx.stroke()\r\n        })\r\n\r\n        particleSystem.eachNode(function(node, pt){\r\n          // node: {mass:#, p:{x,y}, name:\"\", data:{}}\r\n          // pt:   {x:#, y:#}  node position in screen coords\r\n\r\n          // draw a rectangle centered at pt\r\n          var w = 10\r\n          ctx.fillStyle = (node.data.alone) ? \"orange\" : \"black\"\r\n          ctx.fillRect(pt.x-w/2, pt.y-w/2, w,w)\r\n        })        \t\t\r\n      },\r\n      \r\n      initMouseHandling:function(){\r\n        // no-nonsense drag and drop (thanks springy.js)\r\n        var dragged = null;\r\n\r\n        // set up a handler object that will initially listen for mousedowns then\r\n        // for moves and mouseups while dragging\r\n        var handler = {\r\n          clicked:function(e){\r\n            var pos = $(canvas).offset();\r\n            _mouseP = arbor.Point(e.pageX-pos.left, e.pageY-pos.top)\r\n            dragged = particleSystem.nearest(_mouseP);\r\n\r\n            if (dragged && dragged.node !== null){\r\n              // while we're dragging, don't let physics move the node\r\n              dragged.node.fixed = true\r\n            }\r\n\r\n            $(canvas).bind('mousemove', handler.dragged)\r\n            $(window).bind('mouseup', handler.dropped)\r\n\r\n            return false\r\n          },\r\n          dragged:function(e){\r\n            var pos = $(canvas).offset();\r\n            var s = arbor.Point(e.pageX-pos.left, e.pageY-pos.top)\r\n\r\n            if (dragged && dragged.node !== null){\r\n              var p = particleSystem.fromScreen(s)\r\n              dragged.node.p = p\r\n            }\r\n\r\n            return false\r\n          },\r\n\r\n          dropped:function(e){\r\n            if (dragged===null || dragged.node===undefined) return\r\n            if (dragged.node !== null) dragged.node.fixed = false\r\n            dragged.node.tempMass = 1000\r\n            dragged = null\r\n            $(canvas).unbind('mousemove', handler.dragged)\r\n            $(window).unbind('mouseup', handler.dropped)\r\n            _mouseP = null\r\n            return false\r\n          }\r\n        }\r\n        \r\n        // start listening\r\n        $(canvas).mousedown(handler.clicked);\r\n\r\n      },\r\n      \r\n    }\r\n    return that\r\n  }    \r\n\r\n  $(document).ready(function(){\r\n    var sys = arbor.ParticleSystem(1000, 600, 0.5) // create the system with sensible repulsion/stiffness/friction\r\n    sys.parameters({gravity:true}) // use center-gravity to make the graph settle nicely (ymmv)\r\n    sys.renderer = Renderer(\"#viewport\") // our newly created renderer will have its .init() method called shortly by sys...\r\n\r\n    // add some nodes to the graph and watch it go...\r\n    sys.addEdge('a','b')\r\n    sys.addEdge('a','c')\r\n    sys.addEdge('a','d')\r\n    sys.addEdge('a','e')\r\n    sys.addNode('f', {alone:true, mass:.25})\r\n\r\n    // or, equivalently:\r\n    //\r\n    // sys.graft({\r\n    //   nodes:{\r\n    //     f:{alone:true, mass:.25}\r\n    //   }, \r\n    //   edges:{\r\n    //     a:{ b:{},\r\n    //         c:{},\r\n    //         d:{},\r\n    //         e:{}\r\n    //     }\r\n    //   }\r\n    // })\r\n    \r\n  })\r\n\r\n})()"]],"start1":0,"start2":0,"length1":0,"length2":5300}]],"length":5300,"saved":false}
{"ts":1364362280056,"patch":[[{"diffs":[[0,"){\r\n\r\n  "],[-1,"var "],[1,"  _"],[0,"Renderer"]],"start1":12,"start2":12,"length1":20,"length2":19}]],"length":5299,"saved":false}
{"ts":1364362341787,"patch":[[{"diffs":[[0,"\r\n\r\n    "],[-1,"_"],[0,"Renderer"]],"start1":14,"start2":14,"length1":17,"length2":16}]],"length":5298,"saved":false}
{"contributors":[],"silentsave":false,"ts":1364365481632,"patch":[[{"diffs":[[-1,"\r\n"],[0,"(functio"]],"start1":0,"start2":0,"length1":10,"length2":8},{"diffs":[[0,"ion(){\r\n"],[-1,"\r\n"],[0,"  "],[1,"\r\n"],[0,"  Render"]],"start1":6,"start2":6,"length1":20,"length2":20},{"diffs":[[0,"var "],[-1,"particleSystem\r\n\r\n    var that = {\r\n      init:function(system){\r\n        //\r\n        // the"],[1,"gfx = arbor.Graphics(canvas)\r\n    var"],[0," par"]],"start1":129,"start2":129,"length1":100,"length2":45},{"diffs":[[0,"icle"],[-1," s"],[1,"S"],[0,"ystem "],[-1,"will call the init function once, right before the\r\n        // first frame is to be drawn. it's a good place to set up the canvas and\r\n        // to pass the canvas size to the particle system\r\n        //\r\n        // save a reference to the particle system for use in the .redraw() loop\r\n        particleSystem = system\r\n\r\n        // inform the system of the screen dimensions so it can map coords for us.\r\n        // if the canvas is ever resized, screenSize should be called again with\r\n        // the new dimensions"],[1,"= null\r\n\r\n    var that = {\r\n      init:function(system){\r\n        particleSystem = system"],[0,"\r\n  "]],"start1":175,"start2":175,"length1":534,"length2":104},{"diffs":[[0,"ing("],[-1,"80) // leave an extra 80px of whitespace per side\r\n        \r\n        // set up some event handlers to allow for node-dragging"],[1,"40)\r\n"],[0,"\r\n  "]],"start1":375,"start2":375,"length1":133,"length2":13},{"diffs":[[0,"ng()\r\n      },\r\n"],[-1,"      "],[1,""],[0,"\r\n      redraw:f"]],"start1":414,"start2":414,"length1":38,"length2":32},{"diffs":[[0,"    "],[-1,"// \r\n        // redraw will be called repeatedly during the run whenever the "],[1,"if (!particleSystem) return\r\n\r\n        gfx.clear() // convenience ƒ: clears the whole canvas rect\r\n\r\n        // draw the nodes & save their bounds for edge drawing\r\n        var nodeBoxes = {}\r\n        particleSystem.eachNode(function("],[0,"node"],[1,","],[0," p"],[-1,"ositions\r\n"],[1,"t){\r\n  "],[0,"    "]],"start1":462,"start2":462,"length1":101,"length2":256},{"diffs":[[0," // "],[-1,"change. the new positions for the nodes can be accessed by looking at the\r\n        // .p attribute of a given node. however the p.x & p.y values are in the coordinates\r\n        // of the particle system rather than the screen. you can either map them to\r\n        // the screen yourself, or use the convenience iterators .eachNode (and .eachEdge)"],[1,"node: {mass:#, p:{x,y}, name:\"\", data:{}}\r\n          // pt:   {x:#, y:#}  node position in screen coords\r\n\r\n          // determine the box size and round off the coords if we'll be \r\n          // drawing a text label (awful alignment jitter otherwise...)\r\n          var label = node.data.label||\"\"\r\n          var w = ctx.measureText(\"\"+label).width + 10\r\n          if (!(\"\"+label).match(/^[ \\t]*$/)){\r\n            pt.x = Math.floor(pt.x)\r\n            pt.y = Math.floor(pt.y)\r\n          }else{\r\n            label = null\r\n          }\r\n\r\n          // draw a rectangle centered at pt\r\n          if (node.data.color) ctx.fillStyle = node.data.color\r\n          else ctx.fillStyle = \"rgba(0,0,0,.2)\"\r\n          if (node.data.color=='none') ctx.fillStyle = \"white\"\r\n\r\n          if (node.data.shape=='dot'){"],[0,"\r\n  "]],"start1":721,"start2":721,"length1":353,"length2":806},{"diffs":[[0,"    "],[-1,"// which allow you to step through the actual node objects but also pass an\r\n        // x,y point in the screen's coordinate system\r\n        // \r\n"],[1,"    gfx.oval(pt.x-w/2, pt.y-w/2, w,w, {fill:ctx.fillStyle})\r\n            nodeBoxes[node.name] = [pt.x-w/2, pt.y-w/2, w,w]\r\n          }else{\r\n            gfx.rect(pt.x-w/2, pt.y-10, w,20, 4, {fill:ctx.fillStyle})\r\n            nodeBoxes[node.name] = [pt.x-w/2, pt.y-11, w, 22]\r\n          }\r\n\r\n          // draw the text\r\n          if (label){\r\n            ctx.font = \"12px Helvetica\"\r\n            ctx.textAlign = \"center\"\r\n    "],[0,"    "]],"start1":1529,"start2":1529,"length1":154,"length2":433},{"diffs":[[0,"    "],[-1,"ctx.fillRect(0,0, canvas.width, canvas.height)\r\n        "],[1,"    if (node.data.color=='none') ctx.fillStyle = '#333333'\r\n            ctx.fillText(label||\"\", pt.x, pt.y+4)\r\n            ctx.fillText(label||\"\", pt.x, pt.y+4)\r\n          }\r\n        })        \t\t\r\n\r\n\r\n        // draw the edges"],[0,"\r\n  "]],"start1":1995,"start2":1995,"length1":64,"length2":234},{"diffs":[[0,"    "],[-1,"// draw a line from pt1 to pt2\r\n          ctx.strokeStyle = \"rgba(0,0,0, .333)\"\r\n          ctx.lineWidth ="],[1,"var weight = edge.data.weight\r\n          var color = edge.data.color\r\n\r\n          if (!color || (\"\"+color).match(/^[ \\t]*$/)) color = null\r\n\r\n          // find the start point\r\n          var tail = intersect_line_box(pt1, pt2, nodeBoxes[edge.source.name])\r\n          var head = intersect_line_box(tail, pt2, nodeBoxes[edge.target.name])\r\n\r\n          ctx.save() \r\n            ctx.beginPath()\r\n            ctx.lineWidth = (!isNaN(weight)) ? parseFloat(weight) :"],[0," 1\r\n"],[1,"  "],[0,"    "]],"start1":2490,"start2":2490,"length1":118,"length2":473},{"diffs":[[0,"        ctx."],[-1,"beginPath()\r\n"],[1,"strokeStyle = (color) ? color : \"#cccccc\"\r\n            ctx.fillStyle = null\r\n\r\n  "],[0,"          ct"]],"start1":2961,"start2":2961,"length1":37,"length2":105},{"diffs":[[0,"eTo("],[-1,"pt1.x, pt1"],[1,"tail.x, tail"],[0,".y)\r"]],"start1":3071,"start2":3071,"length1":18,"length2":20},{"diffs":[[0,"l.y)\r\n          "],[1,"  "],[0,"ctx.lineTo(pt2.x"]],"start1":3086,"start2":3086,"length1":32,"length2":34},{"diffs":[[0,"eTo("],[-1,"pt2.x, pt2"],[1,"head.x, head"],[0,".y)\r\n"],[1,"  "],[0,"    "]],"start1":3111,"start2":3111,"length1":23,"length2":27},{"diffs":[[0,"    "],[-1,"})\r\n\r\n        particleSystem.eachNode(function(node, pt){\r\n          // node: {mass:#, p:{x,y}, name:\"\", data:{}}\r\n          // pt:   {x:#, y:#}  node position in screen coords\r\n\r\n          // draw a rectangle centered at pt\r\n          var w = 10\r\n          ctx.fillStyle = (node.data.alone) ? \"orange\" : \"black\"\r\n          ctx.fillRect(pt.x-w/2, pt.y-w/2, w,w"],[1,"  ctx.restore()\r\n\r\n          // draw an arrowhead if this is a -> style edge\r\n          if (edge.data.directed){\r\n            ctx.save()\r\n              // move to the head position of the edge we just drew\r\n              var wt = !isNaN(weight) ? parseFloat(weight) : 1\r\n              var arrowLength = 6 + wt\r\n              var arrowWidth = 2 + wt\r\n              ctx.fillStyle = (color) ? color : \"#cccccc\"\r\n              ctx.translate(head.x, head.y);\r\n              ctx.rotate(Math.atan2(head.y - tail.y, head.x - tail.x));\r\n\r\n              // delete some of the edge that's already there (so the point isn't hidden)\r\n              ctx.clearRect(-arrowLength/2,-wt/2, arrowLength/2,wt)\r\n\r\n              // draw the chevron\r\n              ctx.beginPath();\r\n              ctx.moveTo(-arrowLength, arrowWidth);\r\n              ctx.lineTo(0, 0);\r\n              ctx.lineTo(-arrowLength, -arrowWidth);\r\n              ctx.lineTo(-arrowLength * 0.8, -0);\r\n              ctx.closePath();\r\n              ctx.fill();\r\n            ctx.restore("],[0,")\r\n "]],"start1":3162,"start2":3162,"length1":368,"length2":1041},{"diffs":[[0,"        "],[-1,"})"],[1,"  }\r\n"],[0,"        "],[-1,"\t\t"],[1,"})\r\n\r\n\r\n"],[0,"\r\n      "]],"start1":4202,"start2":4202,"length1":28,"length2":37},{"diffs":[[0,"\r\n      },\r\n"],[-1,"      \r\n"],[0,"      initMo"]],"start1":4231,"start2":4231,"length1":32,"length2":24},{"diffs":[[0,"pringy.js)\r\n"],[1,"        selected = null;\r\n        nearest = null;\r\n"],[0,"        var "]],"start1":4326,"start2":4326,"length1":24,"length2":75},{"diffs":[[0,"= null;\r"],[1,"\n        var oldmass = 1\r"],[0,"\n\r\n     "]],"start1":4409,"start2":4409,"length1":16,"length2":41},{"diffs":[[0,"op)\r\n           "],[1," selected = nearest ="],[0," dragged = parti"]],"start1":4743,"start2":4743,"length1":32,"length2":53},{"diffs":[[0," if (dragged"],[-1," && dragged"],[0,".node !== nu"]],"start1":4838,"start2":4838,"length1":35,"length2":24},{"diffs":[[0,"ull)"],[-1,"{\r\n              // while we're dragging, don't let physics move the node\r\n             "],[0," dra"]],"start1":4861,"start2":4861,"length1":96,"length2":8},{"diffs":[[0," = true\r"],[-1,"\n            }\r"],[0,"\n\r\n     "]],"start1":4884,"start2":4884,"length1":31,"length2":16},{"diffs":[[0,"d:function(e){\r\n"],[1,"            var old_nearest = nearest && nearest.node._id\r\n"],[0,"            var "]],"start1":5067,"start2":5067,"length1":32,"length2":91},{"diffs":[[0,"    if ("],[-1,"dragged"],[1,"!nearest) return\r\n            if (dragged !== null"],[0," && drag"]],"start1":5263,"start2":5263,"length1":23,"length2":66},{"diffs":[[0,"pMass = "],[-1,"100"],[1,"5"],[0,"0\r\n     "]],"start1":5690,"start2":5690,"length1":19,"length2":17},{"diffs":[[0,"dragged = null\r\n"],[1,"            selected = null\r\n"],[0,"            $(ca"]],"start1":5714,"start2":5714,"length1":32,"length2":61},{"diffs":[[0," }\r\n"],[-1,"        \r\n        // start listening\r\n"],[0,"    "]],"start1":5951,"start2":5951,"length1":46,"length2":8},{"diffs":[[0,"\n      }"],[-1,","],[0,"\r\n"],[-1,"      "],[0,"\r\n    }\r"]],"start1":6003,"start2":6003,"length1":25,"length2":18},{"diffs":[[0," }\r\n"],[-1,"    return that"],[1,"\r\n    // helpers for figuring out where to draw arrows (thanks springy.js)"],[0,"\r\n  "],[-1,"}"],[0,"  "],[-1,"  \r\n\r\n  $(document).ready(function()"],[1,"var intersect_line_line = function(p1, p2, p3, p4)\r\n    "],[0,"{\r\n    "],[1,"  "],[0,"var "],[-1,"sys = arbor.ParticleSystem(1000, 600, 0.5) // create the system with sensible repulsion/stiffness/friction\r\n    sys.parameters({gravity:true}) // use center-gravity to make the graph settle nicely (ymmv)\r\n    sys.renderer = Renderer(\"#viewport\") // our newly created renderer will have its .init() method called shortly by sys...\r\n\r\n    // add some nodes to the graph and watch it go...\r\n    sys.addEdge('a','b')\r\n    sys.addEdge('a','c')\r\n    sys.addEdge('a','d')\r\n    sys.addEdge('a','e')\r\n    sys.addNode('f', {alone:true, mass:.25})\r\n\r\n    // or, equivalently:\r\n    //\r\n    // sys.graft({\r\n    //   nodes:{\r\n    //     f:{alone:true, mass:.25}\r\n    //   }, \r\n    //   edges:{\r\n    //     a:{ b:{},"],[1,"denom = ((p4.y - p3.y)*(p2.x - p1.x) - (p4.x - p3.x)*(p2.y - p1.y));\r\n      if (denom === 0) return false // lines are parallel\r\n      var ua = ((p4.x - p3.x)*(p1.y - p3.y) - (p4.y - p3.y)*(p1.x - p3.x)) / denom;\r\n      var ub = ((p2.x - p1.x)*(p1.y - p3.y) - (p2.y - p1.y)*(p1.x - p3.x)) / denom;\r\n\r\n      if (ua < 0 || ua > 1 || ub < 0 || ub > 1)  return false\r\n      return arbor.Point(p1.x + ua * (p2.x - p1.x), p1.y + ua * (p2.y - p1.y));\r\n    }\r\n\r\n    var intersect_line_box = function(p1, p2, boxTuple)\r\n    {\r\n      var p3 = {x:boxTuple[0], y:boxTuple[1]},\r\n          w = boxTuple[2],\r\n          h = boxTuple[3]\r\n\r\n      var tl = {x: p3.x, y: p3.y};\r\n      var tr = {x: p3.x + w, y: p3.y};\r\n      var bl = {x: p3.x, y: p3.y + h};\r\n      var br = {x: p3.x + w, y: p3.y + h};\r\n\r\n      return intersect_line_line(p1, p2, tl, tr) ||"],[0,"\r\n    "],[-1,"//"],[0,"        "],[-1," c:{},"],[1,"intersect_line_line(p1, p2, tr, br) ||"],[0,"\r\n    "],[-1,"//"],[0,"        "],[-1," d:{},"],[1,"intersect_line_line(p1, p2, br, bl) ||"],[0,"\r\n    "],[-1,"//"],[0,"        "],[-1," e:{}\r\n    //"],[1,"intersect_line_line(p1, p2, bl, tl) ||\r\n"],[0,"     "],[-1,"}\r\n"],[0,"    "],[-1,"//"],[0,"   "],[-1,"}\r\n    // })\r\n    \r\n  })\r\n"],[1,"false\r\n    }\r\n\r\n    return that\r\n  }    \r\n  "],[0,"\r\n})"]],"start1":6018,"start2":6018,"length1":894,"length2":1207}]],"length":7227,"saved":false}
{"contributors":[],"silentsave":false,"ts":1364377301997,"patch":[[{"diffs":[[0,"on()"],[-1,"{\r\n  \r\n  Renderer = function(canvas){\r\n    var canvas = $(canvas).get(0)\r\n    var ctx = canvas.getContext(\"2d\");\r\n    var gfx = arbor.Graphics(canvas)\r\n    var particleSystem = null\r\n\r\n    var that = {\r\n      init:function(system){\r\n        particleSystem = system\r\n        particleSystem.screenSize(canvas.width, canvas.height) \r\n        particleSystem.screenPadding(40)\r\n\r\n        that.initMouseHandling()\r\n      },\r\n\r\n      redraw:function(){\r\n        if (!particleSystem) return\r\n\r\n        gfx.clear() // convenience ƒ: clears the whole canvas rect\r\n\r\n        // draw the nodes & save their bounds for edge drawing\r\n        var nodeBoxes = {}\r\n        particleSystem.eachNode(function(node, pt){\r\n          // node: {mass:#, p:{x,y}, name:\"\", data:{}}\r\n          // pt:   {x:#, y:#}  node position in screen coords\r\n\r\n          // determine the box size and round off the coords if we'll be \r\n          // drawing a text label (awful alignment jitter otherwise...)\r\n          var label = node.data.label||\"\"\r\n          var w = ctx.measureText(\"\"+label).width + 10\r\n          if (!(\"\"+label).match(/^[ \\t]*$/)){\r\n            pt.x = Math.floor(pt.x)\r\n            pt.y = Math.floor(pt.y)\r\n          }else{\r\n            label = null\r\n          }\r\n\r\n          // draw a rectangle centered at pt\r\n          if (node.data.color) ctx.fillStyle = node.data.color\r\n          else ctx.fillStyle = \"rgba(0,0,0,.2)\"\r\n          if (node.data.color=='none') ctx.fillStyle = \"white\"\r\n\r\n          if (node.data.shape=='dot'){\r\n            gfx.oval(pt.x-w/2, pt.y-w/2, w,w, {fill:ctx.fillStyle})\r\n            nodeBoxes[node.name] = [pt.x-w/2, pt.y-w/2, w,w]\r\n          }else{\r\n            gfx.rect(pt.x-w/2, pt.y-10, w,20, 4, {fill:ctx.fillStyle})\r\n            nodeBoxes[node.name] = [pt.x-w/2, pt.y-11, w, 22]\r\n          }\r\n\r\n          // draw the text\r\n          if (label){\r\n            ctx.font = \"12px Helvetica\"\r\n            ctx.textAlign = \"center\"\r\n            ctx.fillStyle = \"white\"\r\n            if (node.data.color=='none') ctx.fillStyle = '#333333'\r\n            ctx.fillText(label||\"\", pt.x, pt.y+4)\r\n            ctx.fillText(label||\"\", pt.x, pt.y+4)\r\n          }\r\n        })        \t\t\r\n\r\n\r\n        // draw the edges\r\n        particleSystem.eachEdge(function(edge, pt1, pt2){\r\n          // edge: {source:Node, target:Node, length:#, data:{}}\r\n          // pt1:  {x:#, y:#}  source position in screen coords\r\n          // pt2:  {x:#, y:#}  target position in screen coords\r\n\r\n          var weight = edge.data.weight\r\n          var color = edge.data.color\r\n\r\n          if (!color || (\"\"+color).match(/^[ \\t]*$/)) color = null\r\n\r\n          // find the start point\r\n          var tail = intersect_line_box(pt1, pt2, nodeBoxes[edge.source.name])\r\n          var head = intersect_line_box(tail, pt2, nodeBoxes[edge.target.name])\r\n\r\n          ctx.save() \r\n            ctx.beginPath()\r\n            ctx.lineWidth = (!isNaN(weight)) ? parseFloat(weight) : 1\r\n            ctx.strokeStyle = (color) ? color : \"#cccccc\"\r\n            ctx.fillStyle = null\r\n\r\n            ctx.moveTo(tail.x, tail.y)\r\n            ctx.lineTo(head.x, head.y)\r\n            ctx.stroke()\r\n          ctx.restore()\r\n\r\n          // draw an arrowhead if this is a -> style edge\r\n          if (edge.data.directed){\r\n            ctx.save()\r\n              // move to the head position of the edge we just drew\r\n              var wt = !isNaN(weight) ? parseFloat(weight) : 1\r\n              var arrowLength = 6 + wt\r\n              var arrowWidth = 2 + wt\r\n              ctx.fillStyle = (color) ? color : \"#cccccc\"\r\n              ctx.translate(head.x, head.y);\r\n              ctx.rotate(Math.atan2(head.y - tail.y, head.x - tail.x));\r\n\r\n              // delete some of the edge that's already there (so the point isn't hidden)\r\n              ctx.clearRect(-arrowLength/2,-wt/2, arrowLength/2,wt)\r\n\r\n              // draw the chevron\r\n              ctx.beginPath();\r\n              ctx.moveTo(-arrowLength, arrowWidth);\r\n              ctx.lineTo(0, 0);\r\n              ctx.lineTo(-arrowLength, -arrowWidth);\r\n              ctx.lineTo(-arrowLength * 0.8, -0);\r\n              ctx.closePath();\r\n              ctx.fill();\r\n            ctx.restore()\r\n          }\r\n        })\r\n\r\n\r\n\r\n      },\r\n      initMouseHandling:function(){\r\n        // no-nonsense drag and drop (thanks springy.js)\r\n        selected = null;\r\n        nearest = null;\r\n        var dragged = null;\r\n        var oldmass = 1\r\n\r\n        // set up a handler object that will initially listen for mousedowns then\r\n        // for moves and mouseups while dragging\r\n        var handler = {\r\n          clicked:function(e){\r\n            var pos = $(canvas).offset();\r\n            _mouseP = arbor.Point(e.pageX-pos.left, e.pageY-pos.top)\r\n            selected = nearest = dragged = particleSystem.nearest(_mouseP);\r\n\r\n            if (dragged.node !== null) dragged.node.fixed = true\r\n\r\n            $(canvas).bind('mousemove', handler.dragged)\r\n            $(window).bind('mouseup', handler.dropped)\r\n\r\n            return false\r\n          },\r\n          dragged:function(e){\r\n            var old_nearest = nearest && nearest.node._id\r\n            var pos = $(canvas).offset();\r\n            var s = arbor.Point(e.pageX-pos.left, e.pageY-pos.top)\r\n\r\n            if (!nearest) return\r\n            if (dragged !== null && dragged.node !== null){\r\n              var p = particleSystem.fromScreen(s)\r\n              dragged.node.p = p\r\n            }\r\n\r\n            return false\r\n          },\r\n\r\n          dropped:function(e){\r\n            if (dragged===null || dragged.node===undefined) return\r\n            if (dragged.node !== null) dragged.node.fixed = false\r\n            dragged.node.tempMass = 50\r\n            dragged = null\r\n            selected = null\r\n            $(canvas).unbind('mousemove', handler.dragged)\r\n            $(window).unbind('mouseup', handler.dropped)\r\n            _mouseP = null\r\n            return false\r\n          }\r\n        }\r\n        $(canvas).mousedown(handler.clicked);\r\n\r\n      }\r\n\r\n    }\r\n\r\n    // helpers for figuring out where to draw arrows (thanks springy.js)\r\n    var intersect_line_line = function(p1, p2, p3, p4)\r\n    {\r\n      var denom = ((p4.y - p3.y)*(p2.x - p1.x) - (p4.x - p3.x)*(p2.y - p1.y));\r\n      if (denom === 0) return false // lines are parallel\r\n      var ua = ((p4.x - p3.x)*(p1.y - p3.y) - (p4.y - p3.y)*(p1.x - p3.x)) / denom;\r\n      var ub = ((p2.x - p1.x)*(p1.y - p3.y) - (p2.y - p1.y)*(p1.x - p3.x)) / denom;\r\n\r\n      if (ua < 0 || ua > 1 || ub < 0 || ub > 1)  return false\r\n      return arbor.Point(p1.x + ua * (p2.x - p1.x), p1.y + ua * (p2.y - p1.y));\r\n    }\r\n\r\n    var intersect_line_box = function(p1, p2, boxTuple)\r\n    {\r\n      var p3 = {x:boxTuple[0], y:boxTuple[1]},\r\n          w = boxTuple[2],\r\n          h = boxTuple[3]\r\n\r\n      var tl = {x: p3.x, y: p3.y};\r\n      var tr = {x: p3.x + w, y: p3.y};\r\n      var bl = {x: p3.x, y: p3.y + h};\r\n      var br = {x: p3.x + w, y: p3.y + h};\r\n\r\n      return intersect_line_line(p1, p2, tl, tr) ||\r\n            intersect_line_line(p1, p2, tr, br) ||\r\n            intersect_line_line(p1, p2, br, bl) ||\r\n            intersect_line_line(p1, p2, bl, tl) ||\r\n            false\r\n    }\r\n\r\n    return that\r\n  }    \r\n  \r"],[1," {\n\n    Renderer = function(canvas) {\n        var canvas = $(canvas).get(0)\n        var ctx = canvas.getContext(\"2d\");\n        var gfx = arbor.Graphics(canvas)\n        var particleSystem = null\n\n        var that = {\n            init: function(system) {\n                particleSystem = system\n                particleSystem.screenSize(canvas.width, canvas.height)\n                particleSystem.screenPadding(40)\n\n                that.initMouseHandling()\n            },\n\n            redraw: function() {\n                if (!particleSystem) return\n\n                 ctx.fillStyle = \"white\"\n                 ctx.fillRect(0,0, canvas.width, canvas.height)\n                \n                                // draw the edges\n                particleSystem.eachEdge(function(edge, pt1, pt2) {\n                    // edge: {source:Node, target:Node, length:#, data:{}}\n                    // pt1:  {x:#, y:#}  source position in screen coords\n                    // pt2:  {x:#, y:#}  target position in screen coords\n\n                    var weight = edge.data.weight\n                    var color = edge.data.color\n\n                    if (!color || (\"\" + color).match(/^[ \\t]*$/)) color = null\n\n                    // find the start point\n                    var tail = intersect_line_box(pt1, pt2, nodeBoxes[edge.source.name])\n                    var head = intersect_line_box(tail, pt2, nodeBoxes[edge.target.name])\n\n                    ctx.save()\n                    ctx.beginPath()\n                    ctx.lineWidth = (!isNaN(weight)) ? parseFloat(weight) : 1\n                    ctx.strokeStyle = (color) ? color : \"#cccccc\"\n                    ctx.fillStyle = null\n\n                    ctx.moveTo(tail.x, tail.y)\n                    ctx.lineTo(head.x, head.y)\n                    ctx.stroke()\n                    ctx.restore()\n\n                    // draw an arrowhead if this is a -> style edge\n                    if (edge.data.directed) {\n                        ctx.save()\n                        // move to the head position of the edge we just drew\n                        var wt = !isNaN(weight) ? parseFloat(weight) : 1\n                        var arrowLength = 6 + wt\n                        var arrowWidth = 2 + wt\n                        ctx.fillStyle = (color) ? color : \"#cccccc\"\n                        ctx.translate(head.x, head.y);\n                        ctx.rotate(Math.atan2(head.y - tail.y, head.x - tail.x));\n\n                        // delete some of the edge that's already there (so the point isn't hidden)\n                        ctx.clearRect(-arrowLength / 2, - wt / 2, arrowLength / 2, wt)\n\n                        // draw the chevron\n                        ctx.beginPath();\n                        ctx.moveTo(-arrowLength, arrowWidth);\n                        ctx.lineTo(0, 0);\n                        ctx.lineTo(-arrowLength, - arrowWidth);\n                        ctx.lineTo(-arrowLength * 0.8, - 0);\n                        ctx.closePath();\n                        ctx.fill();\n                        ctx.restore()\n                    }\n                })\n                \n                // draw the nodes & save their bounds for edge drawing\n                var nodeBoxes = {}\n                particleSystem.eachNode(function(node, pt) {\n                    // node: {mass:#, p:{x,y}, name:\"\", data:{}}\n                    // pt:   {x:#, y:#}  node position in screen coords\n\n                    // determine the box size and round off the coords if we'll be \n                    // drawing a text label (awful alignment jitter otherwise...)\n                    var label = node.data.label || \"\"\n                    var w = ctx.measureText(\"\" + label).width + 10\n                    if (!(\"\" + label).match(/^[ \\t]*$/)) {\n                        pt.x = Math.floor(pt.x)\n                        pt.y = Math.floor(pt.y)\n                    }\n                    else {\n                        label = null\n                    }\n\n                    // draw a rectangle centered at pt\n                    if (node.data.color) ctx.fillStyle = node.data.color\n                    else ctx.fillStyle = \"rgba(0,0,0,.2)\"\n                    if (node.data.color == 'none') ctx.fillStyle = \"white\"\n\n                    if (node.data.shape == 'dot') {\n                        gfx.oval(pt.x - w / 2, pt.y - w / 2, w, w, {\n                            fill: ctx.fillStyle\n                        })\n                        nodeBoxes[node.name] = [pt.x - w / 2, pt.y - w / 2, w, w]\n                    }\n                    else {\n                        gfx.rect(pt.x - w / 2, pt.y - 10, w, 20, 4, {\n                            fill: ctx.fillStyle\n                        })\n                        nodeBoxes[node.name] = [pt.x - w / 2, pt.y - 11, w, 22]\n                    }\n\n                    // draw the text\n                    if (label) {\n                        ctx.font = \"12px Helvetica\"\n                        ctx.textAlign = \"center\"\n                        ctx.fillStyle = \"white\"\n                        if (node.data.color == 'none') ctx.fillStyle = '#333333'\n                        ctx.fillText(label || \"\", pt.x, pt.y + 4)\n                        ctx.fillText(label || \"\", pt.x, pt.y + 4)\n                    }\n                })\n\n\n\n            },\n            initMouseHandling: function() {\n                // no-nonsense drag and drop (thanks springy.js)\n                selected = null;\n                nearest = null;\n                var dragged = null;\n                var oldmass = 1\n\n                // set up a handler object that will initially listen for mousedowns then\n                // for moves and mouseups while dragging\n                var handler = {\n                    clicked: function(e) {\n                        var pos = $(canvas).offset();\n                        _mouseP = arbor.Point(e.pageX - pos.left, e.pageY - pos.top)\n                        selected = nearest = dragged = particleSystem.nearest(_mouseP);\n\n                        if (dragged.node !== null) dragged.node.fixed = true\n\n                        $(canvas).bind('mousemove', handler.dragged)\n                        $(window).bind('mouseup', handler.dropped)\n\n                        return false\n                    },\n                    dragged: function(e) {\n                        var old_nearest = nearest && nearest.node._id\n                        var pos = $(canvas).offset();\n                        var s = arbor.Point(e.pageX - pos.left, e.pageY - pos.top)\n\n                        if (!nearest) return\n                        if (dragged !== null && dragged.node !== null) {\n                            var p = particleSystem.fromScreen(s)\n                            dragged.node.p = p\n                        }\n\n                        return false\n                    },\n\n                    dropped: function(e) {\n                        if (dragged === null || dragged.node === undefined) return\n                        if (dragged.node !== null) dragged.node.fixed = false\n                        dragged.node.tempMass = 50\n                        dragged = null\n                        selected = null\n                        $(canvas).unbind('mousemove', handler.dragged)\n                        $(window).unbind('mouseup', handler.dropped)\n                        _mouseP = null\n                        return false\n                    }\n                }\n                $(canvas).mousedown(handler.clicked);\n\n            }\n\n        }\n\n        // helpers for figuring out where to draw arrows (thanks springy.js)\n        var intersect_line_line = function(p1, p2, p3, p4) {\n            var denom = ((p4.y - p3.y) * (p2.x - p1.x) - (p4.x - p3.x) * (p2.y - p1.y));\n            if (denom === 0) return false // lines are parallel\n            var ua = ((p4.x - p3.x) * (p1.y - p3.y) - (p4.y - p3.y) * (p1.x - p3.x)) / denom;\n            var ub = ((p2.x - p1.x) * (p1.y - p3.y) - (p2.y - p1.y) * (p1.x - p3.x)) / denom;\n\n            if (ua < 0 || ua > 1 || ub < 0 || ub > 1) return false\n            return arbor.Point(p1.x + ua * (p2.x - p1.x), p1.y + ua * (p2.y - p1.y));\n        }\n\n        var intersect_line_box = function(p1, p2, boxTuple) {\n            var p3 = {\n                x: boxTuple[0],\n                y: boxTuple[1]\n            },\n            w = boxTuple[2],\n                h = boxTuple[3]\n\n            var tl = {\n                x: p3.x,\n                y: p3.y\n            };\n            var tr = {\n                x: p3.x + w,\n                y: p3.y\n            };\n            var bl = {\n                x: p3.x,\n                y: p3.y + h\n            };\n            var br = {\n                x: p3.x + w,\n                y: p3.y + h\n            };\n\n            return intersect_line_line(p1, p2, tl, tr) || intersect_line_line(p1, p2, tr, br) || intersect_line_line(p1, p2, br, bl) || intersect_line_line(p1, p2, bl, tl) || false\n        }\n\n        return that\n    }\n"],[0,"\n})("]],"start1":7,"start2":7,"length1":7219,"length2":8960}]],"length":8968,"saved":false}
{"ts":1364377391889,"patch":[[{"diffs":[[0,"                "],[1," "],[0,"\n               "]],"start1":665,"start2":665,"length1":32,"length2":33},{"diffs":[[0,"                "],[1,"// draw the nodes & save their bounds for edge drawing\n                var nodeBoxes = {}\n                particleSystem.eachNode(function(node, pt) {\n                    // node: {mass:#, p:{x,y}, name:\"\", data:{}}\n                    // pt:   {x:#, y:#}  node position in screen coords\n\n                    // determine the box size and round off the coords if we'll be \n                    // drawing a text label (awful alignment jitter otherwise...)\n                    var label = node.data.label || \"\"\n                    var w = ctx.measureText(\"\" + label).width + 10\n                    if (!(\"\" + label).match(/^[ \\t]*$/)) {\n                        pt.x = Math.floor(pt.x)\n                        pt.y = Math.floor(pt.y)\n                    }\n                    else {\n                        label = null\n                    }\n\n                    // draw a rectangle centered at pt\n                    if (node.data.color) ctx.fillStyle = node.data.color\n                    else ctx.fillStyle = \"rgba(0,0,0,.2)\"\n                    if (node.data.color == 'none') ctx.fillStyle = \"white\"\n\n                    if (node.data.shape == 'dot') {\n                        gfx.oval(pt.x - w / 2, pt.y - w / 2, w, w, {\n                            fill: ctx.fillStyle\n                        })\n                        nodeBoxes[node.name] = [pt.x - w / 2, pt.y - w / 2, w, w]\n                    }\n                    else {\n                        gfx.rect(pt.x - w / 2, pt.y - 10, w, 20, 4, {\n                            fill: ctx.fillStyle\n                        })\n                        nodeBoxes[node.name] = [pt.x - w / 2, pt.y - 11, w, 22]\n                    }\n\n                    // draw the text\n                    if (label) {\n                        ctx.font = \"12px Helvetica\"\n                        ctx.textAlign = \"center\"\n                        ctx.fillStyle = \"white\"\n                        if (node.data.color == 'none') ctx.fillStyle = '#333333'\n                        ctx.fillText(label || \"\", pt.x, pt.y + 4)\n                        ctx.fillText(label || \"\", pt.x, pt.y + 4)\n                    }\n                })\n\n\n"],[0,"                "]],"start1":683,"start2":683,"length1":32,"length2":2184},{"diffs":[[0," })\n"],[-1,"                \n                // draw the nodes & save their bounds for edge drawing\n                var nodeBoxes = {}\n                particleSystem.eachNode(function(node, pt) {\n                    // node: {mass:#, p:{x,y}, name:\"\", data:{}}\n                    // pt:   {x:#, y:#}  node position in screen coords\n\n                    // determine the box size and round off the coords if we'll be \n                    // drawing a text label (awful alignment jitter otherwise...)\n                    var label = node.data.label || \"\"\n                    var w = ctx.measureText(\"\" + label).width + 10\n                    if (!(\"\" + label).match(/^[ \\t]*$/)) {\n                        pt.x = Math.floor(pt.x)\n                        pt.y = Math.floor(pt.y)\n                    }\n                    else {\n                        label = null\n                    }\n\n                    // draw a rectangle centered at pt\n                    if (node.data.color) ctx.fillStyle = node.data.color\n                    else ctx.fillStyle = \"rgba(0,0,0,.2)\"\n                    if (node.data.color == 'none') ctx.fillStyle = \"white\"\n\n                    if (node.data.shape == 'dot') {\n                        gfx.oval(pt.x - w / 2, pt.y - w / 2, w, w, {\n                            fill: ctx.fillStyle\n                        })\n                        nodeBoxes[node.name] = [pt.x - w / 2, pt.y - w / 2, w, w]\n                    }\n                    else {\n                        gfx.rect(pt.x - w / 2, pt.y - 10, w, 20, 4, {\n                            fill: ctx.fillStyle\n                        })\n                        nodeBoxes[node.name] = [pt.x - w / 2, pt.y - 11, w, 22]\n                    }\n\n                    // draw the text\n                    if (label) {\n                        ctx.font = \"12px Helvetica\"\n                        ctx.textAlign = \"center\"\n                        ctx.fillStyle = \"white\"\n                        if (node.data.color == 'none') ctx.fillStyle = '#333333'\n                        ctx.fillText(label || \"\", pt.x, pt.y + 4)\n                        ctx.fillText(label || \"\", pt.x, pt.y + 4)\n                    }\n                })\n"],[0,"\n\n\n "]],"start1":5251,"start2":5251,"length1":2191,"length2":8}]],"length":8938,"saved":false}
{"ts":1364378365813,"patch":[[{"diffs":[[0,"licked);"],[1,"\n                \n                \n                \n                "],[0,"\n\n      "]],"start1":7445,"start2":7445,"length1":16,"length2":84}]],"length":9006,"saved":false}
{"ts":1364379630624,"patch":[[{"diffs":[[0,"              }\n"],[1,"                    \n                    if(edge.data.name){\n                        ctx.strokeStyle = \"rgba(0,0,0, .333)\";\n                        ctx.lineWidth = 1;\n                        ctx.beginPath ();\n                        ctx.moveTo (pt1.x, pt1.y);\n                        ctx.lineTo (pt2.x, pt2.y);\n                        ctx.stroke ();\n                \n                        ctx.fillStyle = \"black\";\n                        ctx.font = 'italic 13px sans-serif';\n                        ctx.fillText (edge.data.name, (pt1.x + pt2.x) / 2, (pt1.y + pt2.y) / 2);\n                    }\n"],[0,"                "]],"start1":5220,"start2":5220,"length1":32,"length2":628},{"diffs":[[0,"               \n"],[1,"               initMouseHandling: function() {\n                // no-nonsense drag and drop (thanks springy.js)\n                selected = null;\n                nearest = null;\n                var dragged = null;\n                var oldmass = 1\n\n                // set up a handler object that will initially listen for mousedowns then\n                // for moves and mouseups while dragging\n                var handler = {\n                    clicked: function(e) {\n                        var pos = $(canvas).offset();\n                        _mouseP = arbor.Point(e.pageX - pos.left, e.pageY - pos.top)\n                        selected = nearest = dragged = particleSystem.nearest(_mouseP);\n\n                        if (dragged.node !== null) dragged.node.fixed = true\n\n                        $(canvas).bind('mousemove', handler.dragged)\n                        $(window).bind('mouseup', handler.dropped)\n\n                        return false\n                    },\n                    dragged: function(e) {\n                        var old_nearest = nearest && nearest.node._id\n                        var pos = $(canvas).offset();\n                        var s = arbor.Point(e.pageX - pos.left, e.pageY - pos.top)\n\n                        if (!nearest) return\n                        if (dragged !== null && dragged.node !== null) {\n                            var p = particleSystem.fromScreen(s)\n                            dragged.node.p = p\n                        }\n\n                        return false\n                    },\n\n                    dropped: function(e) {\n                        if (dragged === null || dragged.node === undefined) return\n                        if (dragged.node !== null) dragged.node.fixed = false\n                        dragged.node.tempMass = 50\n                        dragged = null\n                        selected = null\n                        $(canvas).unbind('mousemove', handler.dragged)\n                        $(window).unbind('mouseup', handler.dropped)\n                        _mouseP = null\n                        return false\n                    }\n                }\n                $(canvas).mousedown(handler.clicked); \n                \n"],[0,"                "]],"start1":8051,"start2":8051,"length1":32,"length2":2234}]],"length":11804,"saved":false}
{"ts":1364379666634,"patch":[[{"diffs":[[0,"tx.fillStyle = \""],[-1,"white"],[1,"#ddd"],[0,"\"\n              "]],"start1":2572,"start2":2572,"length1":37,"length2":36}]],"length":11803,"saved":false}
{"ts":1364379695929,"patch":[[{"diffs":[[0,"ic 1"],[-1,"3px sans-serif"],[1,"2px Helvetica"],[0,"';\n "]],"start1":5691,"start2":5691,"length1":22,"length2":21}]],"length":11802,"saved":false}
{"ts":1364379711155,"patch":[[{"diffs":[[0," = \""],[-1,"black"],[1,"#333"],[0,"\";\n "]],"start1":5639,"start2":5639,"length1":13,"length2":12}]],"length":11801,"saved":false}
{"ts":1364379715893,"patch":[[{"diffs":[[0," = \"#333"],[1,"333"],[0,"\";\n     "]],"start1":5639,"start2":5639,"length1":16,"length2":19}]],"length":11804,"saved":false}
{"ts":1364379752483,"patch":[[{"diffs":[[0,"e){\n"],[-1,"                        ctx.strokeStyle = \"rgba(0,0,0, .333)\";\n                        ctx.lineWidth = 1;\n                        ctx.beginPath ();\n                        ctx.moveTo (pt1.x, pt1.y);\n                        ctx.lineTo (pt2.x, pt2.y);\n                        ctx.stroke ();\n                \n"],[0,"    "]],"start1":5292,"start2":5292,"length1":314,"length2":8}]],"length":11498,"saved":false}
{"ts":1364379775518,"patch":[[{"diffs":[[0," = \"#ddd"],[1,"ddd"],[0,"\"\n      "]],"start1":2584,"start2":2584,"length1":16,"length2":19}]],"length":11501,"saved":false}
{"ts":1364379889484,"patch":[[{"diffs":[[0,"d);\n"],[-1,"                \n               initMouseHandling: function() {\n                // no-nonsense drag and drop (thanks springy.js)\n                selected = null;\n                nearest = null;\n                var dragged = null;\n                var oldmass = 1\n\n                // set up a handler object that will initially listen for mousedowns then\n                // for moves and mouseups while dragging\n                var handler = {\n                    clicked: function(e) {\n                        var pos = $(canvas).offset();\n                        _mouseP = arbor.Point(e.pageX - pos.left, e.pageY - pos.top)\n                        selected = nearest = dragged = particleSystem.nearest(_mouseP);\n\n                        if (dragged.node !== null) dragged.node.fixed = true\n\n                        $(canvas).bind('mousemove', handler.dragged)\n                        $(window).bind('mouseup', handler.dropped)\n\n                        return false\n                    },\n                    dragged: function(e) {\n                        var old_nearest = nearest && nearest.node._id\n                        var pos = $(canvas).offset();\n                        var s = arbor.Point(e.pageX - pos.left, e.pageY - pos.top)\n\n                        if (!nearest) return\n                        if (dragged !== null && dragged.node !== null) {\n                            var p = particleSystem.fromScreen(s)\n                            dragged.node.p = p\n                        }\n\n                        return false\n                    },\n\n                    dropped: function(e) {\n                        if (dragged === null || dragged.node === undefined) return\n                        if (dragged.node !== null) dragged.node.fixed = false\n                        dragged.node.tempMass = 50\n                        dragged = null\n                        selected = null\n                        $(canvas).unbind('mousemove', handler.dragged)\n                        $(window).unbind('mouseup', handler.dropped)\n                        _mouseP = null\n                        return false\n                    }\n                }\n                $(canvas).mousedown(handler.clicked); \n                \n                \n                \n                \n\n"],[0,"    "]],"start1":7743,"start2":7743,"length1":2279,"length2":8}]],"length":9230,"saved":false}
{"ts":1364379899488,"patch":[[{"diffs":[[0,"     })\n"],[-1,"\n\n\n"],[0,"        "]],"start1":5540,"start2":5540,"length1":19,"length2":16}]],"length":9227,"saved":false}
{"ts":1364380008533,"patch":[[{"diffs":[[0,"= \"#"],[-1,"dddddd"],[1,"eeeeee"],[0,"\"\n  "]],"start1":2585,"start2":2585,"length1":14,"length2":14},{"diffs":[[0,"italic 1"],[-1,"2"],[1,"1"],[0,"px Helve"]],"start1":5386,"start2":5386,"length1":17,"length2":17}]],"length":9227,"saved":false}
{"ts":1364381393688,"patch":[[{"diffs":[[0,"tyle = \""],[-1,"white"],[1,"#333333"],[0,"\"\n      "]],"start1":586,"start2":586,"length1":21,"length2":23}]],"length":9229,"saved":false}
{"ts":1364381422116,"patch":[[{"diffs":[[0," = \""],[-1,"#eeeee"],[1,"whit"],[0,"e\"\n "]],"start1":2586,"start2":2586,"length1":14,"length2":12}]],"length":9227,"saved":false}
{"ts":1364381465013,"patch":[[{"diffs":[[0,"yle = \"#"],[-1,"333333"],[1,"555555"],[0,"\"\n      "]],"start1":587,"start2":587,"length1":22,"length2":22}]],"length":9227,"saved":false}
{"ts":1364381478585,"patch":[[{"diffs":[[0,"= \"#"],[-1,"555555"],[1,"888888"],[0,"\"\n  "]],"start1":591,"start2":591,"length1":14,"length2":14}]],"length":9227,"saved":false}
{"ts":1364381504101,"patch":[[{"diffs":[[0," = \""],[-1,"#888888"],[1,"white"],[0,"\"\n  "]],"start1":590,"start2":590,"length1":15,"length2":13}]],"length":9225,"saved":false}
{"ts":1364381537088,"patch":[[{"diffs":[[0,"or) ? color : \"#"],[-1,"cccccc"],[1,"333333"],[0,"\"\n              "]],"start1":3766,"start2":3766,"length1":38,"length2":38},{"diffs":[[0,": \"#"],[-1,"cccccc"],[1,"333333"],[0,"\"\n  "]],"start1":4447,"start2":4447,"length1":14,"length2":14}]],"length":9225,"saved":false}
{"ts":1364381550291,"patch":[[{"diffs":[[0,"or) ? color : \"#"],[-1,"333333"],[1,"aaaaaa"],[0,"\"\n              "]],"start1":3766,"start2":3766,"length1":38,"length2":38}]],"length":9225,"saved":false}
{"contributors":[],"silentsave":false,"ts":1364414281807,"patch":[[{"diffs":[[0,"mass = 1"],[1,";"],[0,"\n\n      "]],"start1":5794,"start2":5794,"length1":16,"length2":17},{"diffs":[[0,"mouseP);"],[1,"\n                        \n                        alert(selected.data.name);"],[0,"\n\n      "]],"start1":6245,"start2":6245,"length1":16,"length2":92}]],"length":9302,"saved":false}
{"ts":1364414406914,"patch":[[{"diffs":[[0,"elected."],[-1,"data"],[1,"node"],[0,".name);\n"]],"start1":6310,"start2":6310,"length1":20,"length2":20}]],"length":9302,"saved":false}
{"ts":1364415726119,"patch":[[{"diffs":[[0,"                "],[-1," "],[0,"ctx.fillStyle = "]],"start1":560,"start2":560,"length1":33,"length2":32},{"diffs":[[0,"                "],[-1," "],[0,"ctx.fillRect(0,0"]],"start1":600,"start2":600,"length1":33,"length2":32},{"diffs":[[0,"lRect(0,"],[1," "],[0,"0, canva"]],"start1":623,"start2":623,"length1":16,"length2":17},{"diffs":[[0,"height)\n"],[-1,"                 "],[0,"\n       "]],"start1":656,"start2":656,"length1":33,"length2":16},{"diffs":[[0,"      }\n"],[-1,"                    "],[0,"\n       "]],"start1":5210,"start2":5210,"length1":36,"length2":16},{"diffs":[[0,"      if"],[1," "],[0,"(edge.da"]],"start1":5233,"start2":5233,"length1":16,"length2":17},{"diffs":[[0,"ta.name)"],[1," "],[0,"{\n      "]],"start1":5250,"start2":5250,"length1":16,"length2":17},{"diffs":[[0,"fillText"],[-1," "],[0,"(edge.da"]],"start1":5400,"start2":5400,"length1":17,"length2":16},{"diffs":[[0,") {\n"],[-1,"                // no-nonsense drag and drop (thanks springy.js)\n"],[0,"    "]],"start1":5564,"start2":5564,"length1":73,"length2":8},{"diffs":[[0,"1;\n\n"],[-1,"                // set up a handler object that will initially listen for mousedowns then\n                // for moves and mouseups while dragging"],[0,"\n"],[1,""],[0,"    "]],"start1":5699,"start2":5699,"length1":155,"length2":9},{"diffs":[[0,"eP);"],[-1,"\n                        \n                        alert(selected.node.name);"],[0,"\n\n  "]],"start1":6001,"start2":6001,"length1":84,"length2":8},{"diffs":[[0,"ropped)\n"],[1,"                        that.customNodeClick.printCourse(that.customNodeClick.courses[selected.node.name], that.customNodeClick.element);"],[0,"\n       "]],"start1":6213,"start2":6213,"length1":16,"length2":153}]],"length":9115,"saved":false}
{"ts":1364415923876,"patch":[[{"diffs":[[0,"ick."],[-1,"printCourse"],[1,"updateCourseSelected"],[0,"(tha"]],"start1":6262,"start2":6262,"length1":19,"length2":28},{"diffs":[[0,"ame]"],[-1,", that.customNodeClick.element"],[0,");\n "]],"start1":6331,"start2":6331,"length1":38,"length2":8}]],"length":9094,"saved":false}
{"ts":1364416124485,"patch":[[{"diffs":[[0,"ont = \"1"],[-1,"2"],[1,"5"],[0,"px Helve"]],"start1":2457,"start2":2457,"length1":17,"length2":17}]],"length":9094,"saved":false}
{"ts":1364419619600,"patch":[[{"diffs":[[0,"ss = 1;\n"],[-1,"\n\n"],[0,"        "]],"start1":5694,"start2":5694,"length1":18,"length2":16},{"diffs":[[0,"handler = {\n"],[1,"                    moved: function(e) {\n                        var pos = $(canvas).offset();\n                        _mouseP = arbor.Point(e.pageX - pos.left, e.pageY - pos.top)\n                        nearest = sys.nearest(_mouseP);\n\n                        if (!nearest.node){\n                            $('canvas').css( 'cursor', 'default' );\n                            return false\n                        }else{\n                            $('canvas').css( 'cursor', 'pointer' );\n                        }\n                    },\n"],[0,"            "]],"start1":5722,"start2":5722,"length1":24,"length2":562}]],"length":9630,"saved":false}
{"ts":1364419671095,"patch":[[{"diffs":[[0,"icked);\n"],[1,"                $(canvas).mousemove(handler.moved);\n"],[0,"        "]],"start1":8139,"start2":8139,"length1":16,"length2":68}]],"length":9682,"saved":false}
{"ts":1364419695624,"patch":[[{"diffs":[[0,"             },\n"],[-1,"\n"],[0,"                "]],"start1":7486,"start2":7486,"length1":33,"length2":32}]],"length":9681,"saved":false}
{"ts":1364419781973,"patch":[[{"diffs":[[0,"arest = "],[-1,"sys"],[1,"particleSystem"],[0,".nearest"]],"start1":5940,"start2":5940,"length1":19,"length2":30}]],"length":9692,"saved":false}
{"ts":1364419946246,"patch":[[{"diffs":[[0,"if ("],[-1,"!"],[0,"nearest."],[-1,"node"],[1,"distance < 20"],[0,"){\n "]],"start1":6006,"start2":6006,"length1":21,"length2":29}]],"length":9700,"saved":false}
{"ts":1364419995893,"patch":[[{"diffs":[[0,"istance "],[-1,"<"],[1,">"],[0," 20){\n  "]],"start1":6019,"start2":6019,"length1":17,"length2":17}]],"length":9700,"saved":false}
{"ts":1364420762045,"patch":[[{"diffs":[[0,"ont = \"1"],[-1,"5"],[1,"2"],[0,"px Helve"]],"start1":2457,"start2":2457,"length1":17,"length2":17}]],"length":9700,"saved":false}
{"ts":1364421637704,"patch":[[{"diffs":[[0,"ont = \"1"],[-1,"2"],[1,"0"],[0,"px Helve"]],"start1":2457,"start2":2457,"length1":17,"length2":17}]],"length":9700,"saved":false}
{"ts":1364422994363,"patch":[[{"diffs":[[0,"tx.fillStyle = \""],[-1,"white"],[1,"#EFEFEF"],[0,"\"\n              "]],"start1":577,"start2":577,"length1":37,"length2":39}]],"length":9702,"saved":false}
{"ts":1364423173557,"patch":[[{"diffs":[[0,"ick."],[-1,"updateCourseSelected"],[1,"setCourse"],[0,"(tha"]],"start1":6819,"start2":6819,"length1":28,"length2":17}]],"length":9691,"saved":false}
{"contributors":["garrettsmith@live.ca"],"silentsave":false,"ts":1364423590224,"patch":[[{"diffs":[[0,"rse("],[-1,"that.customNodeClick.courses["],[0,"sele"]],"start1":6829,"start2":6829,"length1":37,"length2":8},{"diffs":[[0,"ode.name"],[-1,"]"],[0,");\n     "]],"start1":6843,"start2":6843,"length1":17,"length2":16}]],"length":9661,"saved":false}
{"contributors":["jamesmackay10011@gmail.com"],"silentsave":false,"ts":1364424510004,"patch":[[{"diffs":[[0,"arest(_mouseP);\n"],[1,"                        if(selected !== null){\n                            that.customNodeClick.setCourse(selected.node.name);\n\n                        }"],[0,"\n               "]],"start1":6547,"start2":6547,"length1":32,"length2":185}]],"length":9814,"saved":false}
{"ts":1364424517056,"patch":[[{"diffs":[[0,".name);\n"],[-1,"\n"],[0,"        "]],"start1":6682,"start2":6682,"length1":17,"length2":16},{"diffs":[[0,"ed)\n"],[-1,"                        that.customNodeClick.setCourse(selected.node.name);\n"],[0,"    "]],"start1":6926,"start2":6926,"length1":84,"length2":8}]],"length":9737,"saved":false}
{"contributors":["jamesmackay10011@gmail.com"],"silentsave":false,"ts":1364424627391,"patch":[[{"diffs":[[0,"              }\n"],[1,"                        /*\n"],[0,"                "]],"start1":6700,"start2":6700,"length1":32,"length2":59},{"diffs":[[0,"    "],[-1,"return false\n                    }"],[1,"*/\n                        \n                        return false\n                    }\n                    /*\n                    "],[0,",\n  "]],"start1":6977,"start2":6977,"length1":42,"length2":138},{"diffs":[[0,"              }\n"],[1,"                    \n                    */\n"],[0,"                "]],"start1":8237,"start2":8237,"length1":32,"length2":76}]],"length":9904,"saved":false}
{"ts":1364425062763,"patch":[[{"diffs":[[0,"    if ("],[1,"neared.node.data.label !== \"OR\" && "],[0,"nearest."]],"start1":6004,"start2":6004,"length1":16,"length2":51},{"diffs":[[0,"!== null"],[1," && selected.node.data.label !== \"OR\""],[0,"){\n     "]],"start1":6634,"start2":6634,"length1":16,"length2":53}]],"length":9976,"saved":false}
{"ts":1364425202592,"patch":[[{"diffs":[[0,"if ("],[-1,"neared.node.data.label !== \"OR\" && "],[0,"near"]],"start1":6008,"start2":6008,"length1":43,"length2":8}]],"length":9941,"saved":false}
{"ts":1364425255724,"patch":[[{"diffs":[[0,"    if ("],[1,"neared.node.data.label !== \"OR\" && "],[0,"nearest."]],"start1":6004,"start2":6004,"length1":16,"length2":51},{"diffs":[[0,"istance "],[-1,">"],[1,"<"],[0," 20){\n  "]],"start1":6056,"start2":6056,"length1":17,"length2":17},{"diffs":[[0,"', '"],[-1,"default"],[1,"pointer"],[0,"' );"]],"start1":6123,"start2":6123,"length1":15,"length2":15},{"diffs":[[0,"    return false"],[1,";"],[0,"\n               "]],"start1":6163,"start2":6163,"length1":32,"length2":33},{"diffs":[[0," 'cursor', '"],[-1,"pointer' )"],[1,"default' );\n                            return false"],[0,";\n          "]],"start1":6256,"start2":6256,"length1":34,"length2":76}]],"length":10019,"saved":false}
{"ts":1364425297281,"patch":[[{"diffs":[[0,"f (neare"],[-1,"d"],[1,"st"],[0,".node.da"]],"start1":6009,"start2":6009,"length1":17,"length2":18}]],"length":10020,"saved":false}
{"ts":1364425419359,"patch":[[{"diffs":[[0,"selected"],[-1," !== null"],[1,".distance < 20"],[0," && sele"]],"start1":6669,"start2":6669,"length1":25,"length2":30}]],"length":10025,"saved":false}
{"ts":1364425438004,"patch":[[{"diffs":[[0,"ted."],[-1,"distance < 20 && selected.node.data.label !== \"OR\""],[1,"node.data.label !== \"OR\" && selected.distance < 20 "],[0,"){\n "]],"start1":6674,"start2":6674,"length1":58,"length2":59}]],"length":10026,"saved":false}
{"contributors":[],"silentsave":false,"ts":1364438298973,"patch":[[{"diffs":[[0,"t)\n\n"],[-1,"                // draw the nodes & save their bounds for edge drawing\n"],[0,"    "]],"start1":663,"start2":663,"length1":79,"length2":8},{"diffs":[[0,"es = {}\n"],[1,""],[0,"        "]],"start1":694,"start2":694,"length1":16,"length2":16},{"diffs":[[0,"ds\n\n"],[-1,"                    // determine the box size and round off the coords if we'll be \n                    // drawing a text label (awful alignment jitter otherwise...)"],[0,"\n"],[1,""],[0,"    "]],"start1":897,"start2":897,"length1":174,"length2":9},{"diffs":[[0,"a.color)"],[1,"{ \n                       "],[0," ctx.fil"]],"start1":1374,"start2":1374,"length1":16,"length2":42},{"diffs":[[0,"ta.color"],[1,";"],[0,"\n       "]],"start1":1432,"start2":1432,"length1":16,"length2":17},{"diffs":[[0,"            "],[1,"}"],[0,"else ctx.fil"]],"start1":1450,"start2":1450,"length1":24,"length2":25},{"diffs":[[0,".2)\""],[-1,"\n                    if (node.data.color == 'none') ctx.fillStyle = \"white\""],[0,"\n\n  "]],"start1":1496,"start2":1496,"length1":83,"length2":8}]],"length":9743,"saved":false}
{"contributors":[],"silentsave":false,"ts":1364438432166,"patch":[[{"diffs":[[0,"            "],[-1,""],[0,""],[1,"var nodeBoxes = {};\n                "],[0,"if (!particl"]],"start1":519,"start2":519,"length1":24,"length2":60},{"diffs":[[0,"t)\n\n"],[-1,"                var nodeBoxes = {}\n                particleSystem.eachNode(function(node, pt) {\n"],[0,"    "]],"start1":699,"start2":699,"length1":104,"length2":8},{"diffs":[[0," coords\n"],[1,"                    particleSystem.eachNode(function(node, pt) {\n"],[0,"\n\n      "]],"start1":832,"start2":832,"length1":16,"length2":81},{"diffs":[[0,"el || \"\""],[1,";"],[0,"\n       "]],"start1":952,"start2":952,"length1":16,"length2":17},{"diffs":[[0,"dth + 10"],[1,";"],[0,"\n       "]],"start1":1020,"start2":1020,"length1":16,"length2":17},{"diffs":[[0,"or(pt.x)"],[1,";"],[0,"\n       "]],"start1":1128,"start2":1128,"length1":16,"length2":17},{"diffs":[[0,"or(pt.y)"],[1,";"],[0,"\n       "]],"start1":1177,"start2":1177,"length1":16,"length2":17},{"diffs":[[0,"label = null"],[1,";"],[0,"\n           "]],"start1":1260,"start2":1260,"length1":24,"length2":25},{"diffs":[[0," }\n\n"],[-1,"                    // draw a rectangle centered at pt\n"],[0,"    "]],"start1":1293,"start2":1293,"length1":63,"length2":8},{"diffs":[[0,"   }else"],[1,"{\n                       "],[0," ctx.fil"]],"start1":1414,"start2":1414,"length1":16,"length2":41},{"diffs":[[0,"0,0,.2)\""],[1,";\n                    } "],[0,"\n\n      "]],"start1":1472,"start2":1472,"length1":16,"length2":40}]],"length":9747,"saved":false}
{"ts":1364438455307,"patch":[[{"diffs":[[0,"    "],[-1,"var nodeBoxes = {};\n                if (!particleSystem) return"],[1,"if (!particleSystem){\n                    return;    \n                } \n                var nodeBoxes = {};"],[0,"\n\n  "]],"start1":527,"start2":527,"length1":71,"length2":116}]],"length":9792,"saved":false}
{"ts":1364438661924,"patch":[[{"diffs":[[0,").get(0)"],[-1,""],[0,""],[1,";"],[0,"\n       "]],"start1":78,"start2":78,"length1":16,"length2":17},{"diffs":[[0,"(canvas)"],[1,";"],[0,"\n       "]],"start1":163,"start2":163,"length1":16,"length2":17},{"diffs":[[0,"ystem = null"],[1,";"],[0,"\n\n        va"]],"start1":194,"start2":194,"length1":24,"length2":25},{"diffs":[[0,"= system"],[1,";"],[0,"\n       "]],"start1":298,"start2":298,"length1":16,"length2":17},{"diffs":[[0,".height)"],[1,";"],[0,"\n       "]],"start1":370,"start2":370,"length1":16,"length2":17},{"diffs":[[0,"ding(40)"],[1,";"],[0,"\n\n      "]],"start1":420,"start2":420,"length1":16,"length2":17},{"diffs":[[0,"ndling()"],[1,";"],[0,"\n       "]],"start1":463,"start2":463,"length1":16,"length2":17},{"diffs":[[0,"#EFEFEF\""],[1,";"],[0,"\n       "]],"start1":681,"start2":681,"length1":16,"length2":17},{"diffs":[[0,".height)"],[1,";"],[0,"\n\n      "]],"start1":746,"start2":746,"length1":16,"length2":17},{"diffs":[[0,", pt) {\n"],[-1,"\n\n"],[1,"    "],[0,"        "]],"start1":951,"start2":951,"length1":18,"length2":20},{"diffs":[[0,"    var "],[1,"label,w;\n                        \n\n                    "],[0,"label = "]],"start1":979,"start2":979,"length1":16,"length2":71},{"diffs":[[0,"        "],[-1,"var "],[0,"w = ctx."]],"start1":1085,"start2":1085,"length1":20,"length2":16},{"diffs":[[0,"h + 10;\n"],[1,"                    \n"],[0,"        "]],"start1":1129,"start2":1129,"length1":16,"length2":37},{"diffs":[[0,"              })"],[1,";"],[0,"\n               "]],"start1":1813,"start2":1813,"length1":32,"length2":33},{"diffs":[[0,"2, w, w]"],[1,";"],[0,"\n       "]],"start1":1904,"start2":1904,"length1":16,"length2":17},{"diffs":[[0,"       }"],[-1,"\n                    "],[0,"else {\n "]],"start1":1927,"start2":1927,"length1":37,"length2":16},{"diffs":[[0,"              })"],[1,";"],[0,"\n               "]],"start1":2070,"start2":2070,"length1":32,"length2":33},{"diffs":[[0,", w, 22]"],[1,";"],[0,"\n       "]],"start1":2159,"start2":2159,"length1":16,"length2":17},{"diffs":[[0," }\n\n"],[-1,"                    // draw the text\n"],[0,"    "]],"start1":2188,"start2":2188,"length1":45,"length2":8},{"diffs":[[0,"lvetica\""],[1,";"],[0,"\n       "]],"start1":2268,"start2":2268,"length1":16,"length2":17},{"diffs":[[0,"\"center\""],[1,";"],[0,"\n       "]],"start1":2318,"start2":2318,"length1":16,"length2":17},{"diffs":[[0," \"white\""],[1,";"],[0,"\n       "]],"start1":2367,"start2":2367,"length1":16,"length2":17},{"diffs":[[0,"ne')"],[-1," ctx.fillStyle = '#333333'"],[1,"{\n                            ctx.fillStyle = '#333333';\n                        } "],[0,"\n   "]],"start1":2427,"start2":2427,"length1":34,"length2":91},{"diffs":[[0," pt.x, pt.y + 4)"],[1,";"],[0,"\n               "]],"start1":2564,"start2":2564,"length1":32,"length2":33},{"diffs":[[0,"t.y + 4)"],[1,";"],[0,"\n       "]],"start1":2639,"start2":2639,"length1":16,"length2":17},{"diffs":[[0,"      })"],[-1,""],[0,""],[1,";"],[0,"\n\n\n     "]],"start1":2681,"start2":2681,"length1":16,"length2":17}]],"length":9884,"saved":false}
{"ts":1364438739119,"patch":[[{"diffs":[[0,");\n\n"],[-1,"\n                // draw the edges\n                particleSystem.eachEdge(function(edge, pt1, pt2) {\n    "],[0,"    "]],"start1":2688,"start2":2688,"length1":114,"length2":8},{"diffs":[[0,"gth:#, data:{}}\n"],[-1,"    "],[0,"                "]],"start1":2747,"start2":2747,"length1":36,"length2":32},{"diffs":[[0,"n screen coords\n"],[-1,"    "],[0,"                "]],"start1":2817,"start2":2817,"length1":36,"length2":32},{"diffs":[[0," coords\n"],[1,"                particleSystem.eachEdge(function(edge, pt1, pt2) {\n                    var weight, color, tail, head;\n                    "],[0,"\n       "]],"start1":2895,"start2":2895,"length1":16,"length2":154},{"diffs":[[0,"            "],[-1," var"],[0," weight = ed"]],"start1":3049,"start2":3049,"length1":28,"length2":24},{"diffs":[[0,"        "],[-1,"var "],[0,"color = "]],"start1":3100,"start2":3100,"length1":20,"length2":16},{"diffs":[[0,"$/))"],[-1," color = null"],[1,"{\n                        color = null  \n                    } "],[0,"\n\n  "]],"start1":3194,"start2":3194,"length1":21,"length2":71}]],"length":9950,"saved":false}
{"ts":1364438815953,"patch":[[{"diffs":[[0,"a.weight"],[1,";"],[0,"\n       "]],"start1":3079,"start2":3079,"length1":16,"length2":17},{"diffs":[[0,"ta.color"],[1,";"],[0,"\n\n      "]],"start1":3124,"start2":3124,"length1":16,"length2":17},{"diffs":[[0," = null "],[1,";"],[0," \n      "]],"start1":3231,"start2":3231,"length1":16,"length2":17},{"diffs":[[0,"    "],[-1,"// find the start point\n                    var "],[0,"tail"]],"start1":3282,"start2":3282,"length1":56,"length2":8},{"diffs":[[0,"e.name])"],[1,";"],[0,"\n       "]],"start1":3342,"start2":3342,"length1":16,"length2":17},{"diffs":[[0,"        "],[-1,"var "],[0,"head = i"]],"start1":3364,"start2":3364,"length1":20,"length2":16},{"diffs":[[0,"t.name])"],[1,";"],[0,"\n\n      "]],"start1":3429,"start2":3429,"length1":16,"length2":17},{"diffs":[[0,"      ctx.save()"],[1,";"],[0,"\n               "]],"start1":3454,"start2":3454,"length1":32,"length2":33},{"diffs":[[0,"inPath()"],[1,";"],[0,"\n       "]],"start1":3499,"start2":3499,"length1":16,"length2":17},{"diffs":[[0,"loat(weight) : 1"],[1,";"],[0,"\n               "]],"start1":3570,"start2":3570,"length1":32,"length2":33},{"diffs":[[0,"#aaaaaa\""],[1,";"],[0,"\n       "]],"start1":3645,"start2":3645,"length1":16,"length2":17},{"diffs":[[0,"e = null"],[1,";"],[0,"\n\n      "]],"start1":3687,"start2":3687,"length1":16,"length2":17},{"diffs":[[0," tail.y)"],[1,";"],[0,"\n       "]],"start1":3736,"start2":3736,"length1":16,"length2":17},{"diffs":[[0," head.y)"],[1,";"],[0,"\n       "]],"start1":3784,"start2":3784,"length1":16,"length2":17},{"diffs":[[0,"stroke()"],[1,";"],[0,"\n       "]],"start1":3818,"start2":3818,"length1":16,"length2":17},{"diffs":[[0,"estore()"],[1,";"],[0,"\n\n      "]],"start1":3853,"start2":3853,"length1":16,"length2":17},{"diffs":[[0,"  }\n"],[-1,"                    /*\n                    ,\n                    dragged: function(e) {\n                        var old_nearest = nearest && nearest.node._id\n                        var pos = $(canvas).offset();\n                        var s = arbor.Point(e.pageX - pos.left, e.pageY - pos.top)\n\n                        if (!nearest) return\n                        if (dragged !== null && dragged.node !== null) {\n                            var p = particleSystem.fromScreen(s)\n                            dragged.node.p = p\n                        }\n\n                        return false\n                    },\n                    dropped: function(e) {\n                        if (dragged === null || dragged.node === undefined) return\n                        if (dragged.node !== null) dragged.node.fixed = false\n                        dragged.node.tempMass = 50\n                        dragged = null\n                        selected = null\n                        $(canvas).unbind('mousemove', handler.dragged)\n                        $(window).unbind('mouseup', handler.dropped)\n                        _mouseP = null\n                        return false\n                    }\n                    \n                    */\n"],[0,"    "]],"start1":7072,"start2":7072,"length1":1237,"length2":8}]],"length":8683,"saved":false}
{"ts":1364438823708,"patch":[[{"diffs":[[0,"  }\n"],[-1,"                        /*\n                        if (dragged.node !== null) dragged.node.fixed = true\n\n                        $(canvas).bind('mousemove', handler.dragged)\n                        $(window).bind('mouseup', handler.dropped)\n                        */\n                        \n"],[0,"    "]],"start1":6720,"start2":6720,"length1":301,"length2":8}]],"length":8390,"saved":false}
{"ts":1364438838343,"patch":[[{"diffs":[[0,"    return false"],[1,";"],[0,"\n               "]],"start1":6744,"start2":6744,"length1":32,"length2":33},{"diffs":[[0,"               }"],[1,";"],[0,"\n               "]],"start1":6785,"start2":6785,"length1":32,"length2":33},{"diffs":[[0,";\n            }\n"],[-1,"\n"],[0,"        }\n\n     "]],"start1":6907,"start2":6907,"length1":33,"length2":32}]],"length":8391,"saved":false}
{"ts":1364439090354,"patch":[[{"diffs":[[0,"    "],[-1,"selected = null;\n                nearest = null;\n                var dragged = null;\n                var oldmass = 1;\n                var handler = {"],[1,"var handler = {\n                    moved: function(e) {\n                        var pos, mouseP, nearest;"],[0,"\n   "]],"start1":5468,"start2":5468,"length1":157,"length2":114},{"diffs":[[0,"        "],[-1,"moved: function(e) {"],[1,"    "],[0,"\n       "]],"start1":5591,"start2":5591,"length1":36,"length2":20},{"diffs":[[0,"                "],[-1,"var "],[0,"pos = $(canvas)."]],"start1":5612,"start2":5612,"length1":36,"length2":32},{"diffs":[[0,"                "],[-1,"_"],[0,"mouseP = arbor.P"]],"start1":5662,"start2":5662,"length1":33,"length2":32},{"diffs":[[0,"eSystem.nearest("],[-1,"_"],[0,"mouseP);\n\n      "]],"start1":5779,"start2":5779,"length1":33,"length2":32},{"diffs":[[0,"ouseP);\n"],[1,"                        "],[0,"\n       "]],"start1":5796,"start2":5796,"length1":16,"length2":40},{"diffs":[[0,"(nearest"],[1," && nearest"],[0,".node.da"]],"start1":5856,"start2":5856,"length1":16,"length2":27},{"diffs":[[0,"    var "],[1,"pos, mouseP, nearest;\n                        \n                        "],[0,"pos = $("]],"start1":6291,"start2":6291,"length1":16,"length2":87},{"diffs":[[0,"        "],[-1,"_"],[0,"mouseP ="]],"start1":6412,"start2":6412,"length1":17,"length2":16},{"diffs":[[0,"    "],[-1,"selected = nearest = dragged"],[1,"nearest"],[0," = p"]],"start1":6500,"start2":6500,"length1":36,"length2":15},{"diffs":[[0,"nearest("],[-1,"_"],[0,"mouseP);"]],"start1":6529,"start2":6529,"length1":17,"length2":16}]],"length":8409,"saved":false}
{"ts":1364439132147,"patch":[[{"diffs":[[0,"     if("],[-1,"selected"],[1," nearest&& nearest"],[0,".node.da"]],"start1":6565,"start2":6565,"length1":24,"length2":34},{"diffs":[[0,"\"OR\" && "],[-1,"selected"],[1,"nearest"],[0,".distanc"]],"start1":6612,"start2":6612,"length1":24,"length2":23},{"diffs":[[0,"rse("],[-1,"selected"],[1,"nearest"],[0,".nod"]],"start1":6700,"start2":6700,"length1":16,"length2":15}]],"length":8417,"saved":false}
{"ts":1364439201139,"patch":[[{"diffs":[[0,"1.y));\n        }"],[1,";"],[0,"\n\n        var in"]],"start1":7586,"start2":7586,"length1":32,"length2":33},{"diffs":[[0,"        "],[-1,"    "],[0,"h = boxT"]],"start1":7801,"start2":7801,"length1":20,"length2":16},{"diffs":[[0,"Tuple[3]"],[1,";"],[0,"\n\n      "]],"start1":7816,"start2":7816,"length1":16,"length2":17},{"diffs":[[0," false\n        }"],[1,";"],[0,"\n\n        return"]],"start1":8366,"start2":8366,"length1":32,"length2":33},{"diffs":[[0,"that"],[1,";"],[0,"\n    }"],[1,";"],[0,"\n\n})()"],[1,";"]],"start1":8400,"start2":8400,"length1":16,"length2":19}]],"length":8419,"saved":false}
{"contributors":[],"silentsave":false,"ts":1364603459860,"patch":[[{"diffs":[[0,"abel !== \"OR\" &&"],[1," nearest.node.data.label !== \"AND\" &&"],[0," nearest.distanc"]],"start1":5887,"start2":5887,"length1":32,"length2":69},{"diffs":[[0,"abel !== \"OR\" &&"],[1," nearest.node.data.label !== \"AND\" &&"],[0," nearest.distanc"]],"start1":6640,"start2":6640,"length1":32,"length2":69}]],"length":8493,"saved":false}
{"contributors":[],"silentsave":false,"ts":1364615132370,"patch":[[{"diffs":[[0,"0,0,"],[-1,".2)"],[1,"1"],[0,"\";\n "]],"start1":1600,"start2":1600,"length1":11,"length2":9}]],"length":8491,"saved":false}
{"contributors":[],"silentsave":false,"ts":1364620515419,"patch":[[{"diffs":[[0,"(0,0,0,1"],[1,")"],[0,"\";\n     "]],"start1":1597,"start2":1597,"length1":16,"length2":17}]],"length":8492,"saved":false}
{"ts":1364621145112,"patch":[[{"diffs":[[0,"    "],[-1,"ctx.fillStyle = node.data.color"],[1,"var c = node.data.color;\n                        var a = c.a? c.a : 1;\n                        ctx.fillStyle = \"rgba(\"+c.r+\",\"+c.g+\",+\"c.b+\",\"+a+\")\""],[0,";\n  "]],"start1":1488,"start2":1488,"length1":39,"length2":156}]],"length":8609,"saved":false}
{"ts":1364621464091,"patch":[[{"diffs":[[0,"\"+c.g+\","],[-1,"+"],[0,"\""],[1,"+"],[0,"c.b+\",\"+"]],"start1":1617,"start2":1617,"length1":18,"length2":18}]],"length":8609,"saved":false}
{"ts":1364622621258,"patch":[[{"diffs":[[0,"    "],[-1,"color = edge.data.color"],[1,"\n                    var rgb = edge.data.color;\n                    var a = rgb.a? rgb.a : 1;\n\n                    color = \"rgba(\"+rgb.r+\",\"+rgb.g+\",\"+rgb.b+\",\"+a+\")\""],[0,";\n\n "]],"start1":3221,"start2":3221,"length1":31,"length2":174}]],"length":8752,"saved":false}
{"ts":1364622625763,"patch":[[{"diffs":[[0,".a : 1;\n"],[-1,"\n"],[0,"        "]],"start1":3311,"start2":3311,"length1":17,"length2":16}]],"length":8751,"saved":false}
{"ts":1364623366103,"patch":[[{"diffs":[[0,"    "],[-1,"var rgb"],[1,"color"],[0," = e"]],"start1":3242,"start2":3242,"length1":15,"length2":13},{"diffs":[[0,"lor;"],[-1,"\n                    var a = rgb.a? rgb.a : 1;\n                    color = \"rgba(\"+rgb.r+\",\"+rgb.g+\",\"+rgb.b+\",\"+a+\")\";"],[0,"\n\n  "]],"start1":3266,"start2":3266,"length1":127,"length2":8}]],"length":8630,"saved":false}
{"ts":1364624499941,"patch":[[{"diffs":[[0,"pointer' );\n"],[1,"                            nearest.data.color.a = 255;\n"],[0,"            "]],"start1":6158,"start2":6158,"length1":24,"length2":80}]],"length":8686,"saved":false}
{"ts":1364624582184,"patch":[[{"diffs":[[0,"nearest."],[1,"node."],[0,"data.col"]],"start1":6198,"start2":6198,"length1":16,"length2":21}]],"length":8691,"saved":false}
{"ts":1364624878650,"patch":[[{"diffs":[[0,"pointer' );\n"],[1,"                            nearest.node.point.x++; \n"],[0,"            "]],"start1":6158,"start2":6158,"length1":24,"length2":77}]],"length":8744,"saved":false}
{"ts":1364624890185,"patch":[[{"diffs":[[0,"ode."],[-1,"point.x++; "],[1,"data.color.a = 255;"],[0,"\n   "]],"start1":6207,"start2":6207,"length1":19,"length2":27},{"diffs":[[0,"st.node."],[-1,"data.color.a = 255;"],[1,"point.x++; "],[0,"\n       "]],"start1":6264,"start2":6264,"length1":35,"length2":27}]],"length":8744,"saved":false}
{"ts":1364625018419,"patch":[[{"diffs":[[0,"st.node."],[1,"_"],[0,"p"],[-1,"oint"],[0,".x++; \n "]],"start1":6264,"start2":6264,"length1":21,"length2":18}]],"length":8741,"saved":false}
{"ts":1364625095581,"patch":[[{"diffs":[[0,"_p.x"],[-1,"++"],[1," += 15"],[0,"; \n "]],"start1":6272,"start2":6272,"length1":10,"length2":14}]],"length":8745,"saved":false}
{"ts":1364625170342,"patch":[[{"diffs":[[0," += "],[-1,"15"],[1,"2"],[0,"; \n "]],"start1":6276,"start2":6276,"length1":10,"length2":9}]],"length":8744,"saved":false}
{"ts":1364625185004,"patch":[[{"diffs":[[0,"_p.x += "],[-1,"2"],[1,"1"],[0,"; \n     "]],"start1":6272,"start2":6272,"length1":17,"length2":17}]],"length":8744,"saved":false}
{"ts":1364625189143,"patch":[[{"diffs":[[0,"node._p."],[-1,"x"],[1,"y"],[0," += 1; \n"]],"start1":6267,"start2":6267,"length1":17,"length2":17}]],"length":8744,"saved":false}
{"ts":1364625200762,"patch":[[{"diffs":[[0," += 1; \n"],[1,"                            nearest.node._p.x += 1; \n\n"],[0,"        "]],"start1":6276,"start2":6276,"length1":16,"length2":70}]],"length":8798,"saved":false}
{"contributors":[],"silentsave":false,"ts":1364625309205,"patch":[[{"diffs":[[0,"    "],[-1,"nearest.node._p.y += 1; \n                            nearest.node._p.x += 1"],[1,"that.redraw()"],[0,"; \n\n"]],"start1":6255,"start2":6255,"length1":83,"length2":21}]],"length":8736,"saved":false}
{"ts":1364625503350,"patch":[[{"diffs":[[0," = 255;\n"],[1,"                            var edges = particleSystem.getEdgesTo(nearest.node);\n                            for(var key in edges){\n                                edges[key].data;\n                            }\n"],[0,"        "]],"start1":6223,"start2":6223,"length1":16,"length2":227}]],"length":8947,"saved":false}
{"ts":1364625557569,"patch":[[{"diffs":[[0,"ey].data"],[1,".weight = 5"],[0,";\n      "]],"start1":6402,"start2":6402,"length1":16,"length2":27}]],"length":8958,"saved":false}
{"ts":1364625621317,"patch":[[{"diffs":[[0,"getEdges"],[-1,"To"],[1,"From"],[0,"(nearest"]],"start1":6286,"start2":6286,"length1":18,"length2":20}]],"length":8960,"saved":false}
{"ts":1364625699191,"patch":[[{"diffs":[[0,"pointer' );\n"],[1,"                            \n                            function highlight(){\n                                \n                            }\n"],[0,"            "]],"start1":6158,"start2":6158,"length1":24,"length2":166}]],"length":9102,"saved":false}
{"ts":1364625817532,"patch":[[{"diffs":[[0,"ghlight("],[1,"node"],[0,"){\n     "]],"start1":6238,"start2":6238,"length1":16,"length2":20},{"diffs":[[0,"    "],[-1,"    \n                            }\n                            nearest."],[0,"node"]],"start1":6277,"start2":6277,"length1":79,"length2":8},{"diffs":[[0,"eight = "],[-1,"5"],[1,"3;\n                                edges[key]"],[0,";\n      "]],"start1":6489,"start2":6489,"length1":17,"length2":61},{"diffs":[[0,"draw(); "],[1,"\n                            }highlight(nearest.node);"],[0,"\n\n      "]],"start1":6609,"start2":6609,"length1":16,"length2":70}]],"length":9133,"saved":false}
{"ts":1364625863302,"patch":[[{"diffs":[[0,"        "],[-1,"edges[key]"],[1,"highlight([key].target.data)"],[0,";\n      "]],"start1":6524,"start2":6524,"length1":26,"length2":44}]],"length":9151,"saved":false}
{"ts":1364625953542,"patch":[[{"diffs":[[0,"ghlight("],[1,"edges"],[0,"[key].ta"]],"start1":6534,"start2":6534,"length1":16,"length2":21}]],"length":9156,"saved":false}
{"ts":1364626219393,"patch":[[{"diffs":[[0,"    "],[-1,"node.data.color.a"],[1,"    var operable = node.data.color.a? node.data.color.a : node.color.a ;\n                                operable"],[0," = 255;\n"],[1,"    "],[0,"    "]],"start1":6277,"start2":6277,"length1":33,"length2":133},{"diffs":[[0,"        "],[1,"    "],[0,"for(var "]],"start1":6509,"start2":6509,"length1":16,"length2":20},{"diffs":[[0,"        "],[1,"  "],[1,"  "],[0,"edges[ke"]],"start1":6568,"start2":6568,"length1":16,"length2":20},{"diffs":[[0,"ht = 3;\n"],[1,"    "],[0,"        "]],"start1":6600,"start2":6600,"length1":16,"length2":20},{"diffs":[[0,"                "],[1,"  "],[-1,"}\n"],[1,"  }\n    "],[0,"                "]],"start1":6691,"start2":6691,"length1":34,"length2":42},{"diffs":[[0,".node);\n"],[-1,"\n"],[0,"        "]],"start1":6807,"start2":6807,"length1":17,"length2":16}]],"length":9275,"saved":false}
{"ts":1364626375212,"patch":[[{"diffs":[[0,".color.a"],[1," !== undefined"],[0,"? node.d"]],"start1":6309,"start2":6309,"length1":16,"length2":30}]],"length":9289,"saved":false}
{"ts":1364626574030,"patch":[[{"diffs":[[0,"    "],[-1," var operable ="],[0," nod"]],"start1":6280,"start2":6280,"length1":23,"length2":8},{"diffs":[[0,"r.a "],[-1,"!== undefined? node.data.color.a : node.color.a ;\n                                operable "],[0,"= 25"]],"start1":6299,"start2":6299,"length1":99,"length2":8},{"diffs":[[0,"ghlight("],[1,"particleSystem.getNode("],[0,"edges[ke"]],"start1":6554,"start2":6554,"length1":16,"length2":39},{"diffs":[[0,"et.data)"],[1,")"],[0,";\n      "]],"start1":6600,"start2":6600,"length1":16,"length2":17}]],"length":9207,"saved":false}
{"ts":1364626713732,"patch":[[{"diffs":[[0,"ght("],[-1,"particleSystem.getNode("],[0,"edge"]],"start1":6558,"start2":6558,"length1":31,"length2":8},{"diffs":[[0,"rget"],[-1,".data)"],[0,");\n "]],"start1":6575,"start2":6575,"length1":14,"length2":8}]],"length":9178,"saved":false}
{"ts":1364627068787,"patch":[[{"diffs":[[0,"edges){\n"],[1,"                                    if(edges[key].data.color !== \"none\"){\n    "],[0,"        "]],"start1":6444,"start2":6444,"length1":16,"length2":94},{"diffs":[[0,"        "],[1,"  "],[1,"  "],[0,"highligh"]],"start1":6622,"start2":6622,"length1":16,"length2":20},{"diffs":[[0,"target);"],[1,"                                        \n                                    }"],[0,"\n       "]],"start1":6655,"start2":6655,"length1":16,"length2":94}]],"length":9338,"saved":false}
{"ts":1364627333719,"patch":[[{"diffs":[[0,"(node){\n"],[1,"                                particleSystem.stop();\n"],[0,"        "]],"start1":6245,"start2":6245,"length1":16,"length2":71},{"diffs":[[0,"edraw();"],[-1," "],[1,"\n                                particleSystem.start();"],[0,"\n       "]],"start1":6869,"start2":6869,"length1":17,"length2":72}]],"length":9448,"saved":false}
{"ts":1364627547384,"patch":[[{"diffs":[[0,"e){\n"],[-1,"                                particleSystem.stop();\n"],[0,"    "]],"start1":6249,"start2":6249,"length1":63,"length2":8},{"diffs":[[0,"   }"],[-1,"highlight(nearest.node);"],[1,"function(){\n                                particleSystem.stop();\n                                highlight(nearest.node);\n                                particleSystem.start();\n                            }"],[0,"\n   "]],"start1":6904,"start2":6904,"length1":32,"length2":217}]],"length":9578,"saved":false}
{"ts":1364627572955,"patch":[[{"diffs":[[0,"function"],[1," startHighlight"],[0,"(){\n    "]],"start1":6908,"start2":6908,"length1":16,"length2":31},{"diffs":[[0,"               }"],[1,"startHighlight();"],[0,"\n               "]],"start1":7116,"start2":7116,"length1":32,"length2":49}]],"length":9610,"saved":false}
{"ts":1364627862772,"patch":[[{"diffs":[[0,"dges"],[-1,"From"],[1,"To"],[0,"(nea"]],"start1":6373,"start2":6373,"length1":12,"length2":10}]],"length":9608,"saved":false}
{"ts":1364628127384,"patch":[[{"diffs":[[0,"ht = 3;\n"],[1,"                                        particleSystem.prune(edges[key]);\n"],[0,"        "]],"start1":6584,"start2":6584,"length1":16,"length2":90}]],"length":9682,"saved":false}
{"ts":1364628273189,"patch":[[{"diffs":[[0," 3;\n"],[-1,"                                        particleSystem.prune(edges[key]);\n"],[0,"    "]],"start1":6588,"start2":6588,"length1":82,"length2":8},{"diffs":[[0,"ight(){\n"],[1,"                                var edges = [];\n"],[0,"        "]],"start1":6925,"start2":6925,"length1":16,"length2":64},{"diffs":[[0,"ghlight("],[1,"null, "],[0,"nearest."]],"start1":7070,"start2":7070,"length1":16,"length2":22}]],"length":9662,"saved":false}
{"ts":1364628360500,"patch":[[{"diffs":[[0,"ght("],[-1,"null, "],[0,"near"]],"start1":7074,"start2":7074,"length1":14,"length2":8}]],"length":9656,"saved":false}
{"ts":1364628456990,"patch":[[{"diffs":[[0,"node, pt) {\n"],[1,"                        node.data.color.a = .1;\n"],[0,"            "]],"start1":947,"start2":947,"length1":24,"length2":72}]],"length":9704,"saved":false}
{"ts":1364628463653,"patch":[[{"diffs":[[0,"lor.a = "],[1,"0"],[0,".1;\n    "]],"start1":995,"start2":995,"length1":16,"length2":17}]],"length":9705,"saved":false}
{"ts":1364628757662,"patch":[[{"diffs":[[0,"var "],[-1,"key in edges"],[1,"x = 0; x< edges.length; x++"],[0,"){\n "]],"start1":6480,"start2":6480,"length1":20,"length2":35},{"diffs":[[0,"   if(edges["],[-1,"key"],[1,"x"],[0,"].data.color"]],"start1":6547,"start2":6547,"length1":27,"length2":25},{"diffs":[[0,"  edges["],[-1,"key"],[1,"x"],[0,"].data.w"]],"start1":6624,"start2":6624,"length1":19,"length2":17},{"diffs":[[0,"ges["],[-1,"key"],[1,"x"],[0,"].ta"]],"start1":6704,"start2":6704,"length1":11,"length2":9}]],"length":9714,"saved":false}
{"ts":1364629062805,"patch":[[{"diffs":[[0,"EdgesTo("],[-1,"nearest."],[0,"node);\n "]],"start1":6421,"start2":6421,"length1":24,"length2":16}]],"length":9706,"saved":false}
{"ts":1364629380260,"patch":[[{"diffs":[[0,"     if("],[1,"!"],[0,"edges[x]"]],"start1":6537,"start2":6537,"length1":16,"length2":17},{"diffs":[[0,"ata."],[-1,"color !== \"none\""],[1,"visited"],[0,"){\n "]],"start1":6556,"start2":6556,"length1":24,"length2":15},{"diffs":[[0,"ht = 3;\n"],[1,"                                        edges[x].data.visited =true;\n"],[0,"        "]],"start1":6628,"start2":6628,"length1":16,"length2":85}]],"length":9767,"saved":false}
{"ts":1364629390052,"patch":[[{"diffs":[[0,"getEdges"],[-1,"To"],[1,"From"],[0,"(node);\n"]],"start1":6418,"start2":6418,"length1":18,"length2":20}]],"length":9769,"saved":false}
{"ts":1364629590416,"patch":[[{"diffs":[[0,") {\n"],[-1,"                        node.data.color.a = 0.1;\n"],[0,"    "]],"start1":955,"start2":955,"length1":57,"length2":8}]],"length":9720,"saved":false}
{"ts":1364629977938,"patch":[[{"diffs":[[0,"].target"],[1,".name"],[0,");      "]],"start1":6715,"start2":6715,"length1":16,"length2":21},{"diffs":[[0,"(){\n"],[-1,"                                var edges = [];\n"],[0,"    "]],"start1":6998,"start2":6998,"length1":56,"length2":8}]],"length":9677,"saved":false}
{"ts":1364630187970,"patch":[[{"diffs":[[0,"    "],[-1,"for(var x = 0; x< edges.length; x++){"],[1,"var interesting; \n                                for(var x = 0; x< edges.length; x++){\n                                    particleSystem.getEdges(node);"],[0,"\n   "]],"start1":6417,"start2":6417,"length1":45,"length2":162},{"diffs":[[0,"].target"],[-1,".name"],[0,");      "]],"start1":6832,"start2":6832,"length1":21,"length2":16}]],"length":9789,"saved":false}
{"ts":1364630209578,"patch":[[{"diffs":[[0,"                "],[1," interesting ="],[0," particleSystem."]],"start1":6528,"start2":6528,"length1":32,"length2":46},{"diffs":[[0,"etEdges(node"],[1,", edges[x].target"],[0,");\n         "]],"start1":6575,"start2":6575,"length1":24,"length2":41}]],"length":9820,"saved":false}
{"ts":1364630477279,"patch":[[{"diffs":[[0,"    "],[-1,"var interesting; \n                                for(var x = 0; x< edges.length; x++){\n                                    interesting = particleSystem.getEdges(node, edges[x].target);"],[1,"for(var x = 0; x< edges.length; x++){"],[0,"\n   "]],"start1":6417,"start2":6417,"length1":193,"length2":45}]],"length":9672,"saved":false}
{"ts":1364634772863,"patch":[[{"diffs":[[0,"+){\n"],[-1,"                                    if(!edges[x].data.visited){\n                                        edges[x].data.weight = 3;\n                                        edges[x].data.visited =true;\n    "],[0,"    "]],"start1":6455,"start2":6455,"length1":211,"length2":8},{"diffs":[[0,"   \n"],[-1,"                                    }\n"],[0,"    "]],"start1":6559,"start2":6559,"length1":46,"length2":8}]],"length":9431,"saved":false}
{"ts":1364634836184,"patch":[[{"diffs":[[0,"   }"],[-1,"function startHighlight(){\n                                particleSystem.stop();\n                                highlight(nearest.node);\n                                particleSystem.start();\n                            }startHighlight();"],[1,"highlight(nearest.node);\n"],[0,"\n   "]],"start1":6725,"start2":6725,"length1":249,"length2":33}]],"length":9215,"saved":false}
{"ts":1364635235155,"patch":[[{"diffs":[[0,"g: function() {\n"],[1,"                var pos, mouseP, nearest, oldNearest;\n"],[0,"                "]],"start1":5577,"start2":5577,"length1":32,"length2":86},{"diffs":[[0,") {\n"],[-1,"                        var pos, mouseP, nearest;\n"],[0,"    "]],"start1":5716,"start2":5716,"length1":58,"length2":8},{"diffs":[[0,"e) {"],[-1,"\n                        var pos, mouseP, nearest;\n"],[0,"    "]],"start1":7029,"start2":7029,"length1":59,"length2":8}]],"length":9168,"saved":false}
{"ts":1364635434412,"patch":[[{"diffs":[[0,"(node){\n"],[1,"                                normalize(oldNearest);\n                                oldNearest = node;\n"],[0,"        "]],"start1":6249,"start2":6249,"length1":16,"length2":122},{"diffs":[[0," = 255;\n"],[-1,""],[0,"        "]],"start1":6412,"start2":6412,"length1":16,"length2":16},{"diffs":[[0,"    "],[-1,"    particleSystem.start("],[1,"}highlight(nearest.node);\n                            \n                            function normalize(node){\n                                node.data.color.a = .5;\n                                var edges = particleSystem.getEdgesFrom(node"],[0,");\n "]],"start1":6778,"start2":6778,"length1":33,"length2":249},{"diffs":[[0,"    "],[1," "],[-1,"}highlight(nearest.node);"],[1,"   for(var x = 0; x< edges.length; x++){\n                                    normalize(edges[x].target);                                        \n                                }\n                                that.redraw();                                \n                            }"],[0,"\n\n  "]],"start1":7050,"start2":7050,"length1":33,"length2":296}]],"length":9753,"saved":false}
{"ts":1364635465641,"patch":[[{"diffs":[[0,"ighlight(node){\n"],[1,"                                particleSystem.stop();\n"],[0,"                "]],"start1":6241,"start2":6241,"length1":32,"length2":87},{"diffs":[[0,"t.redraw();\n"],[1,"                                particleSystem.start();\n"],[0,"            "]],"start1":6797,"start2":6797,"length1":24,"length2":80}]],"length":9864,"saved":false}
{"ts":1364635531206,"patch":[[{"diffs":[[0,"    "],[-1,"normalize(oldNearest);"],[1,"if(oldNearest){\n                                    normalize(oldNearest);\n                                }"],[0,"\n   "]],"start1":6340,"start2":6340,"length1":30,"length2":116}]],"length":9950,"saved":false}
{"ts":1364635705306,"patch":[[{"diffs":[[0,"e){\n"],[-1,"                                particleSystem.stop();\n"],[0,"    "]],"start1":6253,"start2":6253,"length1":63,"length2":8},{"diffs":[[0,"();\n"],[-1,"                                particleSystem.start();\n"],[0,"    "]],"start1":6836,"start2":6836,"length1":64,"length2":8}]],"length":9839,"saved":false}
{"ts":1364636605295,"patch":[[{"diffs":[[0,") {\n"],[-1,"                var pos, mouseP, nearest, oldNearest;\n"],[0,"    "]],"start1":5589,"start2":5589,"length1":62,"length2":8},{"diffs":[[0,"                "],[1,"var pos, mouseP, nearest;"],[0,"\n               "]],"start1":5674,"start2":5674,"length1":32,"length2":57},{"diffs":[[0,"t &&"],[-1," nearest.node.data.label !== \"OR\" && nearest.node.data.label !== \"AND\" &&"],[0," nea"]],"start1":5975,"start2":5975,"length1":81,"length2":8},{"diffs":[[0,"    "],[-1,"$('canvas').css( 'cursor', 'pointer' );\n  "],[1,"mouseEntered();"],[0,"        "],[1,"\n      "],[0,"    "]],"start1":6028,"start2":6028,"length1":58,"length2":38},{"diffs":[[0,"            "],[-1,"\n        "],[1,"}\n\n"],[0,"            "]],"start1":6068,"start2":6068,"length1":33,"length2":27},{"diffs":[[0,"    "],[-1,"function highlight(node){"],[1,"return false;"],[0,"\n   "]],"start1":6099,"start2":6099,"length1":33,"length2":21},{"diffs":[[0,"                "],[1,"},\n"],[0,"            if(o"]],"start1":6121,"start2":6121,"length1":32,"length2":35},{"diffs":[[0,"    "],[-1,"if(oldNearest){\n         "],[1,"        clicked: function(e) {   \n"],[0,"    "]],"start1":6148,"start2":6148,"length1":33,"length2":42},{"diffs":[[0,"    "],[-1,"   normalize(oldN"],[1,"var pos, mouseP, n"],[0,"earest"],[-1,")"],[0,";\n  "]],"start1":6206,"start2":6206,"length1":32,"length2":32},{"diffs":[[0,"    "],[-1,"        }\n                                oldNearest = node;\n                                node.data.color.a = 255;"],[1,"pos = $(canvas).offset();\n                        mouseP = arbor.Point(e.pageX - pos.left, e.pageY - pos.top)"],[0,"\n   "]],"start1":6256,"start2":6256,"length1":125,"length2":117},{"diffs":[[0,"        "],[-1,"        var edg"],[1,"near"],[0,"es"],[1,"t"],[0," = parti"]],"start1":6386,"start2":6386,"length1":33,"length2":23},{"diffs":[[0,"eSystem."],[-1,"getEdgesFrom(node"],[1,"nearest(mouseP"],[0,");\n     "]],"start1":6411,"start2":6411,"length1":33,"length2":30},{"diffs":[[0,"    "],[-1,"        for(var x = 0; x< edges.length; x++){\n                                    highlight(edges[x].target);"],[1,"if( nearest&& nearest.node.data.label !== \"OR\" && nearest.node.data.label !== \"AND\" && nearest.distance < 20 ){\n                            that.customNodeClick.setCourse(nearest.node.name);\n       "],[0,"    "]],"start1":6456,"start2":6456,"length1":117,"length2":206},{"diffs":[[0,"                "],[1,"}\n"],[0,"                "]],"start1":6659,"start2":6659,"length1":32,"length2":34},{"diffs":[[0,"                "],[1," return false;"],[0,"\n               "]],"start1":6684,"start2":6684,"length1":32,"length2":46},{"diffs":[[0,"                "],[1,"},\n"],[0,"            }\n  "]],"start1":6719,"start2":6719,"length1":32,"length2":35},{"diffs":[[0,"    "],[-1,"}\n"],[0,"        "],[-1,"                        that.redraw();\n                            }highlight(nearest.node);"],[1,"mouseEntered: function(){\n                        function highlight(node){\n                        if(nearest.distance > 20){"],[0,"\n   "]],"start1":6746,"start2":6746,"length1":110,"length2":142},{"diffs":[[0,"    "],[-1,"    function normalize(node){\n   "],[1,"}\n"],[0,"    "]],"start1":6934,"start2":6934,"length1":41,"length2":10},{"diffs":[[0,"            "],[-1," "],[0,"node.data.co"]],"start1":6956,"start2":6956,"length1":25,"length2":24},{"diffs":[[0,"a = "],[-1,"."],[1,"25"],[0,"5;\n"],[-1,"    "],[0,"    "]],"start1":6984,"start2":6984,"length1":16,"length2":13},{"diffs":[[0,"        "],[-1,"   "],[-1," "],[0,"for(var "]],"start1":7088,"start2":7088,"length1":20,"length2":16},{"diffs":[[0,"    "],[-1,"    normalize"],[1,"highlight"],[0,"(edg"]],"start1":7162,"start2":7162,"length1":21,"length2":17},{"diffs":[[0,"            "],[-1,"    }\n    "],[1,"}\n"],[0,"            "]],"start1":7250,"start2":7250,"length1":34,"length2":26},{"diffs":[[0,"w();"],[-1,"                                \n                            }\n\n                            return false;\n                        }else{\n                            $('canvas').css( 'cursor', 'default' );\n                            return false;\n                        }\n                    },\n                    clicked: function(e) {                        \n                        pos ="],[1,"\n                        }highlight(nearest.node);\n                        return false; \n                       "],[0," $("],[1,"'"],[0,"canvas"],[1,"'"],[0,")."],[-1,"offset();\n                        mouseP = arbor.Point(e.pageX - pos.left, e.pageY - pos.top)\n                        nearest = particleSystem.nearest(mouseP);\n                        if( nearest&& nearest.node.data.label !== \"OR\" && nearest.node.data.label !== \"AND\" && nearest.distance < 20 ){\n                            that.customNodeClick.setCourse(nearest.node.name);\n                        }\n                        return false;"],[1,"css( 'cursor', 'pointer' );\n                        "],[0,"\n   "]],"start1":7302,"start2":7302,"length1":849,"length2":186}]],"length":9116,"saved":false}
{"ts":1364637002260,"patch":[[{"diffs":[[0,"g: function() {\n"],[1,"                var pos, mouseP, nearest;\n"],[0,"                "]],"start1":5577,"start2":5577,"length1":32,"length2":74},{"diffs":[[0,"    "],[-1,"var pos, mouseP, nearest;"],[0,"\n   "]],"start1":5728,"start2":5728,"length1":33,"length2":8},{"diffs":[[0,"arest &&"],[1," nearest.node.data.label !== \"OR\" && nearest.node.data.label !== \"AND\" &&"],[0," nearest"]],"start1":5988,"start2":5988,"length1":16,"length2":89},{"diffs":[[0,"    "],[-1,"mouseEntered();        "],[1,"$('canvas').css( 'cursor', 'pointer' );"],[0,"\n   "]],"start1":6118,"start2":6118,"length1":31,"length2":47},{"diffs":[[0,"            "],[-1,"       }\n\n"],[0,"            "]],"start1":6167,"start2":6167,"length1":34,"length2":24},{"diffs":[[0,"    "],[-1,"         return false;\n                    },\n                    clicked: function(e) {   \n                        var pos, mouseP, nearest;\n                        pos = $(canvas).offset();\n                        mouseP = arbor.Point(e.pageX - pos.left, e.pageY - pos.top)\n                        near"],[1,"\n                            function highlight(node){\n                                node.data.color.a = 255;\n                                var edg"],[0,"es"],[-1,"t"],[0," = p"]],"start1":6186,"start2":6186,"length1":315,"length2":161},{"diffs":[[0,"ticleSystem."],[-1,"nearest(mouseP"],[1,"getEdgesFrom(node"],[0,");\n         "]],"start1":6349,"start2":6349,"length1":38,"length2":41},{"diffs":[[0,"    "],[-1,"if( nearest&& nearest.node.data.label !== \"OR\" && nearest.node.data.label !== \"AND\" && nearest.distance < 20 ){\n                            that.customNodeClick.setCourse(nearest.node.name);\n   "],[1,"        for(var x = 0; x< edges.length; x++){\n                                    highlight(edges[x].target);"],[0,"    "]],"start1":6401,"start2":6401,"length1":202,"length2":117},{"diffs":[[0,"                "],[-1,"}\n"],[0,"                "]],"start1":6519,"start2":6519,"length1":34,"length2":32},{"diffs":[[0,"        "],[-1,"     return false;"],[0,"\n       "]],"start1":6546,"start2":6546,"length1":34,"length2":16},{"diffs":[[0,"                "],[-1,"},\n"],[0,"                "]],"start1":6559,"start2":6559,"length1":35,"length2":32},{"diffs":[[0,"    "],[1,"}\n"],[0,"        "],[-1,"mouseEntered: function(){\n                        function highlight(node){\n                        if(nearest.distance > 20){"],[1,"                        that.redraw();\n                            }highlight(nearest.node);"],[0,"\n   "]],"start1":6583,"start2":6583,"length1":142,"length2":110},{"diffs":[[0,"                "],[1,"return false;"],[0,"\n               "]],"start1":6702,"start2":6702,"length1":32,"length2":45},{"diffs":[[0,"               }"],[1,"else{"],[0,"\n               "]],"start1":6741,"start2":6741,"length1":32,"length2":37},{"diffs":[[0,"    "],[-1,"node.data.color.a = 255;\n                            var edges = particleSystem.getEdgesFrom(node)"],[1,"$('canvas').css( 'cursor', 'default' );\n                            return false"],[0,";\n  "]],"start1":6787,"start2":6787,"length1":106,"length2":88},{"diffs":[[0,"    "],[1,"}\n"],[0,"    "],[-1,"for(var x = 0; x< edges.length; x++){\n"],[1,"     "],[0,"    "]],"start1":6893,"start2":6893,"length1":50,"length2":19},{"diffs":[[0,"                "],[-1," "],[1,"},\n"],[0,"                "]],"start1":6903,"start2":6903,"length1":33,"length2":35},{"diffs":[[0,"    "],[-1,"highlight(edges[x].target);                                        \n                            }\n                            that.redraw();\n                        }highlight(nearest.node);\n                        return false; \n                        $('canvas').css( 'cursor', 'pointer' );\n"],[1,"clicked: function(e) {                        \n                        pos = $(canvas).offset();\n                        mouseP = arbor.Point(e.pageX - pos.left, e.pageY - pos.top)\n                        nearest = particleSystem.nearest(mouseP);\n                        if( nearest&& nearest.node.data.label !== \"OR\" && nearest.node.data.label !== \"AND\" && nearest.distance < 20 ){\n                            that.customNodeClick.setCourse(nearest.node.name);\n                        }\n  "],[0,"    "]],"start1":6938,"start2":6938,"length1":302,"length2":498},{"diffs":[[0,"                "],[-1,"  "],[1,"return false;"],[0,"\n               "]],"start1":7438,"start2":7438,"length1":34,"length2":45}]],"length":9099,"saved":false}
{"ts":1364637315827,"patch":[[{"diffs":[[0,"         }else{\n"],[1,"                            particleSystem.eachNode(function(note, pt){\n                                node.data.color.a = .5;\n                            });\n"],[0,"                "]],"start1":6747,"start2":6747,"length1":32,"length2":192}]],"length":9259,"saved":false}
{"ts":1364637331570,"patch":[[{"diffs":[[0,"ction(no"],[-1,"t"],[1,"d"],[0,"e, pt){\n"]],"start1":6818,"start2":6818,"length1":17,"length2":17},{"diffs":[[0,"lor.a = "],[1,"0"],[0,".5;\n    "]],"start1":6879,"start2":6879,"length1":16,"length2":17}]],"length":9260,"saved":false}
{"ts":1364637623492,"patch":[[{"diffs":[[0,"a = "],[-1,"255"],[1,"1"],[0,";\n  "]],"start1":6293,"start2":6293,"length1":11,"length2":9}]],"length":9258,"saved":false}
{"ts":1364637632343,"patch":[[{"diffs":[[0,"= 0."],[-1,"5"],[1,"6"],[0,";\n  "]],"start1":6883,"start2":6883,"length1":9,"length2":9}]],"length":9258,"saved":false}
{"ts":1364638030734,"patch":[[{"diffs":[[0,"                "],[1,"particleSystem.stop();"],[0,"\n               "]],"start1":5716,"start2":5716,"length1":32,"length2":54}]],"length":9280,"saved":false}
{"ts":1364638087243,"patch":[[{"diffs":[[0,") {\n"],[-1,"                        particleSystem.stop();\n"],[0,"    "]],"start1":5704,"start2":5704,"length1":55,"length2":8}]],"length":9233,"saved":false}
{"ts":1364638241525,"patch":[[{"diffs":[[0,"; x++){\n"],[1,"                                    edges[x].data.weight=3;\n"],[0,"        "]],"start1":6416,"start2":6416,"length1":16,"length2":76},{"diffs":[[0,"            });\n"],[1,"                            particleSystem.eachEdge(function(edge, pt, pt2){\n                                edge.data.weight = 1;\n                            });\n"],[0,"                "]],"start1":6941,"start2":6941,"length1":32,"length2":195}]],"length":9456,"saved":false}
{"ts":1364638287160,"patch":[[{"diffs":[[0,".weight="],[-1,"3"],[1,"2"],[0,";\n      "]],"start1":6473,"start2":6473,"length1":17,"length2":17}]],"length":9456,"saved":false}
{"ts":1364638342855,"patch":[[{"diffs":[[0,"pointer' );\n"],[1,"                            particleSystem.stop();"],[0,"            "]],"start1":6125,"start2":6125,"length1":24,"length2":74},{"diffs":[[0,"    "],[-1,"}highlight(nearest.node"],[1,"    \n                            }highlight(nearest.node);\n                            particleSystem.start("],[0,");\n "]],"start1":6743,"start2":6743,"length1":31,"length2":116}]],"length":9591,"saved":false}
{"ts":1364638408989,"patch":[[{"diffs":[[0,"default' );\n"],[1,"                            that.redraw();\n"],[0,"            "]],"start1":7311,"start2":7311,"length1":24,"length2":67}]],"length":9634,"saved":false}
{"ts":1364638495034,"patch":[[{"diffs":[[0," );\n"],[-1,"                            particleSystem.stop();                            \n"],[0,"    "]],"start1":6133,"start2":6133,"length1":87,"length2":8},{"diffs":[[0,"e);\n"],[-1,"                            particleSystem.start();\n"],[0,"    "]],"start1":6723,"start2":6723,"length1":60,"length2":8}]],"length":9503,"saved":false}
{"ts":1364638630548,"patch":[[{"diffs":[[0,"pointer' );\n"],[1,"                            if(particleSystem.energy().n<50){\n "],[0,"            "]],"start1":6125,"start2":6125,"length1":24,"length2":87},{"diffs":[[0,"   return false;"],[1,"   \n                            } "],[0,"\n               "]],"start1":6815,"start2":6815,"length1":32,"length2":66}]],"length":9600,"saved":false}
{"ts":1364638649616,"patch":[[{"diffs":[[0,").n<"],[-1,"5"],[1,"3"],[0,"0){\n"]],"start1":6190,"start2":6190,"length1":9,"length2":9}]],"length":9600,"saved":false}
{"ts":1364638680520,"patch":[[{"diffs":[[0,"    "],[-1,"return false;  "],[1,"}"],[0," \n  "]],"start1":6814,"start2":6814,"length1":23,"length2":9},{"diffs":[[0,"                "],[-1,"}"],[1,"return false;  "],[0," \n              "]],"start1":6833,"start2":6833,"length1":33,"length2":47}]],"length":9600,"saved":false}
{"ts":1364638688751,"patch":[[{"diffs":[[0,").n<"],[-1,"30"],[1,"25"],[0,"){\n "]],"start1":6190,"start2":6190,"length1":10,"length2":10}]],"length":9600,"saved":false}
{"ts":1364638777073,"patch":[[{"diffs":[[0,"earest(mouseP);\n"],[1,"\n"],[0,"                "]],"start1":5892,"start2":5892,"length1":32,"length2":33},{"diffs":[[0,"                "],[-1,"\n"],[1,"if(particleSystem.energy().n<25){\n    "],[0,"                "]],"start1":5917,"start2":5917,"length1":33,"length2":70},{"diffs":[[0,"                "],[1,"    "],[0,"$('canvas').css("]],"start1":6119,"start2":6119,"length1":32,"length2":36},{"diffs":[[0,"    "],[-1,"                        if(particleSystem.energy().n<25){\n"],[0,"    "]],"start1":6179,"start2":6179,"length1":66,"length2":8},{"diffs":[[0,"                "],[1,"    "],[0,"node.data.color."]],"start1":6254,"start2":6254,"length1":32,"length2":36},{"diffs":[[0,"olor.a = 1;\n"],[1,"    "],[0,"            "]],"start1":6285,"start2":6285,"length1":24,"length2":28},{"diffs":[[0,"        "],[1,"    "],[0,"for(var "]],"start1":6404,"start2":6404,"length1":16,"length2":20},{"diffs":[[0,"            "],[1,"   "],[1," "],[0,"edges[x].dat"]],"start1":6478,"start2":6478,"length1":24,"length2":28},{"diffs":[[0,"ight=2;\n"],[1,"    "],[0,"        "]],"start1":6510,"start2":6510,"length1":16,"length2":20},{"diffs":[[0,"                "],[1,"  "],[-1,"}\n"],[1,"  }\n    "],[0,"                "]],"start1":6642,"start2":6642,"length1":34,"length2":42},{"diffs":[[0,"                "],[-1,"\n"],[1,"    \n   "],[0,"                "]],"start1":6731,"start2":6731,"length1":33,"length2":40},{"diffs":[[0,"        "],[1," "],[0,"}highlig"]],"start1":6775,"start2":6775,"length1":16,"length2":17},{"diffs":[[0,"                "],[-1,"}"],[1,"    "],[0," \n              "]],"start1":6822,"start2":6822,"length1":33,"length2":36},{"diffs":[[0,"                "],[1," "],[1,"   "],[0,"return false;   "]],"start1":6856,"start2":6856,"length1":32,"length2":36},{"diffs":[[0,"n false;   \n"],[1,"    "],[0,"            "]],"start1":6881,"start2":6881,"length1":24,"length2":28},{"diffs":[[0,"                "],[1,"    "],[0,"particleSystem.e"]],"start1":6940,"start2":6940,"length1":32,"length2":36},{"diffs":[[0,"e, pt){\n"],[1,"    "],[0,"        "]],"start1":6996,"start2":6996,"length1":16,"length2":20},{"diffs":[[0,"                "],[1,"    "],[0,"});\n            "]],"start1":7077,"start2":7077,"length1":32,"length2":36},{"diffs":[[0,"                "],[1," "],[1,"   "],[0,"particleSystem.e"]],"start1":7113,"start2":7113,"length1":32,"length2":36},{"diffs":[[0,", pt2){\n"],[1,"    "],[0,"        "]],"start1":7174,"start2":7174,"length1":16,"length2":20},{"diffs":[[0,"                "],[1,"    "],[0,"});\n            "]],"start1":7252,"start2":7252,"length1":32,"length2":36},{"diffs":[[0,"                "],[1,"   "],[1," "],[0,"$('canvas').css("]],"start1":7288,"start2":7288,"length1":32,"length2":36},{"diffs":[[0,"default' );\n"],[1,"    "],[0,"            "]],"start1":7336,"start2":7336,"length1":24,"length2":28},{"diffs":[[0,"                "],[1,"    "],[0,"return false;\n  "]],"start1":7407,"start2":7407,"length1":32,"length2":36},{"diffs":[[0,"  return false;\n"],[1,"                            }\n"],[0,"                "]],"start1":7425,"start2":7425,"length1":32,"length2":62}]],"length":9697,"saved":false}
{"ts":1364638791511,"patch":[[{"diffs":[[0,"              }\n"],[1,"                        return false;\n"],[0,"                "]],"start1":7481,"start2":7481,"length1":32,"length2":70}]],"length":9735,"saved":false}
{"ts":1364638813283,"patch":[[{"diffs":[[0,"e);\n"],[-1,"                                 \n                                return false;   \n"],[0,"    "]],"start1":6806,"start2":6806,"length1":91,"length2":8},{"diffs":[[0,"();\n"],[-1,"                                return false;\n"],[0,"    "]],"start1":7308,"start2":7308,"length1":54,"length2":8}]],"length":9606,"saved":false}
{"ts":1364638854190,"patch":[[{"diffs":[[0,"rgy().n<"],[-1,"2"],[1,"3"],[0,"5){\n    "]],"start1":5954,"start2":5954,"length1":17,"length2":17}]],"length":9606,"saved":false}
{"ts":1364638884644,"patch":[[{"diffs":[[0,".n<3"],[-1,"5"],[1,"0"],[0,"){\n "]],"start1":5959,"start2":5959,"length1":9,"length2":9}]],"length":9606,"saved":false}
{"ts":1364638906116,"patch":[[{"diffs":[[0,").n<"],[-1,"30"],[1,"25"],[0,"){\n "]],"start1":5958,"start2":5958,"length1":10,"length2":10}]],"length":9606,"saved":false}
{"ts":1364638932583,"patch":[[{"diffs":[[0,".n<2"],[-1,"5"],[1,"8"],[0,"){\n "]],"start1":5959,"start2":5959,"length1":9,"length2":9}]],"length":9606,"saved":false}
{"ts":1364638963173,"patch":[[{"diffs":[[0,"gy().n<2"],[-1,"8"],[1,"6"],[0,"){\n     "]],"start1":5955,"start2":5955,"length1":17,"length2":17}]],"length":9606,"saved":false}
{"ts":1364638985305,"patch":[[{"diffs":[[0,"gy().n<2"],[-1,"6"],[1,"7"],[0,"){\n     "]],"start1":5955,"start2":5955,"length1":17,"length2":17}]],"length":9606,"saved":false}
{"ts":1364670628274,"patch":[[{"diffs":[[0,"+){\n"],[-1,"                                        edges[x].data.weight=2;\n"],[0,"    "]],"start1":6450,"start2":6450,"length1":72,"length2":8},{"diffs":[[0,"});\n"],[-1,"                                particleSystem.eachEdge(function(edge, pt, pt2){\n                                    edge.data.weight = 1;\n                                });"],[0,"\n   "]],"start1":6950,"start2":6950,"length1":182,"length2":8}]],"length":9368,"saved":false}
{"ts":1364673634780,"patch":[[{"diffs":[[0,").n<"],[-1,"27"],[1,"35"],[0,"){\n "]],"start1":5958,"start2":5958,"length1":10,"length2":10}]],"length":9368,"saved":false}
{"ts":1364674110401,"patch":[[{"diffs":[[0,"        "],[-1,"color"],[1,"var c"],[0," = edge."]],"start1":3238,"start2":3238,"length1":21,"length2":21},{"diffs":[[0,".color;\n"],[1,"                    var a = c.a? c.a : 1;\n                    color = \"rgba(\"+c.r+\",\"+c.g+\",\"+c.b+\",\"+a+\")\";\n                    "],[0,"\n       "]],"start1":3263,"start2":3263,"length1":16,"length2":145}]],"length":9497,"saved":false}
{"ts":1364674203954,"patch":[[{"diffs":[[0,"target);"],[1,"\n"],[0,"        "]],"start1":6642,"start2":6642,"length1":16,"length2":17},{"diffs":[[0,"                "],[1,"edges[x].data.color.a = 1;"],[0,"\n               "]],"start1":6675,"start2":6675,"length1":32,"length2":58},{"diffs":[[0,"             });"],[1,"\n                                \n                                particleSystem.eachEdge(function(edge, pt1, pt2){\n                                    edge.data.color.a = 0.6;\n                                });"],[0,"\n\n              "]],"start1":7093,"start2":7093,"length1":32,"length2":244}]],"length":9736,"saved":false}
{"ts":1364674212852,"patch":[[{"diffs":[[0,"ata.color.a = 0."],[-1,"6"],[1,"4"],[0,";\n              "]],"start1":7267,"start2":7267,"length1":33,"length2":33}]],"length":9736,"saved":false}
{"ts":1364674267212,"patch":[[{"diffs":[[0,"r.a = 0."],[-1,"4"],[1,"2"],[0,";\n      "]],"start1":7275,"start2":7275,"length1":17,"length2":17}]],"length":9736,"saved":false}
{"ts":1364678530914,"patch":[[{"diffs":[[0,".n<35){\n"],[1,"                            particleSystem.stop();\n"],[0,"        "]],"start1":6088,"start2":6088,"length1":16,"length2":67},{"diffs":[[0,"              }\n"],[1,"                            particleSystem.start();\n"],[0,"                "]],"start1":7507,"start2":7507,"length1":32,"length2":84}]],"length":9839,"saved":false}
{"ts":1364678603628,"patch":[[{"diffs":[[0,"5){\n"],[-1,"                            particleSystem.stop();\n"],[0,"    "]],"start1":6092,"start2":6092,"length1":59,"length2":8},{"diffs":[[0,"(node){\n"],[1,"                                    particleSystem.stop();\n"],[0,"        "]],"start1":6359,"start2":6359,"length1":16,"length2":75}]],"length":9847,"saved":false}
{"ts":1364678677812,"patch":[[{"diffs":[[0,");\n\n"],[-1,"                        if(particleSystem.energy().n<35){\n"],[0,"    "]],"start1":6034,"start2":6034,"length1":66,"length2":8},{"diffs":[[0," that.redraw();\n"],[1,"                                    particleSystem.start();\n"],[0,"                "]],"start1":6792,"start2":6792,"length1":32,"length2":92},{"diffs":[[0,"  }\n"],[-1,"                            particleSystem.start();\n                        }\n"],[0,"    "]],"start1":7529,"start2":7529,"length1":86,"length2":8}]],"length":9771,"saved":false}
{"ts":1364678852921,"patch":[[{"diffs":[[0,"e){\n"],[-1,"                                    particleSystem.stop();\n"],[0,"    "]],"start1":6305,"start2":6305,"length1":67,"length2":8},{"diffs":[[0,"w();"],[-1,"\n                                    particleSystem.start();\n"],[0,"    "]],"start1":6744,"start2":6744,"length1":69,"length2":8}]],"length":9651,"saved":false}
{"ts":1364678949169,"patch":[[{"diffs":[[0,"  }\n"],[-1,"                                    that.redraw();                                    \n"],[0,"    "]],"start1":6694,"start2":6694,"length1":95,"length2":8},{"diffs":[[0,"    "],[-1,"    that.redraw();"],[1,"}\n                            \n                            if(particleSystem.energy().mean < 35){\n                                that.redraw();                                    "],[0,"\n   "]],"start1":7273,"start2":7273,"length1":26,"length2":188},{"diffs":[[0,"              }\n"],[1,"\n"],[0,"                "]],"start1":7472,"start2":7472,"length1":32,"length2":33}]],"length":9727,"saved":false}
{"ts":1364681280562,"patch":[[{"diffs":[[0,"            "],[1," //"],[0," if(particle"]],"start1":7323,"start2":7323,"length1":24,"length2":27},{"diffs":[[0,"                "],[1," //"],[0,"     that.redraw"]],"start1":7389,"start2":7389,"length1":32,"length2":35},{"diffs":[[0,"                "],[1," //"],[0," }\n\n            "]],"start1":7475,"start2":7475,"length1":32,"length2":35}]],"length":9736,"saved":false}
{"ts":1364681313262,"patch":[[{"diffs":[[0,"        "],[-1," //"],[0," if(part"]],"start1":7327,"start2":7327,"length1":19,"length2":16},{"diffs":[[0,"        "],[-1," //"],[0,"     tha"]],"start1":7394,"start2":7394,"length1":19,"length2":16},{"diffs":[[0,"        "],[-1," //"],[0," }\n\n    "]],"start1":7477,"start2":7477,"length1":19,"length2":16}]],"length":9727,"saved":false}
{"ts":1364681334861,"patch":[[{"diffs":[[0,"                "],[1,"console.log(particleSystem.energy().mean);"],[0,"\n               "]],"start1":7291,"start2":7291,"length1":32,"length2":74}]],"length":9769,"saved":false}
{"ts":1364681394508,"patch":[[{"diffs":[[0,"n < "],[-1,"35"],[1,"1.01"],[0,"){\n "]],"start1":7408,"start2":7408,"length1":10,"length2":12}]],"length":9771,"saved":false}
{"ts":1364681435847,"patch":[[{"diffs":[[0,".mean < "],[-1,"1"],[1,"0"],[0,".01){\n  "]],"start1":7404,"start2":7404,"length1":17,"length2":17}]],"length":9771,"saved":false}
{"ts":1364681468261,"patch":[[{"diffs":[[0,"an < 0.0"],[-1,"1"],[1,"2"],[0,"){\n     "]],"start1":7407,"start2":7407,"length1":17,"length2":17}]],"length":9771,"saved":false}
{"contributors":[],"silentsave":false,"ts":1366074486924,"patch":[[{"diffs":[[1,"(function() {\n\n    Renderer = function(canvas) {\n        var canvas = $(canvas).get(0);\n        var ctx = canvas.getContext(\"2d\");\n        var gfx = arbor.Graphics(canvas);\n        var particleSystem = null;\n\n        var that = {\n            init: function(system) {\n                particleSystem = system;\n                particleSystem.screenSize(canvas.width, canvas.height);\n                particleSystem.screenPadding(100);\n\n                that.initMouseHandling();\n            },\n\n            redraw: function() {\n                if (!particleSystem){\n                    return;    \n                } \n                gfx.clear();\n\n                var nodeBoxes = {};\n                particleSystem.eachNode(function(node, pt) {\n                    var textSize = node.data.textSize || \"12px\";\n                    var textColor = node.data.textColor || \"white\";\n                    var font = node.data.font || \"helvetica\";\n                    var label = node.data.label || \"\";\n                    var color = node.data.color || \"#333333\";\n                    var alpha = node.data.alpha || \"\"\n                    var shape = node.data.shape || 'dot';\n                    \n                    ctx.font = textSize+\" \"+font ;\n                    ctx.textAlign = \"center\";  \n                    ctx.fillStyle = color;\n                    \n                    var w = ctx.measureText(\"\" + label).width + 10;\n                    var h = (ctx.measureText('M').width)*1.15;\n                    if (!(\"\" + label).match(/^[ \\t]*$/)) {\n                        pt.x = Math.floor(pt.x);\n                        pt.y = Math.floor(pt.y);\n                    }\n                    else {\n                        label = null;\n                    }\n                    \n                    if (shape == 'dot') {\n                        gfx.oval(pt.x - w / 2, pt.y - w / 2, w, w, {\n                            fill: ctx.fillStyle\n                        });\n                        nodeBoxes[node.name] = [pt.x - w / 2, pt.y - w / 2, w, w];\n                    }else {\n                        gfx.rect(pt.x - w / 2, pt.y - (h/1.5) , w, h+2, 4, {\n                            fill: ctx.fillStyle\n                        });\n                        nodeBoxes[node.name] = [pt.x - w / 2, pt.y - 11, w, 22];\n                    }\n\n                    if (label) {\n                        ctx.fillStyle = textColor;\n                        ctx.fillText(label || \"\", pt.x, pt.y + 4);\n                        ctx.fillText(label || \"\", pt.x, pt.y + 4);\n                    }\n                });\n\n                // edge: {source:Node, target:Node, length:#, data:{}}\n                // pt1:  {x:#, y:#}  source position in screen coords\n                // pt2:  {x:#, y:#}  target position in screen coords\n                particleSystem.eachEdge(function(edge, pt1, pt2) {\n                    var weight = edge.data.weight || 1;\n                    var color = edge.data.color || \"#999999\";\n                    var directed = edge.data.directed || false;\n                    var tail = intersect_line_box(pt1, pt2, nodeBoxes[edge.source.name]);\n                    var head = intersect_line_box(tail, pt2, nodeBoxes[edge.target.name]);\n\n                    ctx.save();\n                    ctx.beginPath();\n                    ctx.lineWidth = (!isNaN(weight)) ? parseFloat(weight) : 1;\n                    ctx.strokeStyle = color;\n                    ctx.fillStyle = null;\n\n                    ctx.moveTo(tail.x, tail.y);\n                    ctx.lineTo(head.x, head.y);\n                    ctx.stroke();\n                    ctx.restore();\n\n                    // draw an arrowhead if this is a -> style edge\n                    if (directed) {\n                        ctx.save()\n                        // move to the head position of the edge we just drew\n                        var wt = !isNaN(weight) ? parseFloat(weight) : 1\n                        var arrowLength = 6 + wt\n                        var arrowWidth = 2 + wt\n                        ctx.fillStyle = color\n                        ctx.translate(head.x, head.y);\n                        ctx.rotate(Math.atan2(head.y - tail.y, head.x - tail.x));\n\n                        // delete some of the edge that's already there (so the point isn't hidden)\n                        ctx.clearRect(-arrowLength / 2, - wt / 2, arrowLength / 2, wt)\n\n                        // draw the chevron\n                        ctx.beginPath();\n                        ctx.moveTo(-arrowLength, arrowWidth);\n                        ctx.lineTo(0, 0);\n                        ctx.lineTo(-arrowLength, - arrowWidth);\n                        ctx.lineTo(-arrowLength * 0.8, - 0);\n                        ctx.closePath();\n                        ctx.fill();\n                        ctx.restore()\n                    }\n\n                    if (edge.data.name) {\n                        ctx.fillStyle = \"#333333\";\n                        ctx.font = 'italic 11px Helvetica';\n                        ctx.fillText(edge.data.name, (pt1.x + pt2.x) / 2, (pt1.y + pt2.y) / 2);\n                    }\n                })\n            },\n            initMouseHandling: function() {\n                var pos, mouseP, nearest;\n                var handler = {\n                    clicked:function(e){\n                        var pos = $(canvas).offset();\n                        _mouseP = arbor.Point(e.pageX-pos.left, e.pageY-pos.top)\n                        selected = nearest = dragged = particleSystem.nearest(_mouseP);\n\n                        if (dragged.node !== null) dragged.node.fixed = true\n\n                        $(canvas).bind('mousemove', handler.dragged)\n                        $(window).bind('mouseup', handler.dropped)\n\n                        return false;\n                    },\n                    dragged:function(e){\n                        var old_nearest = nearest && nearest.node._id\n                        var pos = $(canvas).offset();\n                        var s = arbor.Point(e.pageX-pos.left, e.pageY-pos.top)\n\n                        if (!nearest) return\n                        if (dragged !== null && dragged.node !== null){\n                            var p = particleSystem.fromScreen(s)\n                            dragged.node.p = p\n                        }\n                        return false;\n                    },\n                    dropped:function(e){\n                        if (dragged===null || dragged.node===undefined) return\n                        if (dragged.node !== null) dragged.node.fixed = false\n                        dragged.node.tempMass = 50\n                        dragged = null\n                        selected = null\n                        $(canvas).unbind('mousemove', handler.dragged)\n                        $(window).unbind('mouseup', handler.dropped)\n                        _mouseP = null\n                        return false;\n                    },\n                    moved: function(e) {\n                        pos = $(canvas).offset();\n                        mouseP = arbor.Point(e.pageX - pos.left, e.pageY - pos.top)\n                        nearest = particleSystem.nearest(mouseP);\n\n                        if (nearest.distance < 20 && nearest.node.data.link){\n                            $('canvas').css( 'cursor', 'pointer' );\n                            \n                        }else{\n                            $('canvas').css( 'cursor', 'default' );\n                        }\n                        return false;\n                    },\n                    dblclicked: function(e) {                        \n                        pos = $(canvas).offset();\n                        mouseP = arbor.Point(e.pageX - pos.left, e.pageY - pos.top)\n                        nearest = particleSystem.nearest(mouseP);\n                        var url = nearest.node.data.link;\n                        url = (url==\"\") ? null: url; \n                        if(nearest.distance < 20 && url){\n                            var link = $('<a/>', {\n                                href: url,\n                                target: \"_top\"\n                            });\n                        \n                            $('body').append(link);\n                            link[0].click();\n                        }\n                        return false;\n                    }\n                };\n                $(canvas).mousedown(handler.clicked);\n                $(canvas).dblclick(handler.dblclicked);\n                $(canvas).mousemove(handler.moved);\n            }\n        }\n\n        // helpers for figuring out where to draw arrows (thanks springy.js)\n        var intersect_line_line = function(p1, p2, p3, p4) {\n            var denom = ((p4.y - p3.y) * (p2.x - p1.x) - (p4.x - p3.x) * (p2.y - p1.y));\n            if (denom === 0) return false // lines are parallel\n            var ua = ((p4.x - p3.x) * (p1.y - p3.y) - (p4.y - p3.y) * (p1.x - p3.x)) / denom;\n            var ub = ((p2.x - p1.x) * (p1.y - p3.y) - (p2.y - p1.y) * (p1.x - p3.x)) / denom;\n\n            if (ua < 0 || ua > 1 || ub < 0 || ub > 1) return false\n            return arbor.Point(p1.x + ua * (p2.x - p1.x), p1.y + ua * (p2.y - p1.y));\n        };\n\n        var intersect_line_box = function(p1, p2, boxTuple) {\n            var p3 = {\n                x: boxTuple[0],\n                y: boxTuple[1]\n            },\n            w = boxTuple[2],\n            h = boxTuple[3];\n\n            var tl = {\n                x: p3.x,\n                y: p3.y\n            };\n            var tr = {\n                x: p3.x + w,\n                y: p3.y\n            };\n            var bl = {\n                x: p3.x,\n                y: p3.y + h\n            };\n            var br = {\n                x: p3.x + w,\n                y: p3.y + h\n            };\n\n            return intersect_line_line(p1, p2, tl, tr) || intersect_line_line(p1, p2, tr, br) || intersect_line_line(p1, p2, br, bl) || intersect_line_line(p1, p2, bl, tl) || false\n        };\n\n        return that;\n    };\n\n})();\n\n"],[0,"(function() {\n\n "]],"start1":0,"start2":0,"length1":16,"length2":10036}]],"length":19791,"saved":false}
{"ts":1366074617767,"patch":[[{"diffs":[[0,"lpha || "],[-1,"\"\""],[1,"0.5;"],[0,"\n       "]],"start1":1094,"start2":1094,"length1":18,"length2":20},{"diffs":[[0,"               \n"],[1,"                    ctx.globalAlpha = alpha;\n"],[0,"                "]],"start1":1170,"start2":1170,"length1":32,"length2":77}]],"length":19838,"saved":false}
{"ts":1366074976608,"patch":[[{"diffs":[[0,"      ctx.save()"],[-1,""],[0,""],[1,";"],[0,"\n               "]],"start1":3794,"start2":3794,"length1":32,"length2":33},{"diffs":[[0,"loat(weight) : 1"],[1,";"],[0,"\n               "]],"start1":3946,"start2":3946,"length1":32,"length2":33},{"diffs":[[0,"wLength = 6 + wt"],[1,";"],[0,"\n               "]],"start1":3996,"start2":3996,"length1":32,"length2":33},{"diffs":[[0,"owWidth = 2 + wt"],[1,";"],[0,"\n               "]],"start1":4045,"start2":4045,"length1":32,"length2":33},{"diffs":[[0," = color"],[1,";"],[0,"\n       "]],"start1":4100,"start2":4100,"length1":16,"length2":17},{"diffs":[[0,"wLength / 2, wt)"],[-1,""],[0,""],[1,";"],[0,"\n\n              "]],"start1":4418,"start2":4418,"length1":32,"length2":33},{"diffs":[[0,"   ctx.restore()"],[-1,""],[0,""],[1,";"],[0,"\n               "]],"start1":4849,"start2":4849,"length1":32,"length2":33},{"diffs":[[0,"              })"],[-1,""],[0,""],[1,";"],[0,"\n            },\n"]],"start1":5163,"start2":5163,"length1":32,"length2":33},{"diffs":[[0,"                "],[-1,"_"],[0,"mouseP = arbor.P"]],"start1":5417,"start2":5417,"length1":33,"length2":32},{"diffs":[[0,"e.pageY-pos.top)"],[1,";"],[0,"\n               "]],"start1":5472,"start2":5472,"length1":32,"length2":33},{"diffs":[[0,"    "],[-1,"selected = nearest = dragged"],[1,"nearest"],[0," = p"]],"start1":5510,"start2":5510,"length1":36,"length2":15},{"diffs":[[0,"nearest("],[-1,"_"],[0,"mouseP);"]],"start1":5539,"start2":5539,"length1":17,"length2":16},{"diffs":[[0,"            if ("],[-1,"dragged"],[1,"nearest"],[0,".node !== null) "]],"start1":5569,"start2":5569,"length1":39,"length2":39},{"diffs":[[0,".node !== null) "],[-1,"dragged"],[1,"nearest"],[0,".node.fixed = tr"]],"start1":5592,"start2":5592,"length1":39,"length2":39},{"diffs":[[0,"d = true"],[1,";"],[0,"\n\n      "]],"start1":5625,"start2":5625,"length1":16,"length2":17},{"diffs":[[0,"handler.dragged)"],[1,";"],[0,"\n               "]],"start1":5688,"start2":5688,"length1":32,"length2":33},{"diffs":[[0,"dropped)"],[1,";"],[0,"\n\n      "]],"start1":5764,"start2":5764,"length1":16,"length2":17},{"diffs":[[0,"var "],[-1,"old_nearest = nearest && nearest.node._id\n                        var pos = $(canvas).offset();\n                        var s = arbor.Point(e.pageX-pos.left, e.pageY-pos.top)\n\n "],[1,"pos = $(canvas).offset();\n                        if (!nearest) return;"],[0,"    "]],"start1":5901,"start2":5901,"length1":185,"length2":79},{"diffs":[[0,"        "],[-1,"if (!nearest) return"],[1," "],[0,"\n       "]],"start1":5991,"start2":5991,"length1":36,"length2":17},{"diffs":[[0,"    if ("],[-1,"dragged"],[1,"nearest"],[0," !== nul"]],"start1":6021,"start2":6021,"length1":23,"length2":23},{"diffs":[[0,"null && "],[-1,"dragged"],[1,"nearest"],[0,".node !="]],"start1":6041,"start2":6041,"length1":23,"length2":23},{"diffs":[[0,"        "],[-1,"var "],[1,"nearest.node."],[0,"p = part"]],"start1":6093,"start2":6093,"length1":20,"length2":29},{"diffs":[[0,"een("],[-1,"s)\n                            dragged.node.p = p"],[1,"arbor.Point(e.pageX-pos.left, e.pageY-pos.top));"],[0,"\n   "]],"start1":6140,"start2":6140,"length1":57,"length2":56}]],"length":19710,"saved":false}
{"ts":1366075112211,"patch":[[{"diffs":[[0,"    if ("],[-1,"dragged"],[1,"nearest"],[0,"===null "]],"start1":6341,"start2":6341,"length1":23,"length2":23},{"diffs":[[0,"null || "],[-1,"dragged"],[1,"nearest"],[0,".node==="]],"start1":6359,"start2":6359,"length1":23,"length2":23},{"diffs":[[0,"    if ("],[-1,"dragged"],[1,"nearest"],[0,".node !="]],"start1":6420,"start2":6420,"length1":23,"length2":23},{"diffs":[[0,"= null) "],[-1,"dragged"],[1,"nearest"],[0,".node.fi"]],"start1":6443,"start2":6443,"length1":23,"length2":23},{"diffs":[[0,"        "],[-1,"dragged"],[1,"nearest"],[0,".node.te"]],"start1":6494,"start2":6494,"length1":23,"length2":23},{"diffs":[[0,"    "],[-1,"dragged = null\n                        selected"],[1,"nearest"],[0," = n"]],"start1":6549,"start2":6549,"length1":55,"length2":15},{"diffs":[[0,"ed)\n"],[-1,"                        _mouseP = null\n"],[0,"    "]],"start1":6704,"start2":6704,"length1":47,"length2":8}]],"length":19631,"saved":false}
{"ts":1366077790917,"patch":[[{"diffs":[[0,"!particleSystem)"],[1," "],[0,"{\n              "]],"start1":543,"start2":543,"length1":32,"length2":33},{"diffs":[[0,"         return;"],[-1,"    "],[0,"\n               "]],"start1":573,"start2":573,"length1":36,"length2":32},{"diffs":[[0,"               }"],[-1," "],[0,"\n               "]],"start1":591,"start2":591,"length1":33,"length2":32},{"diffs":[[0," 'dot';\n"],[-1,"                    "],[0,""],[1,""],[0,"\n       "]],"start1":1153,"start2":1153,"length1":36,"length2":16},{"diffs":[[0,"Size"],[-1,"+\" \"+"],[1," + \" \" + "],[0,"font"],[-1," "],[0,";\n  "]],"start1":1242,"start2":1242,"length1":18,"length2":21},{"diffs":[[0,"center\";"],[-1,"  "],[0,"\n       "]],"start1":1298,"start2":1298,"length1":18,"length2":16},{"diffs":[[0," color;\n"],[-1,"                    "],[0,""],[1,""],[0,"\n       "]],"start1":1342,"start2":1342,"length1":36,"length2":16},{"diffs":[[0,").width)"],[-1,"*"],[1," * "],[0,"1.15;\n  "]],"start1":1467,"start2":1467,"length1":17,"length2":19},{"diffs":[[0,"      }\n"],[-1,"                    "],[0,""],[1,""],[0,"\n       "]],"start1":1742,"start2":1742,"length1":36,"length2":16},{"diffs":[[0,"               }"],[1,"\n                    "],[0,"else {\n         "]],"start1":2026,"start2":2026,"length1":32,"length2":53},{"diffs":[[0,"- (h"],[-1,"/"],[1," / "],[0,"1.5)"],[-1," "],[0,", w, h"],[-1,"+"],[1," + "],[0,"2, 4"]],"start1":2122,"start2":2122,"length1":21,"length2":24},{"diffs":[[0," mouseP, nearest"],[1,", oldNearest"],[0,";\n              "]],"start1":5227,"start2":5227,"length1":32,"length2":44},{"diffs":[[0,"clicked:"],[1," "],[0,"function"]],"start1":5309,"start2":5309,"length1":16,"length2":17},{"diffs":[[0,"ked: function(e)"],[1," "],[0,"{\n              "]],"start1":5313,"start2":5313,"length1":32,"length2":33},{"diffs":[[0,"or.Point(e.pageX"],[-1,"-"],[1," - "],[0,"pos.left, e.page"]],"start1":5422,"start2":5422,"length1":33,"length2":35},{"diffs":[[0,"os.left, e.pageY"],[-1,"-"],[1," - "],[0,"pos.top);\n      "]],"start1":5442,"start2":5442,"length1":33,"length2":35},{"diffs":[[0,"dragged:"],[1," "],[0,"function"]],"start1":5837,"start2":5837,"length1":16,"length2":17},{"diffs":[[0,"ged: function(e)"],[1," "],[0,"{\n              "]],"start1":5841,"start2":5841,"length1":32,"length2":33},{"diffs":[[0,"urn;"],[-1,"                        "],[0,"\n   "]],"start1":5955,"start2":5955,"length1":32,"length2":8},{"diffs":[[0,"== null)"],[1," "],[0,"{\n      "]],"start1":6022,"start2":6022,"length1":16,"length2":17},{"diffs":[[0,"(e.pageX"],[-1,"-"],[1," - "],[0,"pos.left"]],"start1":6115,"start2":6115,"length1":17,"length2":19},{"diffs":[[0," e.pageY"],[-1,"-"],[1," - "],[0,"pos.top)"]],"start1":6135,"start2":6135,"length1":17,"length2":19},{"diffs":[[0,"dropped:"],[1," "],[0,"function"]],"start1":6264,"start2":6264,"length1":16,"length2":17},{"diffs":[[0,"ction(e)"],[1," "],[0,"{\n      "]],"start1":6276,"start2":6276,"length1":16,"length2":17},{"diffs":[[0,"(nearest"],[1," "],[0,"==="],[1," "],[0,"null || "]],"start1":6314,"start2":6314,"length1":19,"length2":21},{"diffs":[[0,"est.node"],[1," "],[0,"==="],[1," "],[0,"undefine"]],"start1":6339,"start2":6339,"length1":19,"length2":21},{"diffs":[[0,"earest(mouseP);\n"],[1,"                        "],[0,"\n               "]],"start1":6964,"start2":6964,"length1":32,"length2":56},{"diffs":[[0,"  if"],[-1," (nearest.distance < 20 && nearest.node.data.link){\n"],[1,"(!oldNearest){\n                           oldNearest = nearest; \n                        } \n                        else if(oldNearest !== nearest){\n                           particleSystem.eachNode(function(node, pt) {\n                                node.data.alpha = 0.5;\n                            });\n\n                            particleSystem.eachEdge(function(edge, pt1, pt2) {\n                                edge.data.alpha = 0.2;\n                            });       \n                            if (nearest.node.data.label !== \"OR\" && nearest.node.data.label !== \"AND\" && nearest.distance < 20) {\n  "],[0,"    "]],"start1":7027,"start2":7027,"length1":60,"length2":622},{"diffs":[[0,"                "],[1,"  "],[0,"$('canvas').css("]],"start1":7657,"start2":7657,"length1":32,"length2":34},{"diffs":[[0,"$('canvas').css("],[-1," "],[0,"'cursor', 'point"]],"start1":7675,"start2":7675,"length1":33,"length2":32},{"diffs":[[0,"rsor', 'pointer'"],[-1," "],[0,");\n             "]],"start1":7694,"start2":7694,"length1":33,"length2":32},{"diffs":[[0,"    "],[1," "],[-1,"\n                        }"],[1,"   highlight(nearest.node);\n                            }\n                            "],[0,"else"],[1," "],[0,"{\n"],[1,"    "],[0,"    "]],"start1":7737,"start2":7737,"length1":40,"length2":106},{"diffs":[[0,"$('canvas').css("],[-1," "],[0,"'cursor', 'defau"]],"start1":7867,"start2":7867,"length1":33,"length2":32},{"diffs":[[0,"rsor', 'default'"],[-1," "],[0,");\n             "]],"start1":7886,"start2":7886,"length1":33,"length2":32},{"diffs":[[0,"    "],[-1,"}\n                        return false;"],[1,"    }                            \n                        \n                        }\n                 \n                        if (particleSystem.energy().mean < 0.02) {\n                            that.redraw();\n                        }"],[0,"\n   "]],"start1":7925,"start2":7925,"length1":47,"length2":246},{"diffs":[[0,"        "],[-1,"dblclicked"],[1,"highlight "],[0,": functi"]],"start1":8203,"start2":8203,"length1":26,"length2":26},{"diffs":[[0,"light : function"],[-1,"("],[1," (nod"],[0,"e) {"],[1,"\n"],[0,"                "]],"start1":8215,"start2":8215,"length1":37,"length2":42},{"diffs":[[0,"                "],[1,"            node.data.alpha = 1;\n                                    var edges = particleSystem.getEdgesFrom(node);\n                                    for (var x = 0; x < edges.length; x++) {\n                                        highlight(edges[x].target);\n                                        edges[x].data.alpha = 1;\n                                    }\n                    },\n                    dblclicked: function(e) {"],[0,"\n               "]],"start1":8249,"start2":8249,"length1":32,"length2":464},{"diffs":[[0,"l = (url"],[1," "],[0,"=="],[1," "],[0,"\"\") ? nu"]],"start1":8982,"start2":8982,"length1":18,"length2":20},{"diffs":[[0,"null"],[1," "],[0,": url;"],[-1," "],[0,"\n   "]],"start1":9000,"start2":9000,"length1":15,"length2":15},{"diffs":[[0,"      if"],[1," "],[0,"(nearest"]],"start1":9030,"start2":9030,"length1":16,"length2":17},{"diffs":[[0," && url)"],[1," "],[0,"{\n      "]],"start1":9061,"start2":9061,"length1":16,"length2":17},{"diffs":[[0,"});\n"],[-1,"                        "],[0,""],[1,""],[0,"\n   "]],"start1":9241,"start2":9241,"length1":32,"length2":8},{"diffs":[[0,"2],\n            "],[-1,""],[0,""],[1,"    "],[0,"h = boxTuple[3];"]],"start1":10468,"start2":10468,"length1":32,"length2":36},{"diffs":[[0,"eSystem)"],[1," "],[0,"{\n      "]],"start1":11650,"start2":11650,"length1":16,"length2":17},{"diffs":[[0," return;"],[-1,"    "],[0,"\n       "]],"start1":11680,"start2":11680,"length1":20,"length2":16},{"diffs":[[0,"               }"],[-1," "],[0,"\n               "]],"start1":11690,"start2":11690,"length1":33,"length2":32},{"diffs":[[0,"        "],[-1,"    "],[0,"// node:"]],"start1":11861,"start2":11861,"length1":20,"length2":16},{"diffs":[[0,"me:\"\", data:{}}\n"],[-1,"    "],[0,"                "]],"start1":11898,"start2":11898,"length1":36,"length2":32},{"diffs":[[0,"                "],[-1,"   "],[-1," "],[0,"particleSystem.e"]],"start1":11982,"start2":11982,"length1":36,"length2":32},{"diffs":[[0,"                "],[-1,"    "],[0,"var label,w;\n   "]],"start1":12047,"start2":12047,"length1":36,"length2":32},{"diffs":[[0,"bel,"],[1," "],[0,"w;\n"],[-1,"                        "],[0,"\n\n  "]],"start1":12069,"start2":12069,"length1":35,"length2":12},{"diffs":[[0,"h + 10;\n"],[-1,"                    "],[0,""],[1,""],[0,"\n       "]],"start1":12186,"start2":12186,"length1":36,"length2":16},{"diffs":[[0,"a.color)"],[-1,"{"],[0," "],[1,"{"],[0,"\n       "]],"start1":12494,"start2":12494,"length1":18,"length2":18},{"diffs":[[0,"     var a = c.a"],[1," "],[0,"? c.a : 1;\n     "]],"start1":12573,"start2":12573,"length1":32,"length2":33},{"diffs":[[0,"ba(\""],[-1,"+c.r+\",\"+c.g+\",\"+c.b+\",\"+a+"],[1," + c.r + \",\" + c.g + \",\" + c.b + \",\" + a + "],[0,"\")\";"]],"start1":12644,"start2":12644,"length1":35,"length2":51},{"diffs":[[0,"               }"],[1,"\n                    "],[0,"else"],[1," "],[0,"{\n              "]],"start1":12701,"start2":12701,"length1":36,"length2":58},{"diffs":[[0,"               }"],[-1," "],[0,""],[1,""],[0,"\n\n              "]],"start1":12807,"start2":12807,"length1":33,"length2":32},{"diffs":[[0,"           }"],[-1,""],[0,""],[1,"\n                    "],[0,"else {\n     "]],"start1":13114,"start2":13114,"length1":24,"length2":45},{"diffs":[[0," 'none')"],[-1,""],[0,""],[1," "],[0,"{\n      "]],"start1":13635,"start2":13635,"length1":16,"length2":17},{"diffs":[[0,"               }"],[-1," "],[0,""],[1,""],[0,"\n               "]],"start1":13710,"start2":13710,"length1":33,"length2":32},{"diffs":[[0,", head;\n"],[-1,"                    "],[0,""],[1,""],[0,"\n       "]],"start1":14225,"start2":14225,"length1":36,"length2":16},{"diffs":[[0,"weight;\n"],[-1,"                    "],[0,""],[1,""],[0,"\n       "]],"start1":14273,"start2":14273,"length1":36,"length2":16},{"diffs":[[0," a = c.a"],[1," "],[0,"? c.a : "]],"start1":14350,"start2":14350,"length1":16,"length2":17},{"diffs":[[0,"ba(\""],[-1,"+c.r+\",\"+c.g+\",\"+c.b+\",\"+a+\")\";\n                    "],[1," + c.r + \",\" + c.g + \",\" + c.b + \",\" + a + \")\";\n"],[0,"\n   "]],"start1":14401,"start2":14401,"length1":60,"length2":56},{"diffs":[[0,"\\t]*$/))"],[1," "],[0,"{\n      "]],"start1":14511,"start2":14511,"length1":16,"length2":17},{"diffs":[[0,"null"],[-1," ; "],[1,";"],[0,"\n   "]],"start1":14554,"start2":14554,"length1":11,"length2":9},{"diffs":[[0,"       }"],[-1," "],[0,"\n\n      "]],"start1":14573,"start2":14573,"length1":17,"length2":16},{"diffs":[[0,"                "],[-1,"    "],[0,"if (nearest && n"]],"start1":17097,"start2":17097,"length1":36,"length2":32},{"diffs":[[0,"ce < 20)"],[1," "],[0,"{\n"],[-1,"    "],[0,"        "]],"start1":17215,"start2":17215,"length1":22,"length2":19},{"diffs":[[0,"$('canvas').css("],[-1," "],[0,"'cursor', 'point"]],"start1":17254,"start2":17254,"length1":33,"length2":32},{"diffs":[[0,"pointer'"],[-1," "],[0,");\n"],[-1,"     "],[1,"\n"],[0,"        "]],"start1":17281,"start2":17281,"length1":25,"length2":20},{"diffs":[[0,"ht(node)"],[1," "],[0,"{\n      "]],"start1":17337,"start2":17337,"length1":16,"length2":17},{"diffs":[[0,"                "],[-1," "],[-1,"   "],[0,"node.data.color."]],"start1":17364,"start2":17364,"length1":36,"length2":32},{"diffs":[[0,"                "],[-1," "],[-1,"   "],[0,"var edges = part"]],"start1":17419,"start2":17419,"length1":36,"length2":32},{"diffs":[[0,"dgesFrom(node);\n"],[-1,"    "],[0,"                "]],"start1":17466,"start2":17466,"length1":36,"length2":32},{"diffs":[[0,"     for"],[1," "],[0,"(var x ="]],"start1":17509,"start2":17509,"length1":16,"length2":17},{"diffs":[[0,"x = 0; x"],[1," "],[0,"< edges."]],"start1":17523,"start2":17523,"length1":16,"length2":17},{"diffs":[[0,"th; x++)"],[1," "],[0,"{\n"],[-1,"    "],[0,"        "]],"start1":17544,"start2":17544,"length1":22,"length2":19},{"diffs":[[0,"                "],[-1,"    "],[0,"edges[x].data.co"]],"start1":17639,"start2":17639,"length1":36,"length2":32},{"diffs":[[0,"\n               "],[1,"                 }\n"],[0,"                "]],"start1":17681,"start2":17681,"length1":32,"length2":51},{"diffs":[[0,"                "],[1,"       "],[0,"}\n              "]],"start1":17721,"start2":17721,"length1":32,"length2":39},{"diffs":[[0,"        "],[-1,"    }"],[0,"highligh"]],"start1":17766,"start2":17766,"length1":21,"length2":16},{"diffs":[[0,"rest.node);\n    "],[1,"                    }\n"],[0,"                "]],"start1":17787,"start2":17787,"length1":32,"length2":54},{"diffs":[[0,"    "],[-1,"}"],[0,"else"],[1," "],[0,"{\n"],[-1,"    "],[0,"    "]],"start1":17845,"start2":17845,"length1":19,"length2":15},{"diffs":[[0,"ode, pt)"],[1," "],[0,"{\n      "]],"start1":17918,"start2":17918,"length1":16,"length2":17},{"diffs":[[0,"                "],[-1," "],[-1,"   "],[0,"node.data.color."]],"start1":17945,"start2":17945,"length1":36,"length2":32},{"diffs":[[0," = 0.6;\n"],[-1,"    "],[0,"        "]],"start1":17978,"start2":17978,"length1":20,"length2":16},{"diffs":[[0,"});\n"],[-1,"                                \n    "],[1,"\n"],[0,"    "]],"start1":18014,"start2":18014,"length1":45,"length2":9},{"diffs":[[0,"t1, pt2)"],[1," "],[0,"{\n"],[-1,"    "],[0,"        "]],"start1":18087,"start2":18087,"length1":22,"length2":19},{"diffs":[[0,"            "],[-1,"   "],[-1," "],[0,"});\n\n"],[-1,"    "],[0,"            "]],"start1":18171,"start2":18171,"length1":37,"length2":29},{"diffs":[[0,"s').css("],[-1," "],[0,"'cursor'"]],"start1":18224,"start2":18224,"length1":17,"length2":16},{"diffs":[[0,"default'"],[-1," "],[0,");\n     "]],"start1":18243,"start2":18243,"length1":17,"length2":16},{"diffs":[[0,"            "],[-1," "],[-1,"   }\n    "],[1,"}\n"],[0,"            "]],"start1":18266,"start2":18266,"length1":34,"length2":26},{"diffs":[[0,"        "],[-1,"    "],[0,"if"],[1," "],[0,"(particl"]],"start1":18363,"start2":18363,"length1":22,"length2":19},{"diffs":[[0," < 0.02)"],[1," "],[0,"{\n      "]],"start1":18403,"start2":18403,"length1":16,"length2":17},{"diffs":[[0,"                "],[-1,"  "],[-1,"  "],[0,"that.redraw();  "]],"start1":18426,"start2":18426,"length1":36,"length2":32},{"diffs":[[0,"w();"],[-1,"                                    \n    "],[1,"\n"],[0,"    "]],"start1":18452,"start2":18452,"length1":49,"length2":9},{"diffs":[[0,"e) {"],[-1,"                        "],[0,"\n   "]],"start1":18583,"start2":18583,"length1":32,"length2":8},{"diffs":[[0,"  if"],[-1,"("],[0," "],[1,"("],[0,"nearest"],[1," "],[0,"&& n"]],"start1":18810,"start2":18810,"length1":17,"length2":18},{"diffs":[[0,"< 20"],[-1," "],[0,")"],[1," "],[0,"{\n  "]],"start1":18917,"start2":18917,"length1":10,"length2":10},{"diffs":[[0," = boxTuple[2],\n"],[1,"    "],[0,"            h = "]],"start1":20061,"start2":20061,"length1":32,"length2":36}]],"length":20703,"saved":false}
{"ts":1366077871902,"patch":[[{"diffs":[[0,"                "],[1,"function "],[0,"highlight(neares"]],"start1":7729,"start2":7729,"length1":32,"length2":41},{"diffs":[[0,"n highlight("],[-1,"nearest."],[0,"node)"],[-1,";"],[1," {"],[0,"\n           "]],"start1":7752,"start2":7752,"length1":38,"length2":31},{"diffs":[[0,"                "],[-1,"     }\n"],[0,"                "]],"start1":7779,"start2":7779,"length1":39,"length2":32},{"diffs":[[0,"        "],[-1,"               else {\n"],[1,"node.data.alpha = 1;\n      "],[0,"        "]],"start1":7800,"start2":7800,"length1":38,"length2":43},{"diffs":[[0,"    "],[-1,"  $('canvas').css('cursor', 'default'"],[1,"var edges = particleSystem.getEdgesFrom(node"],[0,");\n "]],"start1":7861,"start2":7861,"length1":45,"length2":52},{"diffs":[[0,"    "],[-1,"}"],[0,"        "],[-1,"                    "],[1,"for (var x = 0; x < edges.length; x++) {"],[0,"\n   "]],"start1":7936,"start2":7936,"length1":37,"length2":56},{"diffs":[[0,"                "],[-1,"\n"],[0,"                "]],"start1":7997,"start2":7997,"length1":33,"length2":32},{"diffs":[[0,"    "],[-1,"        }\n                 \n                        if (particleSystem.energy().mean < 0.02) {\n                            that.redraw();\n"],[1,"highlight(edges[x].target);\n                                        edges[x].data.alpha = 1;\n                 "],[0,"    "]],"start1":8025,"start2":8025,"length1":146,"length2":118},{"diffs":[[0,"                "],[-1,"     "],[0,"}\n              "]],"start1":8142,"start2":8142,"length1":37,"length2":32},{"diffs":[[0,"                "],[-1," },\n"],[0,"                "]],"start1":8163,"start2":8163,"length1":36,"length2":32},{"diffs":[[0,"                "],[-1,"       "],[1,"}"],[0,"highlight : func"]],"start1":8176,"start2":8176,"length1":39,"length2":33},{"diffs":[[0,"ight"],[-1," : function ("],[1,"(nearest."],[0,"node)"],[-1," {"],[1,";"],[0,"\n   "]],"start1":8198,"start2":8198,"length1":28,"length2":23},{"diffs":[[0,"    "],[1,"}\n"],[0,"        "],[-1,"node.data.alpha = 1;\n"],[0,"    "]],"start1":8242,"start2":8242,"length1":37,"length2":18},{"diffs":[[0,"                "],[1,"  else {\n"],[0,"                "]],"start1":8258,"start2":8258,"length1":32,"length2":41},{"diffs":[[0,"    "],[-1,"var edges = particleSystem.getEdgesFrom(node"],[1,"              $('canvas').css('cursor', 'default'"],[0,");\n "]],"start1":8297,"start2":8297,"length1":52,"length2":57},{"diffs":[[0,"    "],[1,"}\n"],[0,"        "],[-1,"for (var x = 0; x < edges.length; x++) {\n"],[1,"     "],[0,"    "]],"start1":8377,"start2":8377,"length1":57,"length2":23},{"diffs":[[0,"                "],[1,"}  \n"],[0,"                "]],"start1":8391,"start2":8391,"length1":32,"length2":36},{"diffs":[[0,"    "],[-1,"     highlight(edges[x].target);\n                                        edges[x].data.alpha = 1;\n            "],[1,"if (particleSystem.energy().mean < 0.02) {\n                            that.redraw();\n"],[0,"    "]],"start1":8431,"start2":8431,"length1":118,"length2":94}]],"length":20621,"saved":false}
{"ts":1366077923794,"patch":[[{"diffs":[[0,"                "],[1," "],[0,"particleSystem.e"]],"start1":7191,"start2":7191,"length1":32,"length2":33}]],"length":20622,"saved":false}
{"ts":1366078020942,"patch":[[{"diffs":[[0,"    "],[-1,"var url ="],[1,"if (nearest &&"],[0," nea"]],"start1":8837,"start2":8837,"length1":17,"length2":22},{"diffs":[[0,"ta.l"],[-1,"ink;\n                        url = (ur"],[1,"abe"],[0,"l "],[1,"!"],[0,"== \""],[-1,"\") ? null : url;\n                        if ("],[1,"OR\" && nearest.node.data.label !== \"AND\" && "],[0,"near"]],"start1":8871,"start2":8871,"length1":97,"length2":62},{"diffs":[[0,"< 20"],[-1," && url"],[0,") {\n"]],"start1":8946,"start2":8946,"length1":15,"length2":8},{"diffs":[[0,"    "],[-1,"var link = $('<a/>', {\n                                href: url,\n                                target: \"_top\"\n                            });\n\n                            $('body').append(link);\n                            link[0].click("],[1,"that.customNodeClick.setCourse(nearest.node.name"],[0,");\n "]],"start1":8978,"start2":8978,"length1":248,"length2":56}]],"length":20393,"saved":false}
{"ts":1366078048900,"patch":[[{"diffs":[[0,"();\n"],[-1,"\n(function() {\n\n    Renderer = function(canvas) {\n        var canvas = $(canvas).get(0);\n        var ctx = canvas.getContext(\"2d\");\n        var gfx = arbor.Graphics(canvas);\n        var particleSystem = null;\n\n        var that = {\n            init: function(system) {\n                particleSystem = system;\n                particleSystem.screenSize(canvas.width, canvas.height);\n                particleSystem.screenPadding(40);\n\n                that.initMouseHandling();\n            },\n\n            redraw: function() {\n                if (!particleSystem) {\n                    return;\n                }\n                var nodeBoxes = {};\n\n                ctx.fillStyle = \"#EFEFEF\";\n                ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n                // node: {mass:#, p:{x,y}, name:\"\", data:{}}\n                // pt:   {x:#, y:#}  node position in screen coords\n                particleSystem.eachNode(function(node, pt) {\n                    var label, w;\n\n\n                    label = node.data.label || \"\";\n                    w = ctx.measureText(\"\" + label).width + 10;\n\n                    if (!(\"\" + label).match(/^[ \\t]*$/)) {\n                        pt.x = Math.floor(pt.x);\n                        pt.y = Math.floor(pt.y);\n                    }\n                    else {\n                        label = null;\n                    }\n\n                    if (node.data.color) {\n                        var c = node.data.color;\n                        var a = c.a ? c.a : 1;\n                        ctx.fillStyle = \"rgba(\" + c.r + \",\" + c.g + \",\" + c.b + \",\" + a + \")\";\n                    }\n                    else {\n                        ctx.fillStyle = \"rgba(0,0,0,1)\";\n                    }\n\n                    if (node.data.shape == 'dot') {\n                        gfx.oval(pt.x - w / 2, pt.y - w / 2, w, w, {\n                            fill: ctx.fillStyle\n                        });\n                        nodeBoxes[node.name] = [pt.x - w / 2, pt.y - w / 2, w, w];\n                    }\n                    else {\n                        gfx.rect(pt.x - w / 2, pt.y - 10, w, 20, 4, {\n                            fill: ctx.fillStyle\n                        });\n                        nodeBoxes[node.name] = [pt.x - w / 2, pt.y - 11, w, 22];\n                    }\n\n                    if (label) {\n                        ctx.font = \"10px Helvetica\";\n                        ctx.textAlign = \"center\";\n                        ctx.fillStyle = \"white\";\n                        if (node.data.color == 'none') {\n                            ctx.fillStyle = '#333333';\n                        }\n                        ctx.fillText(label || \"\", pt.x, pt.y + 4);\n                        ctx.fillText(label || \"\", pt.x, pt.y + 4);\n                    }\n                });\n\n                // edge: {source:Node, target:Node, length:#, data:{}}\n                // pt1:  {x:#, y:#}  source position in screen coords\n                // pt2:  {x:#, y:#}  target position in screen coords\n                particleSystem.eachEdge(function(edge, pt1, pt2) {\n                    var weight, color, tail, head;\n\n                    weight = edge.data.weight;\n\n                    var c = edge.data.color;\n                    var a = c.a ? c.a : 1;\n                    color = \"rgba(\" + c.r + \",\" + c.g + \",\" + c.b + \",\" + a + \")\";\n\n                    if (!color || (\"\" + color).match(/^[ \\t]*$/)) {\n                        color = null;\n                    }\n\n                    tail = intersect_line_box(pt1, pt2, nodeBoxes[edge.source.name]);\n                    head = intersect_line_box(tail, pt2, nodeBoxes[edge.target.name]);\n\n                    ctx.save();\n                    ctx.beginPath();\n                    ctx.lineWidth = (!isNaN(weight)) ? parseFloat(weight) : 1;\n                    ctx.strokeStyle = (color) ? color : \"#aaaaaa\";\n                    ctx.fillStyle = null;\n\n                    ctx.moveTo(tail.x, tail.y);\n                    ctx.lineTo(head.x, head.y);\n                    ctx.stroke();\n                    ctx.restore();\n\n                    // draw an arrowhead if this is a -> style edge\n                    if (edge.data.directed) {\n                        ctx.save()\n                        // move to the head position of the edge we just drew\n                        var wt = !isNaN(weight) ? parseFloat(weight) : 1\n                        var arrowLength = 6 + wt\n                        var arrowWidth = 2 + wt\n                        ctx.fillStyle = (color) ? color : \"#333333\"\n                        ctx.translate(head.x, head.y);\n                        ctx.rotate(Math.atan2(head.y - tail.y, head.x - tail.x));\n\n                        // delete some of the edge that's already there (so the point isn't hidden)\n                        ctx.clearRect(-arrowLength / 2, - wt / 2, arrowLength / 2, wt)\n\n                        // draw the chevron\n                        ctx.beginPath();\n                        ctx.moveTo(-arrowLength, arrowWidth);\n                        ctx.lineTo(0, 0);\n                        ctx.lineTo(-arrowLength, - arrowWidth);\n                        ctx.lineTo(-arrowLength * 0.8, - 0);\n                        ctx.closePath();\n                        ctx.fill();\n                        ctx.restore()\n                    }\n\n                    if (edge.data.name) {\n                        ctx.fillStyle = \"#333333\";\n                        ctx.font = 'italic 11px Helvetica';\n                        ctx.fillText(edge.data.name, (pt1.x + pt2.x) / 2, (pt1.y + pt2.y) / 2);\n                    }\n                })\n            },\n            initMouseHandling: function() {\n                var pos, mouseP, nearest;\n                var handler = {\n                    moved: function(e) {\n                        pos = $(canvas).offset();\n                        mouseP = arbor.Point(e.pageX - pos.left, e.pageY - pos.top)\n                        nearest = particleSystem.nearest(mouseP);\n\n                        if (nearest && nearest.node.data.label !== \"OR\" && nearest.node.data.label !== \"AND\" && nearest.distance < 20) {\n                            $('canvas').css('cursor', 'pointer');\n\n                            function highlight(node) {\n                                node.data.color.a = 1;\n                                var edges = particleSystem.getEdgesFrom(node);\n                                for (var x = 0; x < edges.length; x++) {\n                                    highlight(edges[x].target);\n                                    edges[x].data.color.a = 1;\n                                }\n                            }\n                            highlight(nearest.node);\n                        }\n                        else {\n                            particleSystem.eachNode(function(node, pt) {\n                                node.data.color.a = 0.6;\n                            });\n\n                            particleSystem.eachEdge(function(edge, pt1, pt2) {\n                                edge.data.color.a = 0.2;\n                            });\n\n                            $('canvas').css('cursor', 'default');\n                        }\n                        console.log(particleSystem.energy().mean);\n                        if (particleSystem.energy().mean < 0.02) {\n                            that.redraw();\n                        }\n\n                        return false;\n                    },\n                    clicked: function(e) {\n                        pos = $(canvas).offset();\n                        mouseP = arbor.Point(e.pageX - pos.left, e.pageY - pos.top)\n                        nearest = particleSystem.nearest(mouseP);\n                        if (nearest && nearest.node.data.label !== \"OR\" && nearest.node.data.label !== \"AND\" && nearest.distance < 20) {\n                            that.customNodeClick.setCourse(nearest.node.name);\n                        }\n                        return false;\n                    }\n                };\n                $(canvas).mousedown(handler.clicked);\n                $(canvas).mousemove(handler.moved);\n            }\n        }\n\n        // helpers for figuring out where to draw arrows (thanks springy.js)\n        var intersect_line_line = function(p1, p2, p3, p4) {\n            var denom = ((p4.y - p3.y) * (p2.x - p1.x) - (p4.x - p3.x) * (p2.y - p1.y));\n            if (denom === 0) return false // lines are parallel\n            var ua = ((p4.x - p3.x) * (p1.y - p3.y) - (p4.y - p3.y) * (p1.x - p3.x)) / denom;\n            var ub = ((p2.x - p1.x) * (p1.y - p3.y) - (p2.y - p1.y) * (p1.x - p3.x)) / denom;\n\n            if (ua < 0 || ua > 1 || ub < 0 || ub > 1) return false\n            return arbor.Point(p1.x + ua * (p2.x - p1.x), p1.y + ua * (p2.y - p1.y));\n        };\n\n        var intersect_line_box = function(p1, p2, boxTuple) {\n            var p3 = {\n                x: boxTuple[0],\n                y: boxTuple[1]\n            },\n            w = boxTuple[2],\n                h = boxTuple[3];\n\n            var tl = {\n                x: p3.x,\n                y: p3.y\n            };\n            var tr = {\n                x: p3.x + w,\n                y: p3.y\n            };\n            var bl = {\n                x: p3.x,\n                y: p3.y + h\n            };\n            var br = {\n                x: p3.x + w,\n                y: p3.y + h\n            };\n\n            return intersect_line_line(p1, p2, tl, tr) || intersect_line_line(p1, p2, tr, br) || intersect_line_line(p1, p2, br, bl) || intersect_line_line(p1, p2, bl, tl) || false\n        };\n\n        return that;\n    };\n\n})();"]],"start1":10785,"start2":10785,"length1":9608,"length2":4}]],"length":10789,"saved":false}
{"ts":1366078180346,"patch":[[{"diffs":[[0,"99999\";\n"],[1,"                    var alpha = edge.data.alpha || 0.5;\n"],[0,"        "]],"start1":2979,"start2":2979,"length1":16,"length2":72},{"diffs":[[0,"illStyle = null;"],[1,"\n                    ctx.globalAlpha = alpha;"],[0,"\n\n              "]],"start1":3507,"start2":3507,"length1":32,"length2":77}]],"length":10890,"saved":false}
{"ts":1366078184598,"patch":[[{"diffs":[[0," alpha;\n"],[-1,"\n"],[0,"        "]],"start1":3561,"start2":3561,"length1":17,"length2":16}]],"length":10889,"saved":false}
{"ts":1366078291447,"patch":[[{"diffs":[[0,"defined)"],[-1," return"],[1,"{\n                            return;\n                        } \n                        "],[0,"\n       "]],"start1":6454,"start2":6454,"length1":23,"length2":105},{"diffs":[[0,"t.node !== null)"],[1,"{\n                           "],[0," nearest.node.fi"]],"start1":6586,"start2":6586,"length1":32,"length2":61},{"diffs":[[0,"ixed = false"],[-1,"\n"],[1,";\n    "],[0,"            "]],"start1":6646,"start2":6646,"length1":25,"length2":30},{"diffs":[[0,"ass = 50"],[1,";"],[0,"\n       "]],"start1":6706,"start2":6706,"length1":16,"length2":17},{"diffs":[[0,"                "],[1,"    "],[0,"nearest = null\n "]],"start1":6724,"start2":6724,"length1":32,"length2":36},{"diffs":[[0,"t = null"],[1,";\n\n                        } \n                        "],[0,"\n       "]],"start1":6750,"start2":6750,"length1":16,"length2":70},{"diffs":[[0,"dragged)"],[1,";"],[0,"\n       "]],"start1":6875,"start2":6875,"length1":16,"length2":17},{"diffs":[[0,"dropped)"],[1,";"],[0,"\n       "]],"start1":6945,"start2":6945,"length1":16,"length2":17}]],"length":11066,"saved":false}
{"ts":1366081892996,"patch":[[{"diffs":[[0,"ata."],[-1,"label !== \"OR\" && nearest.node.data.label !== \"AND\""],[1,"course"],[0," && "]],"start1":7837,"start2":7837,"length1":59,"length2":14}]],"length":11021,"saved":false}
{"ts":1366081913386,"patch":[[{"diffs":[[0,"rest"],[-1," && nearest.node.data.label !== \"OR\" && nearest.node.data.label !== \"AND\""],[1,".node.data.course"],[0," && "]],"start1":9080,"start2":9080,"length1":81,"length2":25}]],"length":10965,"saved":false}
{"ts":1366082638168,"patch":[[{"diffs":[[0,"    "],[-1,"node.data.alpha = 0.5;"],[1,"if(node.data.course){\n                                    node.data.alpha = 0.5;                                    \n                                }else if(node.data.or || node.data.and){\n                                    node.data.alpha = 0.2;\n                                }"],[0,"\n   "]],"start1":7558,"start2":7558,"length1":30,"length2":290}]],"length":11225,"saved":false}
{"ts":1366082683524,"patch":[[{"diffs":[[0,".data.alpha = 0."],[-1,"2"],[1,"1"],[0,";\n              "]],"start1":7792,"start2":7792,"length1":33,"length2":33},{"diffs":[[0,"pha = 0."],[-1,"2"],[1,"1"],[0,";\n      "]],"start1":8001,"start2":8001,"length1":17,"length2":17}]],"length":11225,"saved":false}
{"ts":1366082961930,"patch":[[{"diffs":[[0,"              }\n"],[1,"                           oldNearest = nearest; \n"],[0,"                "]],"start1":8860,"start2":8860,"length1":32,"length2":82}]],"length":11275,"saved":false}
{"ts":1366083075378,"patch":[[{"diffs":[[0,"pha = 0."],[-1,"5"],[1,"2"],[0,";       "]],"start1":7632,"start2":7632,"length1":17,"length2":17},{"diffs":[[0,"rest.distance < "],[-1,"2"],[1,"3"],[0,"0) {\n           "]],"start1":8114,"start2":8114,"length1":33,"length2":33}]],"length":11275,"saved":false}
{"ts":1366083078431,"patch":[[{"diffs":[[0,"tance < "],[-1,"3"],[1,"2"],[0,"0) {\n   "]],"start1":8122,"start2":8122,"length1":17,"length2":17}]],"length":11275,"saved":false}
{"ts":1366083336200,"patch":[[{"diffs":[[0,"                "],[-1,"\n"],[1,"nearest = nearest.distance <20 ? nearest: null;\n                        \n                        if(nearest){\n    "],[0,"                "]],"start1":7265,"start2":7265,"length1":33,"length2":146},{"diffs":[[0,"                "],[1,"  "],[1,"  "],[0,"oldNearest = nea"]],"start1":7447,"start2":7447,"length1":32,"length2":36},{"diffs":[[0,"                "],[1,"    "],[0,"} \n             "]],"start1":7498,"start2":7498,"length1":32,"length2":36},{"diffs":[[0,"            "],[1," "],[1,"   "],[0,"else if(oldN"]],"start1":7533,"start2":7533,"length1":24,"length2":28},{"diffs":[[0,"                "],[1,"   "],[1," "],[0,"particleSystem.e"]],"start1":7594,"start2":7594,"length1":32,"length2":36},{"diffs":[[0,"            "],[1,"    "],[0,"if(node.data"]],"start1":7679,"start2":7679,"length1":24,"length2":28},{"diffs":[[0,"                "],[1,"  "],[1,"  "],[0,"node.data.alpha "]],"start1":7737,"start2":7737,"length1":32,"length2":36},{"diffs":[[0,"               \n"],[1,"    "],[0,"                "]],"start1":7800,"start2":7800,"length1":32,"length2":36},{"diffs":[[0,"                "],[1,"    "],[0,"node.data.alpha "]],"start1":7913,"start2":7913,"length1":32,"length2":36},{"diffs":[[0,"                "],[-1,"}\n"],[1,"    }\n    "],[0,"                "]],"start1":7972,"start2":7972,"length1":34,"length2":42},{"diffs":[[0,"            });\n"],[-1,"\n"],[1,"    \n    "],[0,"                "]],"start1":8014,"start2":8014,"length1":33,"length2":41},{"diffs":[[0,"            "],[1,"    "],[0,"edge.data.al"]],"start1":8138,"start2":8138,"length1":24,"length2":28},{"diffs":[[0,"        "],[1," "],[1,"   "],[0,"});     "]],"start1":8197,"start2":8197,"length1":16,"length2":20},{"diffs":[[0,"     });       \n"],[1,"    "],[0,"                "]],"start1":8204,"start2":8204,"length1":32,"length2":36},{"diffs":[[0,"urse"],[-1," && nearest.distance < 20"],[0,") {\n"],[1,"    "],[0,"    "]],"start1":8276,"start2":8276,"length1":37,"length2":16},{"diffs":[[0,"'pointer');\n"],[1,"    "],[0,"            "]],"start1":8346,"start2":8346,"length1":24,"length2":28},{"diffs":[[0,"                "],[1,"    "],[0,"node.data.alpha "]],"start1":8441,"start2":8441,"length1":32,"length2":36},{"diffs":[[0,"data.alpha = 1;\n"],[1,"    "],[0,"                "]],"start1":8466,"start2":8466,"length1":32,"length2":36},{"diffs":[[0,"        "],[1,"    "],[0,"for (var"]],"start1":8597,"start2":8597,"length1":16,"length2":20},{"diffs":[[0,"        "],[1," "],[1,"   "],[0,"highligh"]],"start1":8682,"start2":8682,"length1":16,"length2":20},{"diffs":[[0,"x].target);\n"],[1,"    "],[0,"            "]],"start1":8710,"start2":8710,"length1":24,"length2":28},{"diffs":[[0,"                "],[-1,"}\n"],[1,"    }\n  "],[0,"                "]],"start1":8811,"start2":8811,"length1":34,"length2":40},{"diffs":[[0,"        "],[1,"  "],[0,"}highlig"]],"start1":8859,"start2":8859,"length1":16,"length2":18},{"diffs":[[0,"rest.node);\n"],[1,"    "],[0,"            "]],"start1":8883,"start2":8883,"length1":24,"length2":28},{"diffs":[[0,"                "],[1,"    "],[0,"else {\n         "]],"start1":8941,"start2":8941,"length1":32,"length2":36},{"diffs":[[0,"                "],[1,"   "],[1," "],[0,"$('canvas').css("]],"start1":8984,"start2":8984,"length1":32,"length2":36},{"diffs":[[0,"                "],[-1,"}\n"],[1,"    }\n    "],[0,"                "]],"start1":9054,"start2":9054,"length1":34,"length2":42},{"diffs":[[0,"        "],[1,"   "],[-1,"}"],[1," }      \n                        }else{\n                        particleSystem.eachNode(function(node, pt) {\n                                if(node.data.course){\n                                    node.data.alpha = 0.5;                                    \n                                }else if(node.data.or || node.data.and){\n                                    node.data.alpha = 0.1;\n                                }\n                            });\n                        }\n                            \n                        }\n                      "],[0,"  \n     "]],"start1":9146,"start2":9146,"length1":17,"length2":578}]],"length":12040,"saved":false}
{"ts":1366083387013,"patch":[[{"diffs":[[0,"                "],[1,"    "],[0,"particleSystem.e"]],"start1":9205,"start2":9205,"length1":32,"length2":36},{"diffs":[[0,"                "],[-1,"}"],[0,"\n               "]],"start1":9625,"start2":9625,"length1":33,"length2":32}]],"length":12043,"saved":false}
{"ts":1366083397070,"patch":[[{"diffs":[[0," });"],[-1,"\n                        \n "],[0,"    "]],"start1":9612,"start2":9612,"length1":35,"length2":8}]],"length":12016,"saved":false}
{"ts":1366083448257,"patch":[[{"diffs":[[0,"pha = 0."],[-1,"5"],[1,"7"],[0,";       "]],"start1":9372,"start2":9372,"length1":17,"length2":17}]],"length":12016,"saved":false}
{"ts":1366083511611,"patch":[[{"diffs":[[0,"    });     "],[1,"\n                            \n                            particleSystem.eachEdge(function(edge, pt1, pt2) {\n                                edge.data.alpha = 0.1;\n                            });  \n  "],[0,"            "]],"start1":9609,"start2":9609,"length1":24,"length2":224}]],"length":12216,"saved":false}
{"ts":1366083689792,"patch":[[{"diffs":[[0,"    "],[-1,"nearest = nearest.distance <20 ? nearest: null;\n                        \n                        if(nearest){"],[0,"\n   "]],"start1":7277,"start2":7277,"length1":117,"length2":8},{"diffs":[[0,"    "],[-1,"}else{\n                            particleSystem.eachNode(function(node, pt) {\n                                if(node.data.course){\n                                    node.data.alpha = 0.7;                                    \n                                }else if(node.data.or || node.data.and){\n                                    node.data.alpha = 0.1;\n                                }\n                            });     \n                            \n                            particleSystem.eachEdge(function(edge, pt1, pt2) {\n                                edge.data.alpha = 0.1;\n                            });  \n                        \n                        }\n"],[0,"    "]],"start1":9077,"start2":9077,"length1":688,"length2":8}]],"length":11427,"saved":false}
{"ts":1366083825937,"patch":[[{"diffs":[[0,"dNearest"],[1,", hovered"],[0,";\n      "]],"start1":5347,"start2":5347,"length1":16,"length2":25},{"diffs":[[0,"                "],[1,"hovered = nearest.distance < 20;"],[0,"\n               "]],"start1":7274,"start2":7274,"length1":32,"length2":64},{"diffs":[[0,"            "],[1,"\n           "],[1,"         "],[0,"    if(!oldN"]],"start1":7335,"start2":7335,"length1":24,"length2":45},{"diffs":[[0,"                "],[-1,"  "],[-1,"  "],[0,"oldNearest = nea"]],"start1":7400,"start2":7400,"length1":36,"length2":32},{"diffs":[[0,"est = nearest; \n"],[-1,"    "],[0,"                "]],"start1":7423,"start2":7423,"length1":36,"length2":32},{"diffs":[[0,"            "],[-1,"    "],[0,"else if(oldN"]],"start1":7478,"start2":7478,"length1":28,"length2":24},{"diffs":[[0,"                "],[-1," "],[-1,"   "],[0,"particleSystem.e"]],"start1":7535,"start2":7535,"length1":36,"length2":32},{"diffs":[[0,"        "],[-1,"    "],[0,"if(node."]],"start1":7620,"start2":7620,"length1":20,"length2":16},{"diffs":[[0,"ourse){\n"],[-1,"    "],[0,"        "]],"start1":7642,"start2":7642,"length1":20,"length2":16},{"diffs":[[0,"        "],[-1,"    "],[0,"}else if"]],"start1":7769,"start2":7769,"length1":20,"length2":16},{"diffs":[[0,"                "],[-1,"    "],[0,"node.data.alpha "]],"start1":7838,"start2":7838,"length1":36,"length2":32},{"diffs":[[0,"            "],[-1,"  "],[-1,"  }\n    "],[1,"}\n"],[0,"            "]],"start1":7897,"start2":7897,"length1":34,"length2":26},{"diffs":[[0,"    });\n"],[-1,"    \n    "],[1,"\n"],[0,"        "]],"start1":7935,"start2":7935,"length1":25,"length2":17},{"diffs":[[0,"            "],[-1,"    "],[0,"edge.data.al"]],"start1":8043,"start2":8043,"length1":28,"length2":24},{"diffs":[[0,"ta.alpha = 0.1;\n"],[-1,"    "],[0,"                "]],"start1":8062,"start2":8062,"length1":36,"length2":32},{"diffs":[[0,"                "],[-1,"    "],[0,"if (nearest.node"]],"start1":8129,"start2":8129,"length1":36,"length2":32},{"diffs":[[0,"a.course) {\n"],[-1,"    "],[0,"            "]],"start1":8165,"start2":8165,"length1":28,"length2":24},{"diffs":[[0,"        "],[-1,"   "],[-1," "],[0,"function"]],"start1":8271,"start2":8271,"length1":20,"length2":16},{"diffs":[[0,"ght(node) {\n"],[-1,"    "],[0,"            "]],"start1":8294,"start2":8294,"length1":28,"length2":24},{"diffs":[[0,"            "],[-1,"    "],[0,"var edges = "]],"start1":8387,"start2":8387,"length1":28,"length2":24},{"diffs":[[0,"        "],[-1," "],[-1,"   "],[0,"for (var"]],"start1":8474,"start2":8474,"length1":20,"length2":16},{"diffs":[[0,"        "],[-1,"    "],[0,"highligh"]],"start1":8555,"start2":8555,"length1":20,"length2":16},{"diffs":[[0,"x].target);\n"],[-1,"    "],[0,"            "]],"start1":8579,"start2":8579,"length1":28,"length2":24},{"diffs":[[0,"            "],[-1,"    }\n    "],[1,"}\n"],[0,"            "]],"start1":8680,"start2":8680,"length1":34,"length2":26},{"diffs":[[0,"            "],[-1,"   "],[-1," "],[0,"}\n"],[-1,"    "],[0,"            "]],"start1":8768,"start2":8768,"length1":34,"length2":26},{"diffs":[[0,"         else {\n"],[-1,"    "],[0,"                "]],"start1":8801,"start2":8801,"length1":36,"length2":32},{"diffs":[[0,"            "],[-1,"  "],[-1,"  }\n    "],[1,"}\n"],[0,"            "]],"start1":8903,"start2":8903,"length1":34,"length2":26},{"diffs":[[0,"est = nearest; \n"],[-1,"    "],[0,"                "]],"start1":8951,"start2":8951,"length1":36,"length2":32}]],"length":11369,"saved":false}
{"ts":1366084279593,"patch":[[{"diffs":[[0,"mouseP);"],[1,"\n                        hovered = nearest.distance < 20;"],[0,"\n\n      "]],"start1":5637,"start2":5637,"length1":16,"length2":73},{"diffs":[[0,"!== null"],[1," && hovered"],[0,") neares"]],"start1":5745,"start2":5745,"length1":16,"length2":27},{"diffs":[[0,"               \n"],[1,"                        \n                        \n"],[0,"                "]],"start1":7400,"start2":7400,"length1":32,"length2":82}]],"length":11487,"saved":false}
{"ts":1366084330682,"patch":[[{"diffs":[[0,"nce < 20"],[1,"? true: false"],[0,";\n\n     "]],"start1":5693,"start2":5693,"length1":16,"length2":29},{"diffs":[[0,"nce < 20"],[1,"? true: false"],[0,";"],[-1,"\n"],[0,"        "]],"start1":7394,"start2":7394,"length1":18,"length2":30}]],"length":11512,"saved":false}
{"ts":1366084353509,"patch":[[{"diffs":[[0,"rest.distance < "],[-1,"2"],[1,"1"],[0,"0? true: false; "]],"start1":7384,"start2":7384,"length1":33,"length2":33}]],"length":11512,"saved":false}
{"ts":1366084418662,"patch":[[{"diffs":[[0,"tance < "],[-1,"1"],[1,"2"],[0,"0? true:"]],"start1":7392,"start2":7392,"length1":17,"length2":17},{"diffs":[[0,"a.course"],[1," && hovered"],[0,") {\n    "]],"start1":8308,"start2":8308,"length1":16,"length2":27}]],"length":11523,"saved":false}
{"ts":1366084485919,"patch":[[{"diffs":[[0,"                "],[-1,"\n  "],[0,"                "]],"start1":7449,"start2":7449,"length1":35,"length2":32},{"diffs":[[0," !== nearest"],[1," && hovered"],[0,"){\n         "]],"start1":7648,"start2":7648,"length1":24,"length2":35},{"diffs":[[0,"a.course"],[-1," && hovered"],[0,") {\n    "]],"start1":8316,"start2":8316,"length1":27,"length2":16}]],"length":11520,"saved":false}
{"ts":1366084729294,"patch":[[{"diffs":[[0,"    "],[-1,"particleSystem.eachNode(function(node, pt) {\n                                if(node.data.course){\n                                    node.data.alpha = 0.2;                                    \n                                }else if(node.data.or || node.data.and){\n                                    node.data.alpha = 0.1;\n                                }\n                            });\n"],[1,"mouseOver();\n                            "],[0,"\n   "]],"start1":7698,"start2":7698,"length1":400,"length2":49},{"diffs":[[0,"      }     "],[-1," "],[0,"\n           "]],"start1":8785,"start2":8785,"length1":25,"length2":24},{"diffs":[[0,"er.dblclicked);\n"],[-1,""],[0,"                "]],"start1":9611,"start2":9611,"length1":32,"length2":32},{"diffs":[[0,"ler.moved);\n"],[1,"                function mouseOver(){\n                    particleSystem.eachNode(function(node, pt) {\n                                if(node.data.course){\n                                    node.data.alpha = 0.2;                                    \n                                }else if(node.data.or || node.data.and){\n                                    node.data.alpha = 0.1;\n                                }\n                    });\n                    \n                    particleSystem.eachEdge(function(edge, pt1, pt2) {\n                                edge.data.alpha = 0.1;\n                    }); \n\n                    \n                }\n                function mouseOff(){\n                    \n                }\n"],[0,"            "]],"start1":9667,"start2":9667,"length1":24,"length2":754}]],"length":11898,"saved":false}
{"ts":1366084960378,"patch":[[{"diffs":[[0,"eP);"],[-1,"\n                        hovered = nearest.distance < 20? true: false;"],[0,"\n\n  "]],"start1":5641,"start2":5641,"length1":78,"length2":8},{"diffs":[[0,"    });\n"],[-1,"                    \n"],[0,"        "]],"start1":10043,"start2":10043,"length1":37,"length2":16},{"diffs":[[0,"ge, pt1, pt2) {\n"],[1,""],[0,"                "]],"start1":10106,"start2":10106,"length1":32,"length2":32},{"diffs":[[0,"              }\n"],[-1,""],[0,"                "]],"start1":10226,"start2":10226,"length1":32,"length2":32},{"diffs":[[0,"              }\n"],[1,"                \n                function mouseListen(){\n                    pos = $(canvas).offset();\n                    mouseP = arbor.Point(e.pageX - pos.left, e.pageY - pos.top)\n                    nearest = particleSystem.nearest(mouseP);\n                    hovered = nearest.distance < 20? true: false;                        \n                                              \n                    if(hovered){\n                        mouseOver();        \n                    }\n                    \n                }\n"],[0,"            }\n  "]],"start1":10302,"start2":10302,"length1":32,"length2":553}]],"length":12328,"saved":false}
{"ts":1366085320403,"patch":[[{"diffs":[[0,"ouseOver(){\n"],[1,"                    pos = $(canvas).offset();\n                    mouseP = arbor.Point(e.pageX - pos.left, e.pageY - pos.top)\n                    nearest = particleSystem.nearest(mouseP);\n                    hovered = nearest.distance < 20? true: false;    \n                    \n                    if(!hovered){\n                        $(canvas).mousemove(handler.mouseOut);\n                    }else{\n    "],[0,"            "]],"start1":9635,"start2":9635,"length1":24,"length2":431},{"diffs":[[0,"        "],[1,"    "],[0,"if(node."]],"start1":10143,"start2":10143,"length1":16,"length2":20},{"diffs":[[0,"                "],[1," "],[1,"   "],[0,"node.data.alpha "]],"start1":10197,"start2":10197,"length1":32,"length2":36},{"diffs":[[0,"            "],[1,"    "],[0,"}else if(nod"]],"start1":10296,"start2":10296,"length1":24,"length2":28},{"diffs":[[0,"                "],[1," "],[1,"   "],[0,"node.data.alpha "]],"start1":10373,"start2":10373,"length1":32,"length2":36},{"diffs":[[0,"                "],[1,"    "],[0,"}\n              "]],"start1":10432,"start2":10432,"length1":32,"length2":36},{"diffs":[[0,"                "],[1," "],[1,"   "],[0,"});\n"],[1,"    "],[0,"                "]],"start1":10458,"start2":10458,"length1":36,"length2":44},{"diffs":[[0,"                "],[1,"    "],[0,"edge.data.alpha "]],"start1":10573,"start2":10573,"length1":32,"length2":36},{"diffs":[[0,"ta.alpha = 0.1;\n"],[1,"    "],[0,"                "]],"start1":10600,"start2":10600,"length1":32,"length2":36},{"diffs":[[0,"   }); \n"],[1,"                    }"],[0,"\n       "]],"start1":10637,"start2":10637,"length1":16,"length2":37},{"diffs":[[0,"useO"],[-1,"ff(){\n                    "],[1,"ut(){\n                    particleSystem.eachNode(function(node, pt) {\n                        if(node.data.course){\n                            node.data.alpha = 0.7;                                    \n                        }else if(node.data.or || node.data.and){\n                            node.data.alpha = 0.1;\n                        }\n                    });\n                    particleSystem.eachEdge(function(edge, pt1, pt2) {\n                        edge.data.alpha = 0.1;\n                    }); \n                    $(canvas).mousemove(handler.mouseListen);"],[0,"\n   "]],"start1":10733,"start2":10733,"length1":34,"length2":582},{"diffs":[[0,"                "],[1,"$(canvas).mousemove(handler."],[0,"mouseOver();    "]],"start1":11753,"start2":11753,"length1":32,"length2":60},{"diffs":[[0,"Over"],[-1,"("],[0,");"],[-1,"        "],[0,"\n   "]],"start1":11802,"start2":11802,"length1":19,"length2":10},{"diffs":[[0,"      }\n"],[-1,"                    \n"],[0,"        "]],"start1":11823,"start2":11823,"length1":37,"length2":16}]],"length":13338,"saved":false}
{"ts":1366085621257,"patch":[[{"diffs":[[0,"      mo"],[-1,"ved"],[1,"useListen "],[0,": functi"]],"start1":7050,"start2":7050,"length1":19,"length2":26},{"diffs":[[0,"sten : function("],[-1,"e) "],[1,")"],[0,"{\n              "]],"start1":7063,"start2":7063,"length1":35,"length2":33},{"diffs":[[0,"                "],[1,"    "],[0,"\n               "]],"start1":7406,"start2":7406,"length1":32,"length2":36},{"diffs":[[0," if("],[-1,"!oldNearest"],[1,"hovered"],[0,"){\n "]],"start1":7450,"start2":7450,"length1":19,"length2":15},{"diffs":[[0,"        "],[-1,"oldNearest = nearest; "],[1," $(canvas).mousemove(handler.mouseOver);"],[0,"\n       "]],"start1":7483,"start2":7483,"length1":38,"length2":56},{"diffs":[[0,"               }"],[-1," "],[0,"\n               "]],"start1":7541,"start2":7541,"length1":33,"length2":32},{"diffs":[[0,"    "],[1,"},\n"],[0,"    "],[-1,"else if(oldNearest !== nearest && hovered"],[1,"                mouseOver: function("],[0,"){\n "]],"start1":7574,"start2":7574,"length1":53,"length2":51},{"diffs":[[0,"        "],[-1,"    mouseOver"],[1,"pos = $(canvas).offset"],[0,"();\n    "]],"start1":7640,"start2":7640,"length1":29,"length2":38},{"diffs":[[0,"                "],[-1,"    "],[1,"mouseP = arbor.Point(e.pageX - pos.left, e.pageY - pos.top)"],[0,"\n               "]],"start1":7682,"start2":7682,"length1":36,"length2":91},{"diffs":[[0,"                "],[-1,"   "],[1,"nearest ="],[0," particleSystem."]],"start1":7766,"start2":7766,"length1":35,"length2":41},{"diffs":[[0,"tem."],[1,"n"],[0,"ea"],[-1,"chEdge(function(edge, pt1, pt2) {\n                                edge.data.alpha = 0.1;\n           "],[1,"rest(mouseP);\n                        hovered = nearest.distance < 20? true: false;    \n"],[0,"    "]],"start1":7803,"start2":7803,"length1":110,"length2":99},{"diffs":[[0,"        "],[-1,"});"],[0,"       \n"]],"start1":7907,"start2":7907,"length1":19,"length2":16},{"diffs":[[0,"    "],[-1,"    if (nearest.node.data.course) {\n    "],[1,"if(!hovered){\n"],[0,"    "]],"start1":7943,"start2":7943,"length1":48,"length2":22},{"diffs":[[0,"  $("],[-1,"'"],[0,"canvas"],[-1,"'"],[0,")."],[-1,"css('cursor', 'pointer');\n                                function highlight(node) {\n         "],[1,"mousemove(handler.mouseOut);\n"],[0,"    "]],"start1":7987,"start2":7987,"length1":112,"length2":45},{"diffs":[[0,"    "],[-1,"   node.data.alpha = 1;"],[1,"}else{"],[0,"\n   "]],"start1":8048,"start2":8048,"length1":31,"length2":14},{"diffs":[[0,"    "],[-1,"        var edges = particleSystem.getEdgesFrom(node);\n                                    for (var x = 0; x < edges.length; x++"],[1,"particleSystem.eachNode(function(node, pt"],[0,") {\n"]],"start1":8083,"start2":8083,"length1":136,"length2":49},{"diffs":[[0,"    "],[-1,"highlight(edges[x].target);"],[1,"if(node.data.course){"],[0,"\n   "]],"start1":8168,"start2":8168,"length1":35,"length2":29},{"diffs":[[0,"    "],[-1,"edges[x]"],[1,"    node"],[0,".dat"]],"start1":8230,"start2":8230,"length1":16,"length2":16},{"diffs":[[0,"alpha = "],[-1,"1;\n"],[1,"0.2;"],[0,"        "]],"start1":8248,"start2":8248,"length1":19,"length2":20},{"diffs":[[0,"                "],[-1,"}"],[0,"\n               "]],"start1":8280,"start2":8280,"length1":33,"length2":32},{"diffs":[[0,"    "],[-1,"}highlight(nearest.node);\n                            }\n                            else {\n                                $('canvas').css('cursor', 'default');"],[1,"        }else if(node.data.or || node.data.and){"],[0,"\n   "]],"start1":8325,"start2":8325,"length1":168,"length2":56},{"diffs":[[0,"                "],[-1,"}\n"],[0,"                "]],"start1":8390,"start2":8390,"length1":34,"length2":32},{"diffs":[[0,"    "],[-1,"           oldNearest = nearest; "],[1,"node.data.alpha = 0.1;"],[0,"\n   "]],"start1":8418,"start2":8418,"length1":41,"length2":30},{"diffs":[[0,"    "],[-1,"}"],[0,"     "],[1,"           }"],[0,"\n   "]],"start1":8465,"start2":8465,"length1":14,"length2":25},{"diffs":[[0,"                "],[-1,"     "],[1,"});\n"],[0,"               \n"]],"start1":8499,"start2":8499,"length1":37,"length2":36},{"diffs":[[0,"            "],[-1,"\n       "],[0,"            "]],"start1":8522,"start2":8522,"length1":32,"length2":24},{"diffs":[[0,"        "],[-1,"    if ("],[0,"particle"]],"start1":8539,"start2":8539,"length1":24,"length2":16},{"diffs":[[0,"em.e"],[-1,"nergy().mean < 0.0"],[1,"achEdge(function(edge, pt1, pt"],[0,"2) {"]],"start1":8559,"start2":8559,"length1":26,"length2":38},{"diffs":[[0,"    "],[-1,"that.redraw();\n                "],[1,"            edge.data.alpha = 0.1;\n"],[0,"        "],[-1,"}\n"],[0,"    "]],"start1":8622,"start2":8622,"length1":49,"length2":51},{"diffs":[[0,"               }"],[-1,","],[1,"); "],[0,"\n               "]],"start1":8674,"start2":8674,"length1":33,"length2":35},{"diffs":[[0,"    "],[-1,"dblclicked: function(e) {\n"],[1,"  "],[0,"      "],[1,"\n"],[0,"    "]],"start1":8710,"start2":8710,"length1":40,"length2":17},{"diffs":[[0,"    "],[-1,"pos = $(canvas).offset();\n                        mouseP = arbor.Point(e.pageX - pos.left, e.pageY - pos.top)\n                        nearest = particleSystem.nearest(mouseP);\n                        if (nearest.node.data.course && nearest.distance < 20) {\n                            that.customNodeClick.setCourse(nearest.node.name);"],[1,"          if (nearest.node.data.course) {\n                                    $('canvas').css('cursor', 'pointer');\n                                    function highlight(node) {"],[0,"\n   "]],"start1":8737,"start2":8737,"length1":343,"length2":186},{"diffs":[[0,"                "],[-1,"    }\n"],[0,"                "]],"start1":8924,"start2":8924,"length1":38,"length2":32},{"diffs":[[0,"    "],[-1,"    return false;\n                    }"],[1,"node.data.alpha = 1;"],[0,"\n   "]],"start1":8956,"start2":8956,"length1":47,"length2":28},{"diffs":[[0,"                "],[-1,"};\n"],[1,"           "],[0,"                "]],"start1":8981,"start2":8981,"length1":35,"length2":43},{"diffs":[[0,"    "],[-1,"   $(canvas).mousedown(handler.clicked);\n                $(canvas).dblclick(handler.dblclicked);\n                $(canvas).mousemove(handler.moved);\n                function mouseOver(){\n                    pos = $(canvas).offset();\n                    mouseP = arbor.Point(e.pageX - pos.left, e.pageY - pos.top)\n                    nearest = particleSystem.nearest(mouseP);\n                    hovered = nearest.distance < 20? true: false;    "],[1,"var edges = particleSystem.getEdgesFrom(node);\n                                        for (var x = 0; x < edges.length; x++) {\n                                            highlight(edges[x].target);\n                                            edges[x].data.alpha = 1;"],[0,"\n   "]],"start1":9017,"start2":9017,"length1":452,"length2":276},{"diffs":[[0,"                "],[-1,"\n"],[0,"                "]],"start1":9294,"start2":9294,"length1":33,"length2":32},{"diffs":[[0,"            "],[-1,"if(!hovered){"],[1,"}"],[0,"\n           "]],"start1":9318,"start2":9318,"length1":37,"length2":25},{"diffs":[[0,"    "],[-1,"$(canvas).mousemove(handler.mouseOut);\n                    }else{\n                        particleSystem.eachNode(function(node, pt) {"],[1,"            }highlight(nearest.node);"],[0,"\n   "]],"start1":9352,"start2":9352,"length1":142,"length2":45},{"diffs":[[0,"    "],[-1,"    if(node.data.course){\n     "],[1,"}\n"],[0,"    "]],"start1":9422,"start2":9422,"length1":39,"length2":10},{"diffs":[[0,"    "],[-1,"   node.data.alpha = 0.2;"],[1,"else {\n"],[0,"    "]],"start1":9456,"start2":9456,"length1":33,"length2":15},{"diffs":[[0,"    "],[-1,"\n                                    }else if(node.data.or || node.data.and){\n        "],[1,"$('canvas').css('cursor', 'default');\n                                }\n"],[0,"    "]],"start1":9499,"start2":9499,"length1":94,"length2":80},{"diffs":[[0,"    "],[1,"}"],[0,"    "],[-1,"node.data.alpha = 0.1;"],[1," "],[0,"\n   "]],"start1":9599,"start2":9599,"length1":34,"length2":14},{"diffs":[[0,"            "],[-1,"        }\n"],[0,"            "]],"start1":9626,"start2":9626,"length1":34,"length2":24},{"diffs":[[0,"                "],[-1,"});\n"],[1,"\n        "],[0,"                "]],"start1":9646,"start2":9646,"length1":36,"length2":41},{"diffs":[[0,"                "],[-1,"    "],[1,"if ("],[0,"particleSystem.e"]],"start1":9675,"start2":9675,"length1":36,"length2":36},{"diffs":[[0,"em.e"],[-1,"achEdge(function(edge, pt1, pt"],[1,"nergy().mean < 0.0"],[0,"2) {"]],"start1":9707,"start2":9707,"length1":38,"length2":26},{"diffs":[[0,"    "],[-1,"    edge.data.alpha = 0.1"],[1,"that.redraw()"],[0,";\n  "]],"start1":9762,"start2":9762,"length1":33,"length2":21},{"diffs":[[0,"            "],[-1,"}); \n"],[0,"   "],[1," }"],[0,"            "]],"start1":9793,"start2":9793,"length1":32,"length2":29},{"diffs":[[0,"                "],[-1,"}"],[1,"   "],[0,"\n               "]],"start1":9811,"start2":9811,"length1":33,"length2":35},{"diffs":[[0,"                "],[-1,"\n"],[1,"},\n    "],[0,"                "]],"start1":9835,"start2":9835,"length1":33,"length2":39},{"diffs":[[0,"    "],[-1,"}\n                function mouseOut(){\n"],[1,"mouseOut: function(){\n    "],[0,"    "]],"start1":9870,"start2":9870,"length1":47,"length2":34},{"diffs":[[0,"ion(node, pt) {\n"],[1,"    "],[0,"                "]],"start1":9949,"start2":9949,"length1":32,"length2":36},{"diffs":[[0,"                "],[1,"    "],[0,"node.data.alpha "]],"start1":10027,"start2":10027,"length1":32,"length2":36},{"diffs":[[0,"                "],[1,"    "],[0,"}else if(node.da"]],"start1":10114,"start2":10114,"length1":32,"length2":36},{"diffs":[[0,"                "],[1,"  "],[1,"  "],[0,"node.data.alpha "]],"start1":10187,"start2":10187,"length1":32,"length2":36},{"diffs":[[0,"                "],[-1,"}\n"],[1,"    }\n   "],[0,"                "]],"start1":10238,"start2":10238,"length1":34,"length2":41},{"diffs":[[0,"                "],[1," "],[0,"});\n"],[1,"    "],[0,"                "]],"start1":10267,"start2":10267,"length1":36,"length2":41},{"diffs":[[0,"ge, pt1, pt2) {\n"],[1,"    "],[0,"                "]],"start1":10347,"start2":10347,"length1":32,"length2":36},{"diffs":[[0,"                "],[1,"    "],[0,"}); \n"],[1,"    "],[0,"                "]],"start1":10418,"start2":10418,"length1":37,"length2":45},{"diffs":[[0,"               }"],[1,","],[0,"\n               "]],"start1":10510,"start2":10510,"length1":32,"length2":33},{"diffs":[[0,"    "],[-1,"\n  "],[0,"    "],[-1,"          function mouseListen()"],[1,"dblclicked: function(e) "],[0,"{\n  "]],"start1":10540,"start2":10540,"length1":47,"length2":36},{"diffs":[[0,"                "],[1," "],[1,"   "],[0,"pos = $(canvas)."]],"start1":10578,"start2":10578,"length1":32,"length2":36},{"diffs":[[0,"nvas).offset();\n"],[1,"    "],[0,"                "]],"start1":10608,"start2":10608,"length1":32,"length2":36},{"diffs":[[0,"                "],[1,"   "],[1," "],[0,"nearest = partic"]],"start1":10712,"start2":10712,"length1":32,"length2":36},{"diffs":[[0,"            "],[-1,"hovered ="],[1,"    if (nearest.node.data.course &&"],[0," nearest.dis"]],"start1":10782,"start2":10782,"length1":33,"length2":59},{"diffs":[[0,"istance < 20"],[-1,"? true: false;"],[1,") {\n    "],[0,"            "]],"start1":10839,"start2":10839,"length1":38,"length2":32},{"diffs":[[0,"                "],[1,"that.customNodeClick.setCourse(nearest.node.name);"],[0,"\n               "]],"start1":10867,"start2":10867,"length1":32,"length2":82},{"diffs":[[0,"                "],[1," }\n"],[0,"                "]],"start1":10941,"start2":10941,"length1":32,"length2":35},{"diffs":[[0,"                "],[1," return false;"],[0,"\n               "]],"start1":10967,"start2":10967,"length1":32,"length2":46},{"diffs":[[0,"            "],[-1,"if(hovered){"],[1,"}"],[0,"\n           "]],"start1":11006,"start2":11006,"length1":36,"length2":25},{"diffs":[[0," }\n             "],[1,"   };\n"],[0,"           $(can"]],"start1":11017,"start2":11017,"length1":32,"length2":38},{"diffs":[[0,"  };\n           "],[1,"     "],[0,"$(canvas).mousem"]],"start1":11034,"start2":11034,"length1":32,"length2":37},{"diffs":[[0," $(canvas).mouse"],[-1,"move"],[1,"down"],[0,"(handler.mouseOv"]],"start1":11054,"start2":11054,"length1":36,"length2":36},{"diffs":[[0,"own(handler."],[-1,"mouseOver"],[1,"clicked"],[0,");\n         "]],"start1":11071,"start2":11071,"length1":33,"length2":31},{"diffs":[[0,"        "],[-1,"    }\n                }"],[1,"$(canvas).dblclick(handler.dblclicked);\n                $(canvas).mousemove(handler.mouseListen);"],[0,"\n       "]],"start1":11101,"start2":11101,"length1":39,"length2":113}]],"length":12696,"saved":false}
{"ts":1366085746148,"patch":[[{"diffs":[[0,"sten : function("],[1,"e"],[0,"){\n             "]],"start1":7063,"start2":7063,"length1":32,"length2":33},{"diffs":[[0,"eOver: function("],[1,"e"],[0,"){\n             "]],"start1":7606,"start2":7606,"length1":32,"length2":33},{"diffs":[[0,"unction("],[1,"e"],[0,"){\n     "]],"start1":9887,"start2":9887,"length1":16,"length2":17}]],"length":12699,"saved":false}
{"ts":1366086898769,"patch":[[{"diffs":[[0,"rest.distance < "],[-1,"20"],[1,"5"],[0,"? true: false;  "]],"start1":7320,"start2":7320,"length1":34,"length2":33},{"diffs":[[0,": false;    "],[1,"                       "],[0,"\n           "]],"start1":7886,"start2":7886,"length1":24,"length2":47},{"diffs":[[0,"    "],[-1,"if(!hovered){\n                            $(canvas).mousemove(handler.mouseOut);\n                        }else"],[1,"var w = ctx.measureText(\"\" + nearest.node.data.label).width + 10;\n                        var h = (ctx.measureText('M').width) * 1.15;\n                        \n                        \n                        if(oldNearest !== nearest && hovered)"],[0,"{\n  "]],"start1":7967,"start2":7967,"length1":118,"length2":254},{"diffs":[[0,"            "],[-1,"       "],[-1," "],[0,"if(node.data"]],"start1":8312,"start2":8312,"length1":32,"length2":24},{"diffs":[[0,"ta.course){\n"],[-1,"        "],[0,"            "]],"start1":8334,"start2":8334,"length1":32,"length2":24},{"diffs":[[0,"           \n"],[-1,"        "],[0,"            "]],"start1":8429,"start2":8429,"length1":32,"length2":24},{"diffs":[[0,"            "],[-1,"        "],[0,"node.data.al"]],"start1":8538,"start2":8538,"length1":32,"length2":24},{"diffs":[[0,"lpha = 0.1;\n"],[-1,"        "],[0,"            "]],"start1":8561,"start2":8561,"length1":32,"length2":24},{"diffs":[[0,"            "],[-1,"        "],[0,""],[1,""],[0,"edge.data.al"]],"start1":8738,"start2":8738,"length1":32,"length2":24},{"diffs":[[0,"      }     "],[-1,"\n  "],[0,"            "]],"start1":9709,"start2":9709,"length1":27,"length2":24},{"diffs":[[0,"                "],[1,"}\n                        }\n                        \n                            $(canvas).mousemove(handler.mouseOut);\n"],[0,"                "]],"start1":9729,"start2":9729,"length1":32,"length2":152}]],"length":12926,"saved":false}
{"ts":1366087071696,"patch":[[{"diffs":[[0,"defined)"],[-1,""],[0,""],[1," "],[0,"{\n      "]],"start1":6474,"start2":6474,"length1":16,"length2":17},{"diffs":[[0,"   }"],[-1," \n                        "],[1,"\n"],[0,"\n   "]],"start1":6542,"start2":6542,"length1":34,"length2":9},{"diffs":[[0,"== null)"],[1," "],[0,"{\n      "]],"start1":6590,"start2":6590,"length1":16,"length2":17},{"diffs":[[0,"   }"],[-1," \n                        "],[1,"\n"],[0,"\n   "]],"start1":6779,"start2":6779,"length1":34,"length2":9},{"diffs":[[0,"seListen"],[-1," "],[0,": functi"]],"start1":7011,"start2":7011,"length1":17,"length2":16},{"diffs":[[0,"ten: function(e)"],[1," "],[0,"{\n              "]],"start1":7016,"start2":7016,"length1":32,"length2":33},{"diffs":[[0," < 5"],[1," "],[0,"? true"],[1," "],[0,": false;"],[-1,"                        \n                                                  "],[1,"\n"],[0,"\n   "]],"start1":7285,"start2":7285,"length1":97,"length2":25},{"diffs":[[0,"      if"],[1," "],[0,"(hovered"]],"start1":7325,"start2":7325,"length1":16,"length2":17},{"diffs":[[0,"    if (hovered)"],[1," "],[0,"{\n              "]],"start1":7327,"start2":7327,"length1":32,"length2":33},{"diffs":[[0,"ver: function(e)"],[-1,""],[0,""],[1," "],[0,"{\n              "]],"start1":7489,"start2":7489,"length1":32,"length2":33},{"diffs":[[0,"< 20"],[1," "],[0,"? true"],[1," "],[0,": false;"],[-1,"                           \n                        "],[1,"\n"],[0,"\n   "]],"start1":7759,"start2":7759,"length1":74,"length2":25},{"diffs":[[0,"15;\n"],[-1,"                        \n                        "],[1,"\n"],[0,"\n   "]],"start1":7936,"start2":7936,"length1":57,"length2":9},{"diffs":[[0,"      if"],[1," "],[0,"(oldNear"]],"start1":7960,"start2":7960,"length1":16,"length2":17},{"diffs":[[0,"hovered)"],[1," "],[0,"{\n      "]],"start1":7996,"start2":7996,"length1":16,"length2":17},{"diffs":[[0,"              if"],[1," "],[0,"(node.data.cours"]],"start1":8098,"start2":8098,"length1":32,"length2":33},{"diffs":[[0,"ode.data.course)"],[1," "],[0,"{\n              "]],"start1":8117,"start2":8117,"length1":32,"length2":33},{"diffs":[[0,"a = 0.2;"],[1,"\n"],[0,"        "]],"start1":8186,"start2":8186,"length1":16,"length2":17},{"diffs":[[0,"                "],[-1,"    "],[1,"}"],[0,"\n               "]],"start1":8211,"start2":8211,"length1":36,"length2":33},{"diffs":[[0,"            "],[-1,"}"],[0,"else if"],[1," "],[0,"(node.data.o"]],"start1":8249,"start2":8249,"length1":32,"length2":32},{"diffs":[[0,"| node.data.and)"],[1," "],[0,"{\n              "]],"start1":8284,"start2":8284,"length1":32,"length2":33},{"diffs":[[0," });"],[-1," \n                            "],[1,"\n"],[0,"\n   "]],"start1":8589,"start2":8589,"length1":38,"length2":9},{"diffs":[[0,"                "],[-1,"    "],[0,"$('canvas').css("]],"start1":8671,"start2":8671,"length1":36,"length2":32},{"diffs":[[0,"'pointer');\n"],[-1,"    "],[1,"\n"],[0,"            "]],"start1":8713,"start2":8713,"length1":28,"length2":25},{"diffs":[[0,"                "],[-1,"    "],[0,"node.data.alpha "]],"start1":8805,"start2":8805,"length1":36,"length2":32},{"diffs":[[0,"data.alpha = 1;\n"],[-1,"    "],[0,"                "]],"start1":8826,"start2":8826,"length1":36,"length2":32},{"diffs":[[0,"        "],[-1,"    "],[0,"for (var"]],"start1":8953,"start2":8953,"length1":20,"length2":16},{"diffs":[[0,"gth; x++) {\n"],[-1,"    "],[0,"            "]],"start1":8990,"start2":8990,"length1":28,"length2":24},{"diffs":[[0,"            "],[-1,"    "],[0,"edges[x].dat"]],"start1":9098,"start2":9098,"length1":28,"length2":24},{"diffs":[[0,"\n               "],[1,"                     }\n"],[0,"                "]],"start1":9134,"start2":9134,"length1":32,"length2":55},{"diffs":[[0,"                "],[1,"       "],[0,"}\n              "]],"start1":9182,"start2":9182,"length1":32,"length2":39},{"diffs":[[0,"        "],[-1,"    }"],[0,"highligh"]],"start1":9231,"start2":9231,"length1":21,"length2":16},{"diffs":[[0,"            "],[-1," "],[-1,"   }\n    "],[1,"}\n"],[0,"            "]],"start1":9280,"start2":9280,"length1":34,"length2":26},{"diffs":[[0,"                "],[-1,"  "],[-1,"  "],[0,"$('canvas').css("]],"start1":9345,"start2":9345,"length1":36,"length2":32},{"diffs":[[0,"                "],[-1,"    "],[0,"}\n              "]],"start1":9411,"start2":9411,"length1":36,"length2":32},{"diffs":[[0,"            "],[-1,"    }       "],[1,"}\n"],[0,"            "]],"start1":9441,"start2":9441,"length1":36,"length2":26},{"diffs":[[0,"            "],[-1,"  }\n       "],[1,"}\n"],[0,"            "]],"start1":9463,"start2":9463,"length1":35,"length2":26},{"diffs":[[0,"    "],[-1," "],[0,"}\n"],[-1,"                        \n "],[1,"\n"],[0,"    "]],"start1":9489,"start2":9489,"length1":37,"length2":11},{"diffs":[[0,"            "],[-1,"           "],[0,"$(canvas).mo"]],"start1":9500,"start2":9500,"length1":35,"length2":24},{"diffs":[[0,"t);\n"],[-1,"                          \n            "],[1,"\n"],[0,"    "]],"start1":9547,"start2":9547,"length1":47,"length2":9},{"diffs":[[0,"            "],[-1,"            "],[0,"that.redraw("]],"start1":9619,"start2":9619,"length1":36,"length2":24},{"diffs":[[0,"    "],[-1,"         "],[-1,"   }                    \n                    },\n     "],[1,"}\n            },\n"],[0,"    "]],"start1":9658,"start2":9658,"length1":70,"length2":25},{"diffs":[[0,"            "],[-1,"   "],[0,"mouseOut: fu"]],"start1":9679,"start2":9679,"length1":27,"length2":24},{"diffs":[[0,"ction(e)"],[1," "],[0,"{\n"],[-1,"        "],[0,"        "]],"start1":9704,"start2":9704,"length1":26,"length2":19},{"diffs":[[0,"        "],[-1,"      "],[-1,"  "],[0,"if"],[1," "],[0,"(node.da"]],"start1":9788,"start2":9788,"length1":26,"length2":19},{"diffs":[[0,".course)"],[1," "],[0,"{\n"],[-1,"        "],[0,"        "]],"start1":9809,"start2":9809,"length1":26,"length2":19},{"diffs":[[0,"a = 0.7;"],[-1,"                "],[1,"\n"],[0,"        "]],"start1":9858,"start2":9858,"length1":32,"length2":17},{"diffs":[[0,"        "],[1,"}"],[0,"\n"],[-1,"     "],[0,"        "]],"start1":9879,"start2":9879,"length1":22,"length2":18},{"diffs":[[0,"    "],[-1,"   }"],[0,"else if"],[1," "],[0,"(nod"]],"start1":9905,"start2":9905,"length1":19,"length2":16},{"diffs":[[0,"ata.and)"],[1," "],[0,"{\n      "]],"start1":9940,"start2":9940,"length1":16,"length2":17},{"diffs":[[0,"            "],[-1,"   "],[-1,"     "],[0,"node.data.al"]],"start1":9963,"start2":9963,"length1":32,"length2":24},{"diffs":[[0,"        "],[-1,"    "],[-1,"    }\n      "],[1,"}\n"],[0,"        "]],"start1":10010,"start2":10010,"length1":32,"length2":18},{"diffs":[[0,"            "],[-1,"  "],[0,"});\n"],[-1,"        "],[0,"            "]],"start1":10024,"start2":10024,"length1":38,"length2":28},{"diffs":[[0,"            "],[-1,"        "],[0,"edge.data.al"]],"start1":10115,"start2":10115,"length1":32,"length2":24},{"diffs":[[0,"    "],[-1,"       "],[-1," "],[0,"});"],[-1," \n        "],[1,"\n"],[0,"    "]],"start1":10162,"start2":10162,"length1":29,"length2":12},{"diffs":[[0,"            "],[-1,"    },\n    "],[1,"},\n"],[0,"            "]],"start1":10228,"start2":10228,"length1":35,"length2":27},{"diffs":[[0,"        "],[-1,"    "],[0,"dblclick"]],"start1":10247,"start2":10247,"length1":20,"length2":16},{"diffs":[[0,"            "],[-1,"     "],[-1,"   "],[0,"pos = $(canv"]],"start1":10285,"start2":10285,"length1":32,"length2":24},{"diffs":[[0,"            "],[-1,"      "],[-1,"  "],[0,"mouseP = arb"]],"start1":10327,"start2":10327,"length1":32,"length2":24},{"diffs":[[0,"            "],[-1,"        "],[0,"nearest = pa"]],"start1":10403,"start2":10403,"length1":32,"length2":24},{"diffs":[[0,"st(mouseP);\n"],[-1,"        "],[0,"            "]],"start1":10445,"start2":10445,"length1":32,"length2":24},{"diffs":[[0,"            "],[-1,"        "],[0,"that.customN"]],"start1":10538,"start2":10538,"length1":32,"length2":24},{"diffs":[[0,"            "],[-1,"        "],[0,"}\n          "]],"start1":10605,"start2":10605,"length1":32,"length2":24},{"diffs":[[0,"            "],[-1," "],[-1,"       "],[0,"return false"]],"start1":10623,"start2":10623,"length1":32,"length2":24},{"diffs":[[0,"    "],[-1,"        }\n                };\n        "],[1,"}\n        };\n"],[0,"    "]],"start1":10657,"start2":10657,"length1":45,"length2":21},{"diffs":[[0,"d);\n        "],[-1,"    "],[-1,"    "],[0,"$(canvas).db"]],"start1":10716,"start2":10716,"length1":32,"length2":24},{"diffs":[[0,"d);\n        "],[-1,"     "],[-1,"   "],[0,"$(canvas).mo"]],"start1":10764,"start2":10764,"length1":32,"length2":24},{"diffs":[[0,"isten);\n"],[-1,"            }\n        }"],[0,"\n\n      "]],"start1":10810,"start2":10810,"length1":39,"length2":16}]],"length":12284,"saved":false}
{"ts":1366087256353,"patch":[[{"diffs":[[0,"    "],[-1,"            }\n                }\n\n"],[0,"    "]],"start1":9459,"start2":9459,"length1":41,"length2":8},{"diffs":[[0,"            "],[1,"     "],[1,"   "],[0,"if (particle"]],"start1":9523,"start2":9523,"length1":24,"length2":32},{"diffs":[[0,"            "],[1,"        "],[0,"that.redraw("]],"start1":9594,"start2":9594,"length1":24,"length2":32},{"diffs":[[0,"t.redraw();\n"],[1,"        "],[0,"            "]],"start1":9617,"start2":9617,"length1":24,"length2":32},{"diffs":[[0,"  }\n            "],[-1,"},\n"],[1,"        },\n        "],[0,"            mous"]],"start1":9651,"start2":9651,"length1":35,"length2":51},{"diffs":[[0,"                "],[1,"   "],[1,"     "],[0,"particleSystem.e"]],"start1":9722,"start2":9722,"length1":32,"length2":40},{"diffs":[[0,"                "],[1,"        "],[0,"if (node.data.co"]],"start1":9795,"start2":9795,"length1":32,"length2":40},{"diffs":[[0,"                "],[1,"      "],[1,"  "],[0,"node.data.alpha "]],"start1":9851,"start2":9851,"length1":32,"length2":40},{"diffs":[[0," = 0.7;\n"],[1,"        "],[0,"        "]],"start1":9890,"start2":9890,"length1":16,"length2":24},{"diffs":[[0,"                "],[1,"        "],[0,"else if (node.da"]],"start1":9932,"start2":9932,"length1":32,"length2":40},{"diffs":[[0,"                "],[1," "],[1,"       "],[0,"node.data.alpha "]],"start1":10006,"start2":10006,"length1":32,"length2":40},{"diffs":[[0,"                "],[-1,"}\n"],[1,"        }\n    "],[0,"                "]],"start1":10057,"start2":10057,"length1":34,"length2":46},{"diffs":[[0,"                "],[-1,"});\n"],[1,"    });\n        "],[0,"                "]],"start1":10087,"start2":10087,"length1":36,"length2":48},{"diffs":[[0,"                "],[1,"       "],[1," "],[0,"edge.data.alpha "]],"start1":10190,"start2":10190,"length1":32,"length2":40},{"diffs":[[0,"                "],[1,"        "],[0,"});\n            "]],"start1":10237,"start2":10237,"length1":32,"length2":40},{"diffs":[[0,"                "],[1," "],[1,"       "],[0,"$(canvas).mousem"]],"start1":10265,"start2":10265,"length1":32,"length2":40},{"diffs":[[0,"n);\n            "],[1,"  "],[-1,"},\n"],[1,"      },\n        "],[0,"            dblc"]],"start1":10327,"start2":10327,"length1":35,"length2":51},{"diffs":[[0,"                "],[1,"     "],[1,"   "],[0,"pos = $(canvas)."]],"start1":10400,"start2":10400,"length1":32,"length2":40},{"diffs":[[0,"nvas).offset();\n"],[1,"        "],[0,"                "]],"start1":10434,"start2":10434,"length1":32,"length2":40},{"diffs":[[0,"ageY - pos.top)\n"],[1,"        "],[0,"                "]],"start1":10518,"start2":10518,"length1":32,"length2":40},{"diffs":[[0,"                "],[1,"        "],[0,"if (nearest.node"]],"start1":10600,"start2":10600,"length1":32,"length2":40},{"diffs":[[0,"            "],[1,"        "],[0,"that.customN"]],"start1":10689,"start2":10689,"length1":24,"length2":32},{"diffs":[[0,"                "],[1,"   "],[-1,"}\n"],[1,"     }\n        "],[0,"                "]],"start1":10760,"start2":10760,"length1":34,"length2":50},{"diffs":[[0,"    "],[1,"      "],[-1,"}\n"],[1,"  }\n       "],[0,"        "],[1," "],[0,"};\n"],[1,"        "],[0,"    "]],"start1":10832,"start2":10832,"length1":21,"length2":45},{"diffs":[[0,"icked);\n        "],[1," "],[1,"       "],[0,"$(canvas).dblcli"]],"start1":10911,"start2":10911,"length1":32,"length2":40},{"diffs":[[0,"icked);\n        "],[1,"   "],[1,"     "],[0,"$(canvas).mousem"]],"start1":10967,"start2":10967,"length1":32,"length2":40},{"diffs":[[0,"isten);\n"],[1,"            }\n        }"],[0,"\n\n      "]],"start1":11025,"start2":11025,"length1":16,"length2":39}]],"length":12522,"saved":false}
{"ts":1366087392991,"patch":[[{"diffs":[[0,"    "],[-1,"$(canvas).mousemove(handler.mouseOver);"],[1,"\n                        }\n                        else{\n                            "],[0,"\n   "]],"start1":7370,"start2":7370,"length1":47,"length2":93}]],"length":12568,"saved":false}
{"ts":1366088602874,"patch":[[{"diffs":[[0,"earest(mouseP);\n"],[1,"\n"],[0,"                "]],"start1":7219,"start2":7219,"length1":32,"length2":33},{"diffs":[[0,"    "],[-1,"hovered = nearest.distance < 5 ? true : false;\n\n                        if (hovered) {\n                            \n                        }\n                        else{\n                            \n                        }\n                    },\n                    mouseOver: function(e) {\n                        pos = $(canvas).offset();\n                        mouseP = arbor.Point(e.pageX - pos.left, e.pageY - pos.top)\n                        nearest = particleSystem.nearest(mouseP);\n                        hovered = nearest.distance < 20 ? true : false;\n\n                        var w = ctx.measureText(\"\" + nearest.node.data.label).width + 10;\n                        var h = (ctx.measureText('M').width) * 1.15;\n\n\n                        if (oldNearest !== nearest && hovered) "],[1,"var xrange = (ctx.measureText(\"\" + nearest.node.data.label).width + 10) / 2;\n                        var yrange = ((ctx.measureText('M').width) * 1.15)/2;\n                        \n                        if( Math.floor(nearest.point.x) < xrange && \n                            Math.floor(nearest.point.y) < yrange &&\n                            oldNearest != nearest\n                        )"],[0,"{\n  "]],"start1":7256,"start2":7256,"length1":800,"length2":400},{"diffs":[[0,"   }"],[-1,"\n                        }\n                        $(canvas).mousemove(handler.mouseOut);\n\n                        if (particleSystem.energy().mean < 0.02) {\n                            that.redraw();\n                        }\n                    },\n                    mouseOut: function(e) {\n"],[1,"   \n                        }\n                        else{\n    "],[0,"    "]],"start1":9071,"start2":9071,"length1":302,"length2":72},{"diffs":[[0,"                "],[-1,"});\n"],[1,"    });\n    "],[0,"                "]],"start1":9508,"start2":9508,"length1":36,"length2":44},{"diffs":[[0,"                "],[1,"    "],[0,"edge.data.alpha "]],"start1":9623,"start2":9623,"length1":32,"length2":36},{"diffs":[[0,"                "],[-1,"});"],[1,"    });    "],[0,"\n               "]],"start1":9674,"start2":9674,"length1":35,"length2":43},{"diffs":[[0,"    "],[-1,"$(canvas).mousemove(handler.mouseListen);"],[1,"}\n                        if (particleSystem.energy().mean < 0.02) {\n                            that.redraw();\n                        }                        "],[0,"\n   "]],"start1":9722,"start2":9722,"length1":49,"length2":169}]],"length":12079,"saved":false}
{"ts":1366088956606,"patch":[[{"diffs":[[0," Math.floor("],[1,"mouseP.x - "],[0,"nearest."],[-1,"p"],[1,"screenP"],[0,"oint.x) < xr"]],"start1":7467,"start2":7467,"length1":33,"length2":50},{"diffs":[[0,"oor("],[1,"mouseP.y - "],[0,"nearest."],[-1,"p"],[1,"screenP"],[0,"oint"]],"start1":7561,"start2":7561,"length1":17,"length2":34}]],"length":12113,"saved":false}
{"ts":1366089125367,"patch":[[{"diffs":[[0,"                "],[1,"var debug = Math.floor(mouseP.x - nearest.screenPoint.x);"],[0,"\n               "]],"start1":7423,"start2":7423,"length1":32,"length2":89}]],"length":12170,"saved":false}
{"ts":1366089344642,"patch":[[{"diffs":[[0,"   if( Math."],[-1,"floor"],[1,"abs"],[0,"(mouseP.x - "]],"start1":7518,"start2":7518,"length1":29,"length2":27},{"diffs":[[0,"       Math."],[-1,"floor"],[1,"abs"],[0,"(mouseP.y - "]],"start1":7602,"start2":7602,"length1":29,"length2":27}]],"length":12166,"saved":false}
{"ts":1366089404086,"patch":[[{"diffs":[[0,"range = "],[1,"("],[0,"(ctx.mea"]],"start1":7265,"start2":7265,"length1":16,"length2":17},{"diffs":[[0," 10) / 2"],[1,")+10"],[0,";\n      "]],"start1":7328,"start2":7328,"length1":16,"length2":20},{"diffs":[[0,"   var yrange = "],[1,"("],[0,"((ctx.measureTex"]],"start1":7363,"start2":7363,"length1":32,"length2":33},{"diffs":[[0," 1.15)/2"],[1,") +10"],[0,";\n      "]],"start1":7411,"start2":7411,"length1":16,"length2":21}]],"length":12177,"saved":false}
{"ts":1366089410054,"patch":[[{"diffs":[[0,"10) / 2)"],[-1,"+"],[1," + "],[0,"10;\n    "]],"start1":7329,"start2":7329,"length1":17,"length2":19},{"diffs":[[0,"15)/2) +"],[1," "],[0,"10;\n    "]],"start1":7416,"start2":7416,"length1":16,"length2":17}]],"length":12180,"saved":false}
{"ts":1366089582498,"patch":[[{"diffs":[[0,"10;\n"],[-1,"                        var debug = Math.floor(mouseP.x - nearest.screenPoint.x);\n"],[0,"    "]],"start1":7425,"start2":7425,"length1":90,"length2":8}]],"length":12098,"saved":false}
{"ts":1366089763130,"patch":[[{"diffs":[[0," * 1.15)"],[-1,"/"],[1," / "],[0,"2) + 10;"]],"start1":7411,"start2":7411,"length1":17,"length2":19},{"diffs":[[0,"  if"],[-1,"("],[0," "],[1,"("],[0,"Math"]],"start1":7453,"start2":7453,"length1":10,"length2":10},{"diffs":[[0," && "],[-1,"\n                            "],[0,"Math"]],"start1":7510,"start2":7510,"length1":37,"length2":8},{"diffs":[[0,"e &&"],[-1,"\n                            oldNearest != nearest\n                        )"],[1," oldNearest != nearest) "],[0,"{\n  "]],"start1":7564,"start2":7564,"length1":84,"length2":32},{"diffs":[[0,"       }"],[-1,"   "],[0,"\n"],[1,""],[0,"        "]],"start1":9007,"start2":9007,"length1":20,"length2":17},{"diffs":[[0,"    else"],[1," "],[0,"{\n      "]],"start1":9062,"start2":9062,"length1":16,"length2":17},{"diffs":[[0,"                "],[1,"    "],[0,"if (node.data.co"]],"start1":9158,"start2":9158,"length1":32,"length2":36},{"diffs":[[0,"                "],[1,"    "],[0,"node.data.alpha "]],"start1":9218,"start2":9218,"length1":32,"length2":36},{"diffs":[[0,"a = "],[-1,"0.7;\n"],[1,"1;\n  "],[0,"    "]],"start1":9252,"start2":9252,"length1":13,"length2":13},{"diffs":[[0,"                "],[-1,"}\n"],[1,"  }\n    "],[0,"                "]],"start1":9273,"start2":9273,"length1":34,"length2":40},{"diffs":[[0,"                "],[1,"    "],[0,"node.data.alpha "]],"start1":9383,"start2":9383,"length1":32,"length2":36},{"diffs":[[0,"ta.alpha = 0.1;\n"],[1,"    "],[0,"                "]],"start1":9410,"start2":9410,"length1":32,"length2":36},{"diffs":[[0,"     });"],[-1,"    "],[0,"\n       "]],"start1":9649,"start2":9649,"length1":20,"length2":16},{"diffs":[[0,"t.redraw();\n"],[1,""],[0,"            "]],"start1":9782,"start2":9782,"length1":24,"length2":24},{"diffs":[[0,"   }"],[-1,"                        "],[0,"\n   "]],"start1":9815,"start2":9815,"length1":32,"length2":8}]],"length":12011,"saved":false}
{"ts":1366090049462,"patch":[[{"diffs":[[0,"data.alpha = 0.1"],[1,"5"],[0,";\n              "]],"start1":9408,"start2":9408,"length1":32,"length2":33}]],"length":12012,"saved":false}
{"ts":1366090355914,"patch":[[{"diffs":[[0,"       node.data"],[-1,""],[0,""],[1,"['save'] = node.data;\n                                    node.data"],[0,".alpha = 1;\n    "]],"start1":8401,"start2":8401,"length1":32,"length2":99},{"diffs":[[0,"x].target);\n"],[1,"                                        edges[x].data['saved'] = edges[x].data;\n"],[0,"            "]],"start1":8712,"start2":8712,"length1":24,"length2":104},{"diffs":[[0,"  if (node.data."],[-1,"course"],[1,"saved"],[0,") {\n            "]],"start1":9323,"start2":9323,"length1":38,"length2":37},{"diffs":[[0,"   node.data"],[-1,".alpha = 1;"],[1," = node.data.saved;\n"],[0,"\n           "]],"start1":9381,"start2":9381,"length1":35,"length2":44},{"diffs":[[0,"                "],[-1,"    }"],[1,"});"],[0,"\n               "]],"start1":9426,"start2":9426,"length1":37,"length2":35},{"diffs":[[0,"    "],[-1,"    else if (node.data.or || node.data.and"],[1,"particleSystem.eachEdge(function(edge, pt1, pt2"],[0,") {\n"]],"start1":9470,"start2":9470,"length1":50,"length2":55},{"diffs":[[0,"    "],[-1,"   "],[-1," nod"],[1,"if(edg"],[0,"e.data."],[-1,"alpha = 0.15;\n                                }\n                            });\n                            particleSystem.eachEdge(function(edge, pt1, pt2) {"],[1,"saved){\n                                    edges[x].data = edges[x].data['saved'];"],[0,"\n   "]],"start1":9553,"start2":9553,"length1":180,"length2":104},{"diffs":[[0,"        "],[-1,"edge.data.alpha = 0.1;"],[1,"}"],[0,"\n       "]],"start1":9678,"start2":9678,"length1":38,"length2":17}]],"length":12073,"saved":false}
{"ts":1366090391742,"patch":[[{"diffs":[[0,"a.saved;"],[1,"\n                                }"],[0,"\n\n      "]],"start1":9404,"start2":9404,"length1":16,"length2":50}]],"length":12107,"saved":false}
{"ts":1366090432319,"patch":[[{"diffs":[[0,"        edge"],[-1,"s[x]"],[0,".data = edge"]],"start1":9640,"start2":9640,"length1":28,"length2":24},{"diffs":[[0,".data = edge"],[-1,"s[x]"],[0,".data['saved"]],"start1":9652,"start2":9652,"length1":28,"length2":24}]],"length":12099,"saved":false}
{"ts":1366090814816,"patch":[[{"diffs":[[0," nearest) {\n"],[1,"                            \n"],[0,"            "]],"start1":7582,"start2":7582,"length1":24,"length2":53},{"diffs":[[0,".data.course) {\n"],[1,"                                    node.data['saved'] = node.data['saved'] ? node.data['saved'] : node.data;\n"],[0,"                "]],"start1":7736,"start2":7736,"length1":32,"length2":142},{"diffs":[[0,"ta['save"],[1,"d"],[0,"'] ="],[1," node.data['saved'] ? node.data['saved'] :"],[0," node.da"]],"start1":8554,"start2":8554,"length1":20,"length2":63},{"diffs":[[0,"t);\n"],[-1,"                                        edges[x].data['saved'] = edges[x].data;\n"],[0,"    "]],"start1":8902,"start2":8902,"length1":88,"length2":8}]],"length":12201,"saved":false}
{"ts":1366090834308,"patch":[[{"diffs":[[0,") {\n"],[-1,"                                if (node.data.course) {\n    "],[0,"    "]],"start1":7692,"start2":7692,"length1":68,"length2":8},{"diffs":[[0,"d'] : node.data;"],[1,"\n\n                                if (node.data.course) {"],[0,"\n               "]],"start1":7785,"start2":7785,"length1":32,"length2":89}]],"length":12198,"saved":false}
{"ts":1366090954978,"patch":[[{"diffs":[[0,") {\n"],[-1,"                            \n"],[0,"    "]],"start1":7590,"start2":7590,"length1":37,"length2":8},{"diffs":[[0,"e.data;\n"],[-1,"\n"],[0,"        "]],"start1":7765,"start2":7765,"length1":17,"length2":16},{"diffs":[[0,") {\n"],[-1,"                                    node.data['saved'] = node.data['saved'] ? node.data['saved'] : node.data;\n"],[0,"    "]],"start1":8474,"start2":8474,"length1":118,"length2":8}]],"length":12058,"saved":false}
{"ts":1366091124108,"patch":[[{"diffs":[[0,"'saved']"],[1,"===undefined"],[0," ? node."]],"start1":7730,"start2":7730,"length1":16,"length2":28}]],"length":12070,"saved":false}
{"ts":1366091197618,"patch":[[{"diffs":[[0,"'saved']"],[-1,"="],[1," !"],[0,"=="],[1," "],[0,"undefine"]],"start1":7730,"start2":7730,"length1":19,"length2":21}]],"length":12072,"saved":false}
{"ts":1366091214577,"patch":[[{"diffs":[[0,"ved'] = "],[1,"("],[0,"node.dat"]],"start1":7712,"start2":7712,"length1":16,"length2":17},{"diffs":[[0,"ndefined"],[1,")"],[0," ? node."]],"start1":7745,"start2":7745,"length1":16,"length2":17}]],"length":12074,"saved":false}
{"ts":1366091289679,"patch":[[{"diffs":[[0,"        node"],[-1,".data"],[0,"['saved'] = "]],"start1":7691,"start2":7691,"length1":29,"length2":24},{"diffs":[[0,"ed'] = (node"],[-1,".data"],[0,"['saved'] !="]],"start1":7708,"start2":7708,"length1":29,"length2":24},{"diffs":[[0,") ? node"],[-1,".data"],[0,"['saved'"]],"start1":7743,"start2":7743,"length1":21,"length2":16}]],"length":12059,"saved":false}
{"ts":1366091307740,"patch":[[{"diffs":[[0,"   if (node."],[-1,"data."],[0,"saved) {\n   "]],"start1":9282,"start2":9282,"length1":29,"length2":24},{"diffs":[[0," = node."],[-1,"data."],[0,"saved;\n "]],"start1":9348,"start2":9348,"length1":21,"length2":16}]],"length":12049,"saved":false}
{"ts":1366091374751,"patch":[[{"diffs":[[0,"if(edge."],[-1,"data."],[0,"saved){\n"]],"start1":9541,"start2":9541,"length1":21,"length2":16},{"diffs":[[0,"a = edge"],[-1,".data"],[0,"['saved'"]],"start1":9601,"start2":9601,"length1":21,"length2":16}]],"length":12039,"saved":false}
{"ts":1366091469061,"patch":[[{"diffs":[[0,"  }\n"],[-1,"                            else {\n                                $('canvas').css('cursor', 'default');\n                            }\n"],[0,"    "]],"start1":8984,"start2":8984,"length1":143,"length2":8},{"diffs":[[0,"            });\n"],[1,"                            $('canvas').css('cursor', 'default');\n"],[0,"                "]],"start1":9535,"start2":9535,"length1":32,"length2":98}]],"length":11970,"saved":false}
{"ts":1366091577594,"patch":[[{"diffs":[[0,"de.saved"],[1," !== null"],[0,") {\n    "]],"start1":9156,"start2":9156,"length1":16,"length2":25},{"diffs":[[0,"ge.saved"],[1," !== null"],[0,"){\n     "]],"start1":9420,"start2":9420,"length1":16,"length2":25}]],"length":11988,"saved":false}
{"ts":1366091660128,"patch":[[{"diffs":[[0,"ode.saved !="],[-1,"="],[0," null) {\n   "]],"start1":9155,"start2":9155,"length1":25,"length2":24},{"diffs":[[0,"saved !="],[-1,"="],[0," null){\n"]],"start1":9422,"start2":9422,"length1":17,"length2":16}]],"length":11986,"saved":false}
{"ts":1366091911598,"patch":[[{"diffs":[[0,"node"],[-1,"['"],[1,"."],[0,"saved"],[-1,"']"],[0," = "],[-1,"("],[0,"node"],[-1,"['"],[1,"."],[0,"saved"],[-1,"'] !== undefined) "],[0,"? node"],[-1,"['"],[1,"."],[0,"saved"],[-1,"']"],[0," : n"]],"start1":7699,"start2":7699,"length1":65,"length2":39},{"diffs":[[0,"de.saved"],[-1," != null"],[0,") {\n    "]],"start1":9130,"start2":9130,"length1":24,"length2":16},{"diffs":[[0,"aved"],[-1," != null"],[0,"){\n "]],"start1":9389,"start2":9389,"length1":16,"length2":8},{"diffs":[[0,"edge"],[-1,"['"],[1,"."],[0,"saved"],[-1,"']"],[0,";\n  "]],"start1":9444,"start2":9444,"length1":17,"length2":14}]],"length":11941,"saved":false}
{"ts":1366091927125,"patch":[[{"diffs":[[0,"aved"],[-1,"? node.saved :"],[1," ||"],[0," nod"]],"start1":7718,"start2":7718,"length1":22,"length2":11}]],"length":11930,"saved":false}
{"ts":1366092139946,"patch":[[{"diffs":[[0,"de.saved || "],[1,"$.extend({},"],[0,"node.data;\n "]],"start1":7714,"start2":7714,"length1":24,"length2":36},{"diffs":[[0,"ode.data"],[1,")"],[0,";\n      "]],"start1":7739,"start2":7739,"length1":16,"length2":17}]],"length":11943,"saved":false}
{"ts":1366092389584,"patch":[[{"diffs":[[0,"e.data.alpha || "],[-1,"0.5"],[1,"1"],[0,";\n              "]],"start1":1082,"start2":1082,"length1":35,"length2":33}]],"length":11941,"saved":false}
{"ts":1366092516711,"patch":[[{"diffs":[[0,".extend("],[1,"true, "],[0,"{},node."]],"start1":7725,"start2":7725,"length1":16,"length2":22}]],"length":11947,"saved":false}
{"ts":1366092520552,"patch":[[{"diffs":[[0,"rue, {},"],[1," "],[0,"node.dat"]],"start1":7734,"start2":7734,"length1":16,"length2":17}]],"length":11948,"saved":false}
{"ts":1366092556142,"patch":[[{"diffs":[[0,"end("],[-1,"true, "],[0,"{}, "]],"start1":7729,"start2":7729,"length1":14,"length2":8}]],"length":11942,"saved":false}
{"ts":1366092677760,"patch":[[{"diffs":[[0,"e.data ="],[1," $.extend({},"],[0," node.sa"]],"start1":9182,"start2":9182,"length1":16,"length2":29},{"diffs":[[0,", node.saved"],[1,")"],[0,";\n          "]],"start1":9202,"start2":9202,"length1":24,"length2":25}]],"length":11956,"saved":false}
{"ts":1366092727180,"patch":[[{"diffs":[[0,"e.data ="],[1,"  $.extend({},"],[0," edge.sa"]],"start1":9450,"start2":9450,"length1":16,"length2":30},{"diffs":[[0,"ge.saved"],[1,")"],[0,";\n      "]],"start1":9475,"start2":9475,"length1":16,"length2":17}]],"length":11971,"saved":false}
{"ts":1366092773461,"patch":[[{"diffs":[[0,"ge, pt1, pt2) {\n"],[1,"                                edg.saved = edge.saved || $.extend({}, edge.data);\n"],[0,"                "]],"start1":8160,"start2":8160,"length1":32,"length2":115}]],"length":12054,"saved":false}
{"ts":1366092775929,"patch":[[{"diffs":[[0,"     edg"],[1,"e"],[0,".saved ="]],"start1":8203,"start2":8203,"length1":16,"length2":17}]],"length":12055,"saved":false}
{"ts":1366092881982,"patch":[[{"diffs":[[0,"cted || "],[-1,"fals"],[1,"tru"],[0,"e;\n     "]],"start1":3090,"start2":3090,"length1":20,"length2":19}]],"length":12054,"saved":false}
{"ts":1366093012017,"patch":[[{"diffs":[[0,"| \"#"],[-1,"999999"],[1,"333333"],[0,"\";\n "]],"start1":2972,"start2":2972,"length1":14,"length2":14}]],"length":12054,"saved":false}
{"ts":1366093039231,"patch":[[{"diffs":[[0,"data.color || \"#"],[-1,"333333"],[1,"99999"],[0,"\";\n             "]],"start1":2960,"start2":2960,"length1":38,"length2":37}]],"length":12053,"saved":false}
{"ts":1366093163113,"patch":[[{"diffs":[[0,"   }"],[-1,"\n                                "],[0,"high"]],"start1":8953,"start2":8953,"length1":41,"length2":8}]],"length":12020,"saved":false}
{"ts":1366093466091,"patch":[[{"diffs":[[0,"lStyle = color;\n"],[1,"                        ctx.globalAlpha = alpha;\n"],[0,"                "]],"start1":4153,"start2":4153,"length1":32,"length2":81}]],"length":12069,"saved":false}
{"ts":1366093533042,"patch":[[{"diffs":[[0," \"#99999"],[1,"9"],[0,"\";\n     "]],"start1":2973,"start2":2973,"length1":16,"length2":17}]],"length":12070,"saved":false}
{"contributors":[],"silentsave":false,"ts":1366094046257,"patch":[[{"diffs":[[0,"    if ("],[1,"nearest.data.course && "],[0,"Math.abs"]],"start1":7497,"start2":7497,"length1":16,"length2":39}]],"length":12093,"saved":false}
{"ts":1366094081654,"patch":[[{"diffs":[[0,"nearest."],[1,"node."],[0,"data.cou"]],"start1":7505,"start2":7505,"length1":16,"length2":21}]],"length":12098,"saved":false}
{"ts":1366094126729,"patch":[[{"diffs":[[0,"pha = 0."],[-1,"2"],[1,"1"],[0,";\n      "]],"start1":7929,"start2":7929,"length1":17,"length2":17}]],"length":12098,"saved":false}
{"ts":1366094193136,"patch":[[{"diffs":[[0,"an < 0.0"],[-1,"2"],[1,"5"],[0,") {\n    "]],"start1":9825,"start2":9825,"length1":17,"length2":17}]],"length":12098,"saved":false}
{"ts":1366094295725,"patch":[[{"diffs":[[0,"}, node.saved);\n"],[1,"                                    delete node.saved;\n"],[0,"                "]],"start1":9328,"start2":9328,"length1":32,"length2":87},{"diffs":[[0,"}, edge.saved);\n"],[1,"                                    delete edge.saved;\n"],[0,"                "]],"start1":9652,"start2":9652,"length1":32,"length2":87}]],"length":12208,"saved":false}
{"ts":1366094919925,"patch":[[{"diffs":[[0,"node.data.course"],[1," || nearest.node.data.degree"],[0,") {\n            "]],"start1":8464,"start2":8464,"length1":32,"length2":60}]],"length":12236,"saved":false}
{"ts":1366095009138,"patch":[[{"diffs":[[0,"urse"],[-1," || nearest.node.data.degree"],[0,") {\n"]],"start1":8476,"start2":8476,"length1":36,"length2":8}]],"length":12208,"saved":false}
